<!DOCTYPE html>

<html>
<head>
  <title>CS Bin</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="icon" type="image/png" href="/favicon.png">
  <link rel="stylesheet" href="/third_party/CodeMirror-4.0.3/lib/codemirror.css">
  <link rel="stylesheet" href="/third_party/CodeMirror-4.0.3/addon/fold/foldgutter.css">
  <link rel="stylesheet" href="/third_party/CodeMirror-4.0.3/addon/dialog/dialog.css">
  <link rel="stylesheet" href="/style.css">

  <script src="/third_party/CodeMirror-4.0.3/lib/codemirror.js"></script>
  <script src="/third_party/CodeMirror-4.0.3/addon/search/searchcursor.js"></script>
  <script src="/third_party/CodeMirror-4.0.3/addon/search/search.js"></script>
  <script src="/third_party/CodeMirror-4.0.3/addon/dialog/dialog.js"></script>
  <script src="/third_party/CodeMirror-4.0.3/addon/edit/matchbrackets.js"></script>
  <script src="/third_party/CodeMirror-4.0.3/addon/edit/closebrackets.js"></script>
  <script src="/third_party/CodeMirror-4.0.3/addon/comment/comment.js"></script>
  <script src="/third_party/CodeMirror-4.0.3/addon/wrap/hardwrap.js"></script>
  <script src="/third_party/CodeMirror-4.0.3/addon/fold/foldcode.js"></script>
  <script src="/third_party/CodeMirror-4.0.3/addon/fold/brace-fold.js"></script>
  <script src="/third_party/CodeMirror-4.0.3/mode/javascript/javascript.js"></script>
  <script src="/third_party/CodeMirror-4.0.3/keymap/sublime.js"></script>

</head>
<body>

  <div id="left">
    <textarea id="editor"><%- include(challenges) %>
</textarea>

    <button id="execute" class="btn-console">Run Code</button>
    <button id="save" class="btn-console">Save</button>

    <div id="console">
      <div id="output"></div>
      <form>
        &gt <input type="text">
      </form>
    </div>
  </div

  ><div id="right">
    <nav>
      <ul>
        <a href="/challenge/callbacks"><li>CALLBACKS</li></a
        ><a href="/challenge/objects"><li>OBJECTS</li></a
        ><a href="/challenge/closures"><li>CLOSURES</li></a>
      </ul>
    </nav>
    <ul id="instruct">
      <%- include(challenges + '-instruct') %>
    </ul>
  </div>

  <script src="/third_party/jquery.min.js"></script>
  <script src="/third_party/esprima.js"></script>
  <script src="/bundle.js"></script>
  <script>
    setTimeout(function() {
      $('#save').on('click', function(e) {
        localStorage.setItem("<%= challenges %>", editor.getValue());
        alert('Progress saved.')
      });
      var saved = localStorage.getItem("<%= challenges %>");
      console.log(saved)
      if (saved) {
        editor.replaceRange(
          saved,
          CodeMirror.Pos(editor.firstLine()-1),
          CodeMirror.Pos(editor.lastLine())
        );
      }
    }, 100);
  </script>
</body>
</html>
