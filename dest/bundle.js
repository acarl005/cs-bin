(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({"/home/andy/Desktop/production/cs-bin/src/exec.js":[function(require,module,exports){
function render(e){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];e="object"==typeof e?JSON.stringify(e,null,4):String(e),e=e.replace(/Unexpected end of input/,"Unexpected end of input: probably an extra opening bracket or operator."),r.arrow&&(e="=> "+e),r.error&&(e='<span class="error">'+e+"</span>"),r.lineNum&&(e=e.replace(/!/,"line "+r.lineNum+" - ")),$("#console #output").append("<p>"+e+"</p>");var o=document.getElementById("console");o.scrollTop=o.scrollHeight}function repl(e){e.preventDefault();var code=$(e.target).find("input").val();commandStack.unshift(code),commandStack=commandStack.slice(0,9),commandIndex=-1,wrapLogOutput(function(){if($(e.target).find("input").val(""),code.match(/var/))return render("do var declarations in the editor above",{error:!0});var evalErr,wrappedCode="try{ "+code+"\n } catch(err) { evalErr = err }";try{var output=eval(wrappedCode)}catch(err){evalErr=err}evalErr?render(evalErr.message,{error:!0}):render(output,{arrow:!0})})}function wrapLogOutput(e){console.nativeLog=console.log,console.log=function(){[].forEach.call(arguments,function(e){render(e)}),console.nativeLog.apply(console,arguments)},e(),console.log=console.nativeLog}module.exports=function(hasErrors){function execute(){$("#console #output").empty();var errors=hasErrors(),error=errors[0];if(error)return render(error.node.innerText||$(error.node).text(),{error:!0,lineNum:editor.getLineNumber(error.line)+1});var code=editor.getValue();wrapLogOutput(function(){eval(code),$("#console form").off("submit"),$("#console form").on("submit",eval("("+String(repl)+")"))})}$(document).ready(function(){$("#console form").on("submit",repl),$("#execute").on("click",execute),$(window).on("keypress",function(e){e.ctrlKey&&e.keyCode&&execute()}),$("#console form").on("keydown",function(e){if(38===e.keyCode)commandIndex++;else{if(40!==e.keyCode)return"we can ignore this";commandIndex--}commandIndex=Math.min(commandStack.length-1,commandIndex),commandIndex=Math.max(-1,commandIndex),$("#console form input").val(commandStack[commandIndex])})})};var commandStack=[],commandIndex=-1;

},{}],"/home/andy/Desktop/production/cs-bin/src/repl.js":[function(require,module,exports){
function checkForErrors(){return errWidgets}function renderErr(r,e,t){if(!r)throw new Error("Line number for renderErr must be a valid integer.");var o=$('\n    <div class="lint-error">\n      <span class="lint-error-icon">!</span>\n      '+e+"\n    </div>\n  ")[0];errWidgets.push(editor.addLineWidget(r-1,o,{coverGutter:!1,noHScroll:!0}))}function updateErrors(){var code=editor.getValue();errWidgets.forEach(function(r){editor.removeLineWidget(r)}),errWidgets=[];try{var syntax=esprima.parse(code,{tolerant:!0,loc:!0}),evalErr,wrappedCode="try{ "+code+"\n } catch(err) { evalErr = err }";if(eval(wrappedCode),evalErr){var stack=evalErr.stack,errMessage=evalErr.message||stack.match(/.*/)[0],lineNum=evalErr.lineNumber||stack.match(/<anonymous>:(\d+):\d+/)[1];renderErr(lineNum,errMessage)}}catch(err){renderErr(err.lineNumber,err.description,err.column)}}window.onload=function(){window.editor=CodeMirror.fromTextArea(document.getElementById("code-editor"),{lineNumbers:!0,mode:"javascript",matchBrackets:!0,autoCloseBrackets:!0,keyMap:"sublime",tabSize:2,theme:"ttcn"});var r;editor.on("change",function(){clearTimeout(r),r=setTimeout(updateErrors,800)});var e=require("./save");e(editor)};var errWidgets=[];window.replaceEditorText=function(r){editor.replaceRange(r,CodeMirror.Pos(editor.firstLine()-1),CodeMirror.Pos(editor.lastLine()))};var execute=require("./exec");execute(checkForErrors),require("./resize");

},{"./exec":"/home/andy/Desktop/production/cs-bin/src/exec.js","./resize":"/home/andy/Desktop/production/cs-bin/src/resize.js","./save":"/home/andy/Desktop/production/cs-bin/src/save.js"}],"/home/andy/Desktop/production/cs-bin/src/resize.js":[function(require,module,exports){
$(document).ready(function(e){var t=$("#editor-wrap").css("height"),s=$("#console").css("height");$(".resize").draggable({axis:"y",drag:function(e){var c=e.target.style.top,o="+-";"-"===c[0]&&(c=c.slice(1),o="-+"),$("#editor-wrap").css("height","calc("+t+" "+o[0]+" "+c+")"),$("#console").css("height","calc("+s+" "+o[1]+" "+c+")")},stop:function(e){t=$("#editor-wrap").css("height"),s=$("#console").css("height"),e.target.style.top=0,editor.refresh()}})});

},{}],"/home/andy/Desktop/production/cs-bin/src/save.js":[function(require,module,exports){
module.exports=function(e){var o=window.location.pathname;$("#save").on("click",function(r){localStorage.setItem(o,e.getValue()),alert("Progress saved.")});var r=localStorage.getItem(o);r&&replaceEditorText(r),$("#clear").on("click",function(e){confirm("Are you sure? This will remove saved progress.")&&(localStorage.removeItem(o),replaceEditorText($("#code-editor").val()))})};

},{}]},{},["/home/andy/Desktop/production/cs-bin/src/repl.js"])
//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIvaG9tZS9hbmR5L0Rlc2t0b3AvcHJvZHVjdGlvbi9jcy1iaW4vc3JjL2V4ZWMuanMiLCIvaG9tZS9hbmR5L0Rlc2t0b3AvcHJvZHVjdGlvbi9jcy1iaW4vc3JjL3JlcGwuanMiLCIvaG9tZS9hbmR5L0Rlc2t0b3AvcHJvZHVjdGlvbi9jcy1iaW4vc3JjL3Jlc2l6ZS5qcyIsIi9ob21lL2FuZHkvRGVza3RvcC9wcm9kdWN0aW9uL2NzLWJpbi9zcmMvc2F2ZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBLEFBc0RBLE1BdERNLENBQUMsQ0FzREUsTUF0REssRUFzREUsQ0F0REMsS0FzREssR0FBTyxFQXRESCxRQXNERyxDQXRETSxFQUFFLEtBc0RSLEdBQUEsU0FBQSxVQUFBLE1BQUcsVUFBQSxFQUU1QixHQURrQixnQkFBVCxHQUNGLEtBQUssVUFBVSxFQUFNLEtBQU0sR0FFM0IsT0FBTyxHQUloQixFQUFPLEVBQUssUUFDViwwQkFDQSwyRUFHRSxFQUFRLFFBQ1YsRUFBSSxNQUFTLEdBQ1gsRUFBUSxRQUNWLEVBQUksdUJBQTBCLEVBQUksV0FDaEMsRUFBUSxVQUNWLEVBQU8sRUFBSyxRQUFRLElBQUcsUUFBVSxFQUFRLFFBQU8sUUFDbEQsRUFBRSxvQkFBb0IsT0FBTSxNQUFPLEVBQUksT0FHdkMsSUFBSSxHQUFhLFNBQVMsZUFBZSxVQUN6QyxHQUFXLFVBQVksRUFBVyxhQUdwQyxRQUFTLE1BQUssR0FDWixFQUFFLGdCQUNGLElBQUksTUFBTyxFQUFFLEVBQUUsUUFBUSxLQUFLLFNBQVMsS0FDckMsY0FBYSxRQUFRLE1BQ3JCLGFBQWUsYUFBYSxNQUFNLEVBQUcsR0FDckMsYUFBZSxHQUNmLGNBQWMsV0FJWixHQUhBLEVBQUUsRUFBRSxRQUFRLEtBQUssU0FBUyxJQUFJLElBRzFCLEtBQUssTUFBTSxPQUFRLE1BQU8s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QU8sTUFBTSxJQUFNLEVBQ3JCLE9BQU87QURqQlQsS0RHQyxDQUFDLENBQUMsQ0NIQyxFQUFFLFlBQVk7QUFDbEIsQUNIRixNQUFJLFdER1csQ0NIQyxDREdDLEVDSEUsQ0FBQyxDREdDLEFDSEEsY0FBYyxDQUFDLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FGT2pELEFDSEEsQUNIRixBQ0hGLEtIU0ssQ0FBQyxBRU5BLEFDSEEsQ0FBQyxPQUFPLENBQUcsRUFBQSxFREdFLEVGTUUsQUNIQSxDREdDLEFFTkEsQ0ZNQyxBQ0hBLEFDSEEsQ0FBQyxBQ0hFLENIU0QsQ0FBQyxDQ0hDLEFFTkQsQUFFeEIsR0FBSSxHQUYwQixBQUVuQixDRENxQixDRk1DLEFFTkEsQUNIRCxDREdFLENGTUMsRUVORSxDQUFDLEFDRHBCLE9IT2lCLENBQUMsQUVOVSxDQUFDLEFDRHBCLENIT2EsQUVOUSxPQ0NoRCxHQUFFLFNBQVMsR0FBRyxRQUFTLFNBQUEsR0FDckIsYUFBYSxRQUFRLEVBQU0sRUFBTyxZQUNsQyxNQUFNLG9CQUdSLElBQUksR0FBUSxhQUFhLFFBQVEsRUFDN0IsSUFDRixrQkFBa0IsR0FHcEIsRUFBRSxVQUFVLEdBQUcsUUFBUyxTQUFBLEdBQ2xCLFFBQVEsb0RBQ1YsYUFBYSxXQUFXLEdBQ3hCLGtCQUFrQixFQUFFLGdCQUFnQjtBSFBwQyxBQ0hGLFVER00sQUNIQSxDREdDLENBQUMsQUNIQSxPREdPLEVDSEUsR0RHRyxFQUFFLEVBQUU7QUNGeEIsQUNIRixBQ0hBLEdER0MsQ0FBQyxFQ0hFLElBQUksQ0ZNQyxFQUFFLEFDSEEsQUNIQSxDRk1DLEFDSEEsQ0FBQyxJQ0hJLENBQUMsSURHSSxDQUFDLEdDSEcsQ0FBQyxRQUFRLENBQUM7QUhTOUIsQUNGSixBQ0hBLFFBQUksQ0RHQyxDQ0hDLENER0MsRUNIRSxJREdJLEdERUcsRUFBRSxDQUFDO0FFSm5CLEFDSEYsR0ZNQyxBRU5BLENGTUMsQUVOQSxDRk1DLEVERUUsQ0VMQyxFQUFFLENDSEMsQ0FBQyxDSFFDLEFHUkEsRUFBRSxDQUFDLENIUUMsQ0FBQyxDQUFDLElHUkksQ0RHYixDQUFDLEFDSGMsQ0hRQyxDRUxYLElGS2dCLEVBQUUsRUFBRSxBR1JWLENBQUMsRUFBSTtBREl4QixBQ0hGLFVER00sTUFBTSxBQ0hBLENBQUMsRURHRSxDQUFDLENBQUMsR0NIRyxDQUFDLEVER0UsQ0FBQyxDQ0hDLEVBQUUsRURHRSxDQUFDLEdBQUcsQUNIQSxDREdDLEFDSEEsUUFBUSxFQUFFLENBQUMsQ0FBQztBSFExQyxBQ0ROLEFDSEksQUNIRixNRk1FLEdFTkcsQ0RHQyxBQ0hBLEdGTUcsQ0FBQyxBQ0hBLEdBQUcsR0ZJRyxDRUpDLENGSUMsQUVKQSxDRklDLElHUEksQ0FBQyxDQUFBO0FGTzFCLEFDSEksR0NISCxDQUFDLENBQUMsRUhPRSxDQ0RDLENBQUMsQ0NIQyxDREdDLENBQUMsQ0RDQyxHRUpHLENBQUMsQ0FBQyxDQUFDLENER0MsRUFBRSxFQ0hFLEdBQUcsRUFBRSxLREdEO0FERXBCLEFDREosQUNISSxjQUFNLENGSUMsQ0NEQyxDQUFDLEFDSEEsTUFBTSxDREdDLEFDSEEsQ0RHQyxDQUFDLEdDSEcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFRklFLENBQUM7QUNBaEMsQUNISSxBQ0hOLE1BQUksQ0hPQyxJQ0RJLEFFTkEsQ0RHQyxFREdFLEFFTkEsQ0RHQyxJQUFJLENBQUMsSURHSSxDQUFDLENFTkMsQ0FBQyxPQUFPLENBQUMsRUZNRSxFQUFFLEFFTkEsQ0FBQyxDQUFDLENGTUMsQ0FBQyxDQUFDO0FFTDFDLEdGTUMsQ0FBQyxDQUFDLENFTkMsQ0RHQyxJQ0hJLEVBQUU7QUhRUCxBRUpBLEFDSEYsT0RHRyxDQUFDLFVGSVUsR0FBRyxBR1BBLENER0MsQUNIQSxDREdDLENBQUMsQ0ZJQyxDQUFDLENFSkMsQUNIQSxDREdDLEFDSEEsQ0hPQyxBR1BBLENIT0MsTUVKTSxNRklNLENBQUMsS0VKRyxDRklHLEdBQUcsQ0FBQyxFQUFFLEtFSkcsT0ZJUyxDQUFDLENBQUMsQUVKUCxJQUFJLENBQUMsQ0FBQyxDQUFDLFNBQUksTUFBTSxPQUFJLENBQUM7QUZLOUUsQUNESixBQ0hJLEdDSEgsR0ZNRyxDQ0hDLENBQUMsRURHRSxHQUFHLEtEQ0ssQUVKQSxDQUFDLENER0MsQUNIQSxDRklDLEFDREEsRUNIRSxDQUFDLENGSUMsQ0FBQyxHQUFHLEFDREEsQ0RDQyxBQ0RBLENEQ0MsQUNEQSxDRENDLEFFSkEsRUZJRSxVRUpRLEVGSUksQ0FBQyxDQUFDLFNFSk8sU0FBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLFNBQUksTUFBTSxPQUFJLENBQUM7QUZLM0UsQUNESixLQ0hHLENER0MsQ0RDQyxBQ0RBLENEQ0MsS0NESyxDQUFDLENBQUMsY0RDYyxDQUFDLENBQUMsR0FBRyxDQUFDLFlBQVksQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDO0FFSDNELEFDSEYsQ0ZPRCxDQUFDLENFUEMsQ0FBQyxDSE9DLENBQUMsQ0FBQyxDRUpDLEVBQUUsRUNIRSxDQUFDLENBQUMsRUFBRSxDQUFDLE9ER1AsQUNIYyxDREdiLENDSGUsQ0RHWCxTQ0hXLENBQUMsRUFBSTtBREl6QixBQ0hGLEdIT0QsQ0FBQyxDQUFDLEdHUEcsT0FBTyxDQUFDLEVER0UsR0FBRyxDQUFDLENBQUMsY0FBYyxDQUFDLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFDLFdDSFcsQ0FBQyxFQUFFO0FGUW5FLEFDSk0sQUNIQSxJRk9GLFVBQVUsR0FBRyxDRVBDLENGT0MsQUNKQSxBQ0hBLENGT0MsRUNKRSxDQUFDLENBQUMsS0NISyxDQUFDLElER0ksQUNIQSxDREdDLEFDSEEsQ0RHQyxBQ0hBLEdER0csQ0FBQyxRQUFRLENBQUMsQ0FBQztBRktoRCxBRUpJLEFDSEEsT0RHQyxDQUFDLEdGSUcsR0VKRyxDQUFDLEdGSUcsRUVKRSxDRklDLEFFSkEsRUNIRSxDREdDLEFDSEEsQ0FBQyxDQUFDLENER0MsQ0FBQyxDQUFDLFdDSFcsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUM7QUhRN0MsQUNBSixBQ0pNLEtGSUQsQUdQQSxDSE9DLEdDQUcsR0NKRyxDQUFDLE9BQU8sRUFBRSxDRElDLEFDSkEsQ0ZJ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Q0FBQyxPQUFPLEVBQUUsRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQztLQUMxQyxNQUFNO0FBQ0wsWUFBTSxDQUFDLE1BQU0sRUFBRSxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDO0tBQ2pDO0dBQ0YsQ0FBQyxDQUFDO0NBQ0o7OztBQUdELFNBQVMsYUFBYSxDQUFDLElBQUksRUFBRTtBQUMzQixTQUFPLENBQUMsU0FBUyxHQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUM7QUFDaEMsU0FBTyxDQUFDLEdBQUcsR0FBRyxZQUFXO0FBQ3ZCLE1BQUUsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxVQUFBLElBQUksRUFBSTtBQUNqQyxZQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7S0FDZCxDQUFDLENBQUM7QUFDSCxXQUFPLENBQUMsU0FBUyxNQUFBLENBQWpCLE9BQU8sRUFBYyxTQUFTLENBQUMsQ0FBQztHQUNqQyxDQUFBO0FBQ0QsTUFBSSxFQUFFLENBQUM7QUFDUCxTQUFPLENBQUMsR0FBRyxHQUFHLE9BQU8sQ0FBQyxTQUFTLENBQUM7Q0FDakMiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihoYXNFcnJvcnMpIHtcbiAgJChkb2N1bWVudCkucmVhZHkoKCkgPT4ge1xuXG4gICAgJCgnI2NvbnNvbGUgZm9ybScpLm9uKCdzdWJtaXQnLCByZXBsKTtcbiAgICAkKCcjZXhlY3V0ZScpLm9uKCdjbGljaycsIGV4ZWN1dGUpO1xuICAgICQod2luZG93KS5vbigna2V5cHJlc3MnLCBlID0+IHtcbiAgICAgIGUuY3RybEtleSAmJiBlLmtleUNvZGUgJiYgZXhlY3V0ZSgpOyAgIC8vZXhlY3V0ZSBpZiB0aGV5IHByZXNzIGN0cmwrYiBpbiBjaHJvbWVcbiAgICB9KTtcblxuICAgICQoJyNjb25zb2xlIGZvcm0nKS5vbigna2V5ZG93bicsIGUgPT4ge1xuICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMzgpIHsgIC8vdXAgYXJyb3cga2V5XG4gICAgICAgIGNvbW1hbmRJbmRleCsrO1xuICAgICAgfSBlbHNlIGlmIChlLmtleUNvZGUgPT09IDQwKSB7ICAvL2Rvd24gYXJyb3cga2V5XG4gICAgICAgIGNvbW1hbmRJbmRleC0tO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuICd3ZSBjYW4gaWdub3JlIHRoaXMnO1xuICAgICAgfVxuICAgICAgLy8gbWFrZSBzdXJlIGNvbW1hbmRJbmRleCBzdGF5cyBpbiByZWFzb25hYmxlIHJhbmdlXG4gICAgICBjb21tYW5kSW5kZXggPSBNYXRoLm1pbihjb21tYW5kU3RhY2subGVuZ3RoIC0gMSwgY29tbWFuZEluZGV4KTtcbiAgICAgIGNvbW1hbmRJbmRleCA9IE1hdGgubWF4KC0xLCBjb21tYW5kSW5kZXgpO1xuICAgICAgJCgnI2NvbnNvbGUgZm9ybSBpbnB1dCcpLnZhbChjb21tYW5kU3RhY2tbY29tbWFuZEluZGV4XSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGZ1bmN0aW9uIGV4ZWN1dGUoKSB7XG4gICAgJCgnI2NvbnNvbGUgI291dHB1dCcpLmVtcHR5KCk7XG4gICAgdmFyIGVycm9ycyA9IGhhc0Vycm9ycygpO1xuICAgIHZhciBlcnJvciA9IGVycm9yc1swXTtcbiAgICBpZiAoZXJyb3Ipe1xuICAgICAgcmV0dXJuIHJlbmRlcihcbiAgICAgICAgZXJyb3Iubm9kZS5pbm5lclRleHQgfHwgJChlcnJvci5ub2RlKS50ZXh0KCksICAgIC8vIGNocm9tZSB8fCBmaXJlZm94XG4gICAgICAgIHsgZXJyb3I6IHRydWUsIGxpbmVOdW06IGVkaXRvci5nZXRMaW5lTnVtYmVyKGVycm9yLmxpbmUpICsgMSB9XG4gICAgICApO1xuICAgIH1cblxuICAgIHZhciBjb2RlID0gZWRpdG9yLmdldFZhbHVlKCk7XG5cbiAgICB3cmFwTG9nT3V0cHV0KCgpID0+IHtcblxuICAgICAgZXZhbChjb2RlKTtcblxuICAgICAgJCgnI2NvbnNvbGUgZm9ybScpLm9mZignc3VibWl0Jyk7XG4gICAgICAkKCcjY29uc29sZSBmb3JtJykub24oJ3N1Ym1pdCcsIGV2YWwoJygnK1N0cmluZyhyZXBsKSsnKScpKTtcbiAgICAgIC8vIHRoaXMgZXZhbC9TdHJpbmcgdGhpbmcgaXMgcHJldHR5IHdlaXJkIHJpZ2h0PyBJdCdzIGJhc2ljYWxseSBhIGhhY2sgdGhhdCBSb2IgYW5kIEkgZGV2aXNlZCB0byBcImNsb25lXCIgYSBmdW5jdGlvbi4gSXQgdGFrZXMgYSBmdW5jLCBjb252ZXJ0cyB0byBhIHN0cmluZywgdGhlbiByZWRlZmluZXMgaXQgaW4gYW4gZXZhbC4gVGhpcyBlZmZlY3RpdmVseSBhY2hpZXZlcyBkeW5hbWljIHNjb3BpbmcuIEJ5IHJlZGVmaW5pbmcgaXQgaW4gdGhpcyBzY29wZSwgSSBjYW4gYWNjZXNzIHRoZSBsb2NhbCB2YXJpYWJsZXMgaGVyZSBpbnN0ZWFkIG9mIHRoZSBkZWZhdWx0IGxleGljYWwgc2NvcGluZyBiZWhhdmlvci4gVGhlIHJlYXNvbiBJIHdhbnQgdGhpcyBpcyBzbyB0aGUgcmVwbCBoYXMgYWNjZXNzIHRvIHRoZSB2YXJpYWJsZXMgZGVmaW5lZCBpbiB0aGUgQ29kZU1pcnJvciBlZGl0b3IuXG5cbiAgICB9KTtcblxuICB9XG59XG5cbi8vIGFsbG93IHVzZXIgdG8gYWNjZXNzIHByZXZpb3VzbHkgZW50ZXJlZCBjb21tYW5kc1xudmFyIGNvbW1hbmRTdGFjayA9IFtdO1xudmFyIGNvbW1hbmRJbmRleCA9IC0xO1xuXG5mdW5jdGlvbiByZW5kZXIodGV4dCwgb3B0aW9ucz17fSkge1xuICBpZiAodHlwZW9mIHRleHQgPT09ICdvYmplY3QnKSB7XG4gICAgdGV4dCA9IEpTT04uc3RyaW5naWZ5KHRleHQsIG51bGwsIDQpO1xuICB9IGVsc2Uge1xuICAgIHRleHQgPSBTdHJpbmcodGV4dCk7XG4gIH1cblxuICAvLyBUaGlzIHBhcnRpY3VsYXIgZXJyIG1lc3NhZ2UgaXMgcG9vci4gTWFrZSBpdCBhIGJpdCBtb3JlIGhlbHBmdWxcbiAgdGV4dCA9IHRleHQucmVwbGFjZShcbiAgICAvVW5leHBlY3RlZCBlbmQgb2YgaW5wdXQvLCBcbiAgICAnVW5leHBlY3RlZCBlbmQgb2YgaW5wdXQ6IHByb2JhYmx5IGFuIGV4dHJhIG9wZW5pbmcgYnJhY2tldCBvciBvcGVyYXRvci4nXG4gICk7XG5cbiAgaWYgKG9wdGlvbnMuYXJyb3cpXG4gICAgdGV4dCA9IGA9PiAke3RleHR9YDtcbiAgaWYgKG9wdGlvbnMuZXJyb3IpXG4gICAgdGV4dCA9IGA8c3BhbiBjbGFzcz1cImVycm9yXCI+JHt0ZXh0fTwvc3Bhbj5gO1xuICBpZiAob3B0aW9ucy5saW5lTnVtKVxuICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UoLyEvLCBgbGluZSAke29wdGlvbnMubGluZU51bX0gLSBgKTtcbiAgJCgnI2NvbnNvbGUgI291dHB1dCcpLmFwcGVuZChgPHA+JHt0ZXh0fTwvcD5gKTtcblxuICAvLyBzY3JvbGwgdG8gYm90dG9tIGluIG9yZGVyIHRvIHNob3cgbW9zdCByZWNlbnRcbiAgdmFyIGNvbnNvbGVET00gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29uc29sZScpO1xuICBjb25zb2xlRE9NLnNjcm9sbFRvcCA9IGNvbnNvbGVET00uc2Nyb2xsSGVpZ2h0O1xufVxuXG5mdW5jdGlvbiByZXBsKGUpIHtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICB2YXIgY29kZSA9ICQoZS50YXJnZXQpLmZpbmQoJ2lucHV0JykudmFsKCk7XG4gIGNvbW1hbmRTdGFjay51bnNoaWZ0KGNvZGUpO1xuICBjb21tYW5kU3RhY2sgPSBjb21tYW5kU3RhY2suc2xpY2UoMCwgOSk7XG4gIGNvbW1hbmRJbmRleCA9IC0xO1xuICB3cmFwTG9nT3V0cHV0KCgpID0+IHtcbiAgICAkKGUudGFyZ2V0KS5maW5kKCdpbnB1dCcpLnZhbCgnJyk7XG5cbiAgICAvL3ZhciBkZWNsYXJhdGlvbnMgZG9uJ3Qgd29yayBpbiB0aGUgUkVQTCwgc28gZ2l2ZSB0aGVtIGFuIGVycm9yXG4gICAgaWYgKGNvZGUubWF0Y2goL3Zhci8pKSByZXR1cm4gcmVuZGVyKCdkbyB2YXIgZGVjbGFyYXRpb25zIGluIHRoZSBlZGl0b3IgYWJvdmUnLCB7IGVycm9yOiB0cnVlIH0pO1xuXG4gICAgdmFyIGV2YWxFcnI7XG4gICAgdmFyIHdyYXBwZWRDb2RlID0gYHRyeXsgJHtjb2RlfVxcbiB9IGNhdGNoKGVycikgeyBldmFsRXJyID0gZXJyIH1gO1xuICAgIHRyeSB7XG4gICAgICB2YXIgb3V0cHV0ID0gZXZhbCh3cmFwcGVkQ29kZSk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBldmFsRXJyID0gZXJyO1xuICAgIH1cbiAgICBpZiAoZXZhbEVycikge1xuICAgICAgcmVuZGVyKGV2YWxFcnIubWVzc2FnZSwgeyBlcnJvcjogdHJ1ZSB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVuZGVyKG91dHB1dCwgeyBhcnJvdzogdHJ1ZSB9KTtcbiAgICB9XG4gIH0pO1xufVxuXG4vLyBleGVjdXRlcyBhIGZ1bmN0aW9uIGluIGEgY29udGV4dCB3aGVyZSBhbGwgY2FsbHMgdG8gY29uc29sZS5sb2cgd2lsbCByZW5kZXIgdG8gdGhlIERPTVxuZnVuY3Rpb24gd3JhcExvZ091dHB1dChmdW5jKSB7XG4gIGNvbnNvbGUubmF0aXZlTG9nID0gY29uc29sZS5sb2c7XG4gIGNvbnNvbGUubG9nID0gZnVuY3Rpb24oKSB7XG4gICAgW10uZm9yRWFjaC5jYWxsKGFyZ3VtZW50cywgbGluZSA9PiB7XG4gICAgICByZW5kZXIobGluZSk7XG4gICAgfSk7XG4gICAgY29uc29sZS5uYXRpdmVMb2coLi4uYXJndW1lbnRzKTtcbiAgfVxuICBmdW5jKCk7XG4gIGNvbnNvbGUubG9nID0gY29uc29sZS5uYXRpdmVMb2c7XG59XG5cblxuXG5cbiIsIndpbmRvdy5vbmxvYWQgPSBmdW5jdGlvbigpIHtcblxuICB3aW5kb3cuZWRpdG9yID0gQ29kZU1pcnJvci5mcm9tVGV4dEFyZWEoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb2RlLWVkaXRvclwiKSwge1xuICAgIGxpbmVOdW1iZXJzOiB0cnVlLFxuICAgIG1vZGU6IFwiamF2YXNjcmlwdFwiLFxuICAgIG1hdGNoQnJhY2tldHM6IHRydWUsXG4gICAgYXV0b0Nsb3NlQnJhY2tldHM6IHRydWUsXG4gICAga2V5TWFwOiAnc3VibGltZScsXG4gICAgdGFiU2l6ZTogMixcbiAgICB0aGVtZTogJ3R0Y24nXG4gIH0pO1xuXG4gIHZhciB3YWl0aW5nO1xuICBlZGl0b3Iub24oXCJjaGFuZ2VcIiwgKCkgPT4ge1xuICAgIGNsZWFyVGltZW91dCh3YWl0aW5nKTtcbiAgICB3YWl0aW5nID0gc2V0VGltZW91dCh1cGRhdGVFcnJvcnMsIDgwMCk7XG4gIH0pO1xuXG4gIHZhciBzYXZlID0gcmVxdWlyZSgnLi9zYXZlJyk7XG4gIHNhdmUoZWRpdG9yKTtcblxufTtcblxudmFyIGVycldpZGdldHMgPSBbXTtcblxuZnVuY3Rpb24gY2hlY2tGb3JFcnJvcnMoKSB7XG4gIHJldHVybiBlcnJXaWRnZXRzO1xufVxuXG5mdW5jdGlvbiByZW5kZXJFcnIobGluZU51bSwgZGVzYywgY29sTnVtKSB7XG4gIGlmICghbGluZU51bSkgdGhyb3cgbmV3IEVycm9yKCdMaW5lIG51bWJlciBmb3IgcmVuZGVyRXJyIG11c3QgYmUgYSB2YWxpZCBpbnRlZ2VyLicpO1xuICB2YXIgbXNnID0gJChgXG4gICAgPGRpdiBjbGFzcz1cImxpbnQtZXJyb3JcIj5cbiAgICAgIDxzcGFuIGNsYXNzPVwibGludC1lcnJvci1pY29uXCI+ITwvc3Bhbj5cbiAgICAgICR7ZGVzY31cbiAgICA8L2Rpdj5cbiAgYClbMF07XG4gIGVycldpZGdldHMucHVzaChcbiAgICBlZGl0b3IuYWRkTGluZVdpZGdldChsaW5lTnVtIC0gMSwgbXNnLCB7IGNvdmVyR3V0dGVyOiBmYWxzZSwgbm9IU2Nyb2xsOiB0cnVlIH0pXG4gICk7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZUVycm9ycygpIHtcbiAgdmFyIGNvZGUgPSBlZGl0b3IuZ2V0VmFsdWUoKTtcblxuICBlcnJXaWRnZXRzLmZvckVhY2goZXJyID0+IHtcbiAgICBlZGl0b3IucmVtb3ZlTGluZVdpZGdldChlcnIpO1xuICB9KTtcbiAgZXJyV2lkZ2V0cyA9IFtdO1xuXG4gIHRyeSB7XG4gICAgdmFyIHN5bnRheCA9IGVzcHJpbWEucGFyc2UoY29kZSwgeyB0b2xlcmFudDogdHJ1ZSwgbG9jOiB0cnVlIH0pO1xuICAgIHZhciBldmFsRXJyO1xuICAgIHZhciB3cmFwcGVkQ29kZSA9IGB0cnl7ICR7Y29kZX1cXG4gfSBjYXRjaChlcnIpIHsgZXZhbEVyciA9IGVyciB9YDtcblxuICAgIGV2YWwod3JhcHBlZENvZGUpO1xuICAgIGlmIChldmFsRXJyKSB7XG4gICAgICB2YXIgc3RhY2sgPSBldmFsRXJyLnN0YWNrO1xuICAgICAgdmFyIGVyck1lc3NhZ2UgPSBldmFsRXJyLm1lc3NhZ2UgfHwgc3RhY2subWF0Y2goLy4qLylbMF07ICAgICAvLyBmaXJlZm94IHx8IGNocm9tZVxuICAgICAgdmFyIGxpbmVOdW0gPSBldmFsRXJyLmxpbmVOdW1iZXIgfHwgc3RhY2subWF0Y2goLzxhbm9ueW1vdXM+OihcXGQrKTpcXGQrLylbMV07XG4gICAgICAvLyB2YXIgY29sTnVtID0gZXZhbEVyci5jb2x1bW5OdW1iZXIgfHwgc3RhY2subWF0Y2goLzxhbm9ueW1vdXM+OlxcZCs6KFxcZCspLylbMF07XG4gICAgICByZW5kZXJFcnIobGluZU51bSwgZXJyTWVzc2FnZSk7XG4gICAgfVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICByZW5kZXJFcnIoZXJyLmxpbmVOdW1iZXIsIGVyci5kZXNjcmlwdGlvbiwgZXJyLmNvbHVtbik7XG4gIH1cblxufVxuXG53aW5kb3cucmVwbGFjZUVkaXRvclRleHQgPSBmdW5jdGlvbih0ZXh0KSB7XG4gIGVkaXRvci5yZXBsYWNlUmFuZ2UoXG4gICAgdGV4dCxcbiAgICBDb2RlTWlycm9yLlBvcyhlZGl0b3IuZmlyc3RMaW5lKCktMSksXG4gICAgQ29kZU1pcnJvci5Qb3MoZWRpdG9yLmxhc3RMaW5lKCkpXG4gICk7XG59XG5cbnZhciBleGVjdXRlID0gcmVxdWlyZSgnLi9leGVjJyk7XG5leGVjdXRlKGNoZWNrRm9yRXJyb3JzKTtcbnJlcXVpcmUoJy4vcmVzaXplJyk7IiwiJChkb2N1bWVudCkucmVhZHkoZSA9PiB7XG5cbiAgdmFyIGVkaXRvckhlaWdodCA9ICQoJyNlZGl0b3Itd3JhcCcpLmNzcygnaGVpZ2h0Jyk7XG4gIHZhciBjb25zb2xlSGVpZ2h0ID0gJCgnI2NvbnNvbGUnKS5jc3MoJ2hlaWdodCcpO1xuXG4gICQoJy5yZXNpemUnKS5kcmFnZ2FibGUoe1xuICAgIGF4aXM6ICd5JyxcbiAgICBkcmFnOiBlID0+IHtcbiAgICAgIHZhciBjaGFuZ2UgPSBlLnRhcmdldC5zdHlsZS50b3A7XG4gICAgICB2YXIgb3BlciA9ICcrLSc7XG4gICAgICBpZiAoY2hhbmdlWzBdID09PSAnLScpIHtcbiAgICAgICAgY2hhbmdlID0gY2hhbmdlLnNsaWNlKDEpO1xuICAgICAgICBvcGVyID0gJy0rJztcbiAgICAgIH1cbiAgICAgICQoJyNlZGl0b3Itd3JhcCcpLmNzcygnaGVpZ2h0JywgYGNhbGMoJHtlZGl0b3JIZWlnaHR9ICR7b3BlclswXX0gJHtjaGFuZ2V9KWApO1xuICAgICAgJCgnI2NvbnNvbGUnKS5jc3MoJ2hlaWdodCcsIGBjYWxjKCR7Y29uc29sZUhlaWdodH0gJHtvcGVyWzFdfSAke2NoYW5nZX0pYCk7XG4gICAgfSxcbiAgICBzdG9wOiBlID0+IHtcbiAgICAgIGVkaXRvckhlaWdodCA9ICQoJyNlZGl0b3Itd3JhcCcpLmNzcygnaGVpZ2h0Jyk7XG4gICAgICBjb25zb2xlSGVpZ2h0ID0gJCgnI2NvbnNvbGUnKS5jc3MoJ2hlaWdodCcpO1xuICAgICAgZS50YXJnZXQuc3R5bGUudG9wID0gMDtcbiAgICAgIGVkaXRvci5yZWZyZXNoKCk7XG4gICAgfVxuICB9KVxufSk7IiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihlZGl0b3IpIHtcblxuICB2YXIgcGF0aCA9IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZTtcblxuICAkKCcjc2F2ZScpLm9uKCdjbGljaycsIGUgPT4ge1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKHBhdGgsIGVkaXRvci5nZXRWYWx1ZSgpKTtcbiAgICBhbGVydCgnUHJvZ3Jlc3Mgc2F2ZWQuJylcbiAgfSk7XG5cbiAgdmFyIHNhdmVkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0ocGF0aCk7XG4gIGlmIChzYXZlZCkge1xuICAgIHJlcGxhY2VFZGl0b3JUZXh0KHNhdmVkKTtcbiAgfVxuXG4gICQoJyNjbGVhcicpLm9uKCdjbGljaycsIGUgPT4ge1xuICAgIGlmIChjb25maXJtKCdBcmUgeW91IHN1cmU/IFRoaXMgd2lsbCByZW1vdmUgc2F2ZWQgcHJvZ3Jlc3MuJykpIHtcbiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKHBhdGgpO1xuICAgICAgcmVwbGFjZUVkaXRvclRleHQoJCgnI2NvZGUtZWRpdG9yJykudmFsKCkpO1xuICAgIH1cbiAgfSk7XG5cbn0iXX0=
