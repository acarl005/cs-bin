(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({"/home/andrew/Desktop/production/codesmith-bin/src/exec.js":[function(require,module,exports){
function render(e){e="object"==typeof e?JSON.stringify(e,null,4):String(e).replace(/Unexpected end of input/,"Unexpected end of input: make sure your brackets match"),$("#console #output").append("<p>"+e+"</p>");var o=document.getElementById("console");o.scrollTop=o.scrollHeight}function repl(e){e.preventDefault();var code=$(e.target).find("input").val();commandStack.unshift(code),commandStack=commandStack.slice(0,9),commandIndex=-1,wrapLogOutput(function(){$(e.target).find("input").val("");var evalErr,wrappedCode="try{ "+code+" } catch(err) { evalErr = err.stack }",output=eval(wrappedCode);if(evalErr){var errMessage=evalErr.match(/.*/)[0];render('<span class="error">'+errMessage+"</span>")}else"object"==typeof output&&(output=JSON.stringify(output)),render("=> "+output)})}function wrapLogOutput(e){console.nativeLog=console.log,console.log=function(){[].forEach.call(arguments,function(e){render(e)}),console.nativeLog.apply(console,arguments)},e(),console.log=console.nativeLog}module.exports=function(hasErrors){function execute(){$("#console #output").empty();var errors=hasErrors();if(errors[0])return render('<span class="error">'+errors[0].node.innerText+"</span>");var code=editor.getValue();wrapLogOutput(function(){eval(code),$("#console form").off("submit"),$("#console form").on("submit",eval("("+String(repl)+")"))})}$(document).ready(function(){$("#console form").on("submit",repl),$("#execute").on("click",execute),$(window).on("keypress",function(e){e.ctrlKey&&e.keyCode&&execute()}),$("#console form").on("keydown",function(e){if(38===e.keyCode)commandIndex++;else{if(40!==e.keyCode)return"we can ignore this";commandIndex--}commandIndex=Math.min(commandStack.length-1,commandIndex),commandIndex=Math.max(-1,commandIndex),$("#console form input").val(commandStack[commandIndex])})})};var commandStack=[],commandIndex=-1;

},{}],"/home/andrew/Desktop/production/codesmith-bin/src/repl.js":[function(require,module,exports){
function checkForErrors(){return errWidgets}function renderErr(r,e,t){var o=$('\n    <div class="lint-error">\n      <span class="lint-error-icon">!</span>\n      '+e+"\n    </div>\n  ")[0];errWidgets.push(editor.addLineWidget(r-1,o,{coverGutter:!1,noHScroll:!0}))}function updateErrors(){var code=editor.getValue();errWidgets.forEach(function(r){editor.removeLineWidget(r)}),errWidgets=[];try{var syntax=esprima.parse(code,{tolerant:!0,loc:!0}),evalErr,wrappedCode="try{ "+code+"\n } catch(err) { evalErr = err.stack }";if(eval(wrappedCode),evalErr){var errMessage=evalErr.match(/.*/)[0],_evalErr$match=evalErr.match(/<anonymous>:(\d+):(\d+)/),_evalErr$match2=_slicedToArray(_evalErr$match,3),__=_evalErr$match2[0],lineNum=_evalErr$match2[1],colNum=_evalErr$match2[2];renderErr(lineNum,errMessage,colNum)}}catch(err){renderErr(err.lineNumber,err.description,err.column)}}var _slicedToArray=function(){function r(r,e){var t=[],o=!0,a=!1,n=void 0;try{for(var i,c=r[Symbol.iterator]();!(o=(i=c.next()).done)&&(t.push(i.value),!e||t.length!==e);o=!0);}catch(d){a=!0,n=d}finally{try{!o&&c["return"]&&c["return"]()}finally{if(a)throw n}}return t}return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return r(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();window.onload=function(){window.editor=CodeMirror.fromTextArea(document.getElementById("code-editor"),{lineNumbers:!0,mode:"javascript",matchBrackets:!0,autoCloseBrackets:!0,keyMap:"sublime",tabSize:2,theme:"ttcn"});var r;editor.on("change",function(){clearTimeout(r),r=setTimeout(updateErrors,800)});var e=require("./save");e(editor)};var errWidgets=[];window.replaceEditorText=function(r){editor.replaceRange(r,CodeMirror.Pos(editor.firstLine()-1),CodeMirror.Pos(editor.lastLine()))};var execute=require("./exec");execute(checkForErrors);

},{"./exec":"/home/andrew/Desktop/production/codesmith-bin/src/exec.js","./save":"/home/andrew/Desktop/production/codesmith-bin/src/save.js"}],"/home/andrew/Desktop/production/codesmith-bin/src/save.js":[function(require,module,exports){
module.exports=function(e){var o=window.location.pathname;$("#save").on("click",function(a){localStorage.setItem(o,e.getValue()),alert("Progress saved.")});var a=localStorage.getItem(o);a&&replaceEditorText(a),$("#clear").on("click",function(e){confirm("Are you sure? This will remove saved progress.")&&(localStorage.removeItem(o),window.location.reload())})};

},{}]},{},["/home/andrew/Desktop/production/codesmith-bin/src/repl.js"])
//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIvaG9tZS9hbmRyZXcvRGVza3RvcC9wcm9kdWN0aW9uL2NvZGVzbWl0aC1iaW4vc3JjL2V4ZWMuanMiLCIvaG9tZS9hbmRyZXcvRGVza3RvcC9wcm9kdWN0aW9uL2NvZGVzbWl0aC1iaW4vc3JjL3JlcGwuanMiLCIvaG9tZS9hbmRyZXcvRGVza3RvcC9wcm9kdWN0aW9uL2NvZGVzbWl0aC1iaW4vc3JjL3NhdmUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQSxBQWtEQSxNQWxETSxDQUFDLENBa0RFLE1BbERLLEVBa0RFLENBbERDLEVBb0RiLEVBRGtCLE1BbkRJLFNBQVMsQ0FtRHRCLENBbkR3QixFQW9EMUIsS0FBSyxVQUFVLEVBQU0sS0FBTSxHQUUzQixPQUFPLEdBQU0sUUFBUSwwQkFBMkIsMERBRXpELEVBQUUsb0JBQW9CLE9BQU0sTUFBTyxFQUFJLE9BQ3ZDLElBQUksR0FBYSxTQUFTLGVBQWUsVUFDekMsR0FBVyxVQUFZLEVBQVcsYUFHcEMsUUFBUyxNQUFLLEdBQ1osRUFBRSxnQkFDRixJQUFJLE1BQU8sRUFBRSxFQUFFLFFBQVEsS0FBSyxTQUFTLEtBQ3JDLGNBQWEsUUFBUSxNQUNyQixhQUFlLGFBQWEsTUFBTSxFQUFHLEdBQ3JDLGFBQWUsR0FDZixjQUFjLFdBQ1osRUFBRSxFQUFFLFFBQVEsS0FBSyxTQUFTLElBQUksR0FDOUIsSUFBSSxTQUNBLFlBQVcsUUFBVyxLQUFJLHdDQUMxQixPQUFTLEtBQUssWUFDbEIsSUFBSSxRQUFTLENBQ1gsR0FBSSxZQUFhLFFBQVEsTUFBTSxNQUFNLEVBQ3JDLFFBQU0sdUJBQXdCLFdBQVUsZUFFbEIsZ0JBQVgsVUFDVCxPQUFTLEtBQUssVUFBVSxTQUMxQixPQUFNLE1BQU8sVUFNbkIsUUFBUyxlQUFjLEdBQ3JCLFFBQVEsVUFBWSxRQUFRLElBQzVCLFFBQVEsSUFBTSxj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QVMsRUFBRSxHQUFDLENBQUMsQ0FBQyxFQUNwQyxVQUFVLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUNsQyxDQUFDO0FERUUsQ0NETCxDQUFBLFFEQ1MsVUFBVSxHQUFHLE9BQU8sQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDeEMsWUFBTSwwQkFBd0IsVUFBVSxhQUFVLENBQUM7QUNBekQsSUFBSSxDRENDLE1BQU0sQUNEQSxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztBREUxQixBQ0ROLE9BQU8sQ0FBQyxFRENFLE9BQU8sS0NESyxDRENDLEFDREEsQ0FBQyxJRENJLFFBQVEsRUFDNUIsTUFBTSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDbEMsWUFBTSxTQUFPLE1BQU0sQ0FBRyxDQUFDO0tBQ3hCO0dBQ0YsQ0FBQyxDQUFDO0NBQ0o7OztBQUdELFNBQVMsYUFBYSxDQUFDLElBQUksRUFBRTtBQUMzQixTQUFPLENBQUMsU0FBUyxHQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUM7QUFDaEMsU0FBTyxDQUFDLEdBQUcsR0FBRyxZQUFXO0FBQ3ZCLE1BQUUsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxVQUFBLElBQUksRUFBSTtBQUNqQyxZQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7S0FDZCxDQUFDLENBQUM7QUFDSCxXQUFPLENBQUMsU0FBUyxNQUFBLENBQWpCLE9BQU8sRUFBYyxTQUFTLENBQUMsQ0FBQztHQUNqQyxDQUFBO0FBQ0QsTUFBSSxFQUFFLENBQUM7QUFDUCxTQUFPLENBQUMsR0FBRyxHQUFHLE9BQU8sQ0FBQyxTQUFTLENBQUM7Q0FDakMiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihoYXNFcnJvcnMpIHtcbiAgJChkb2N1bWVudCkucmVhZHkoKCkgPT4ge1xuXG4gICAgJCgnI2NvbnNvbGUgZm9ybScpLm9uKCdzdWJtaXQnLCByZXBsKTtcbiAgICAkKCcjZXhlY3V0ZScpLm9uKCdjbGljaycsIGV4ZWN1dGUpO1xuICAgICQod2luZG93KS5vbigna2V5cHJlc3MnLCBlID0+IHtcbiAgICAgIGUuY3RybEtleSAmJiBlLmtleUNvZGUgJiYgZXhlY3V0ZSgpOyAgIC8vZXhlY3V0ZSBpZiB0aGV5IHByZXNzIGN0cmwrYlxuICAgIH0pO1xuXG4gICAgJCgnI2NvbnNvbGUgZm9ybScpLm9uKCdrZXlkb3duJywgZSA9PiB7XG4gICAgICBpZiAoZS5rZXlDb2RlID09PSAzOCkgeyAgLy91cCBhcnJvdyBrZXlcbiAgICAgICAgY29tbWFuZEluZGV4Kys7XG4gICAgICB9IGVsc2UgaWYgKGUua2V5Q29kZSA9PT0gNDApIHsgIC8vZG93biBhcnJvdyBrZXlcbiAgICAgICAgY29tbWFuZEluZGV4LS07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gJ3dlIGNhbiBpZ25vcmUgdGhpcyc7XG4gICAgICB9XG4gICAgICAvLyBtYWtlIHN1cmUgY29tbWFuZEluZGV4IHN0YXlzIGluIHJlYXNvbmFibGUgcmFuZ2VcbiAgICAgIGNvbW1hbmRJbmRleCA9IE1hdGgubWluKGNvbW1hbmRTdGFjay5sZW5ndGggLSAxLCBjb21tYW5kSW5kZXgpO1xuICAgICAgY29tbWFuZEluZGV4ID0gTWF0aC5tYXgoLTEsIGNvbW1hbmRJbmRleCk7XG4gICAgICAkKCcjY29uc29sZSBmb3JtIGlucHV0JykudmFsKGNvbW1hbmRTdGFja1tjb21tYW5kSW5kZXhdKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZnVuY3Rpb24gZXhlY3V0ZSgpIHtcbiAgICAkKCcjY29uc29sZSAjb3V0cHV0JykuZW1wdHkoKTtcbiAgICB2YXIgZXJyb3JzID0gaGFzRXJyb3JzKCk7XG5cbiAgICBpZiAoZXJyb3JzWzBdKVxuICAgICAgcmV0dXJuIHJlbmRlcihgPHNwYW4gY2xhc3M9XCJlcnJvclwiPiR7ZXJyb3JzWzBdLm5vZGUuaW5uZXJUZXh0fTwvc3Bhbj5gKTtcblxuICAgIHZhciBjb2RlID0gZWRpdG9yLmdldFZhbHVlKCk7XG5cbiAgICB3cmFwTG9nT3V0cHV0KCgpID0+IHtcblxuICAgICAgZXZhbChjb2RlKTtcblxuICAgICAgJCgnI2NvbnNvbGUgZm9ybScpLm9mZignc3VibWl0Jyk7XG4gICAgICAkKCcjY29uc29sZSBmb3JtJykub24oJ3N1Ym1pdCcsIGV2YWwoJygnK1N0cmluZyhyZXBsKSsnKScpKTtcbiAgICAgIC8vIHRoaXMgZXZhbC9TdHJpbmcgdGhpbmcgaXMgcHJldHR5IHdlaXJkIHJpZ2h0PyBJdCdzIGJhc2ljYWxseSBhIGhhY2sgdGhhdCBSb2IgYW5kIEkgZGV2aXNlZCB0byBcImNsb25lXCIgYSBmdW5jdGlvbi4gSXQgdGFrZXMgYSBmdW5jLCBjb252ZXJ0cyB0byBhIHN0cmluZywgdGhlbiByZWRlZmluZXMgaXQgaW4gYW4gZXZhbC4gVGhpcyBlZmZlY3RpdmVseSBhY2hpZXZlcyBkeW5hbWljIHNjb3BpbmcuIEJ5IHJlZGVmaW5pbmcgaXQgaW4gdGhpcyBzY29wZSwgSSBjYW4gYWNjZXNzIHRoZSBsb2NhbCB2YXJpYWJsZXMgaGVyZSBpbnN0ZWFkIG9mIHRoZSBkZWZhdWx0IGxleGljYWwgc2NvcGluZyBiZWhhdmlvci4gVGhlIHJlYXNvbiBJIHdhbnQgdGhpcyBpcyBzbyB0aGUgcmVwbCBoYXMgYWNjZXNzIHRvIHRoZSB2YXJpYWJsZXMgZGVmaW5lZCBpbiB0aGUgQ29kZU1pcnJvciBlZGl0b3IuXG5cbiAgICB9KTtcblxuICB9XG59XG5cbi8vYWxsb3cgdXNlciB0byBhY2Nlc3MgcHJldmlvdXNseSBlbnRlcmVkIGNvbW1hbmRzXG52YXIgY29tbWFuZFN0YWNrID0gW107XG52YXIgY29tbWFuZEluZGV4ID0gLTE7XG5cbmZ1bmN0aW9uIHJlbmRlcih0ZXh0KSB7XG4gIGlmICh0eXBlb2YgdGV4dCA9PT0gJ29iamVjdCcpIHtcbiAgICB0ZXh0ID0gSlNPTi5zdHJpbmdpZnkodGV4dCwgbnVsbCwgNCk7XG4gIH0gZWxzZSB7XG4gICAgdGV4dCA9IFN0cmluZyh0ZXh0KS5yZXBsYWNlKC9VbmV4cGVjdGVkIGVuZCBvZiBpbnB1dC8sICdVbmV4cGVjdGVkIGVuZCBvZiBpbnB1dDogbWFrZSBzdXJlIHlvdXIgYnJhY2tldHMgbWF0Y2gnKVxuICB9XG4gICQoJyNjb25zb2xlICNvdXRwdXQnKS5hcHBlbmQoYDxwPiR7dGV4dH08L3A+YCk7XG4gIHZhciBjb25zb2xlRE9NID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnNvbGUnKTtcbiAgY29uc29sZURPTS5zY3JvbGxUb3AgPSBjb25zb2xlRE9NLnNjcm9sbEhlaWdodDtcbn1cblxuZnVuY3Rpb24gcmVwbChlKSB7XG4gIGUucHJldmVudERlZmF1bHQoKTtcbiAgdmFyIGNvZGUgPSAkKGUudGFyZ2V0KS5maW5kKCdpbnB1dCcpLnZhbCgpO1xuICBjb21tYW5kU3RhY2sudW5zaGlmdChjb2RlKTtcbiAgY29tbWFuZFN0YWNrID0gY29tbWFuZFN0YWNrLnNsaWNlKDAsIDkpO1xuICBjb21tYW5kSW5kZXggPSAtMTtcbiAgd3JhcExvZ091dHB1dCgoKSA9PiB7XG4gICAgJChlLnRhcmdldCkuZmluZCgnaW5wdXQnKS52YWwoJycpO1xuICAgIHZhciBldmFsRXJyO1xuICAgIHZhciB3cmFwcGVkQ29kZSA9IGB0cnl7ICR7Y29kZX0gfSBjYXRjaChlcnIpIHsgZXZhbEVyciA9IGVyci5zdGFjayB9YDtcbiAgICB2YXIgb3V0cHV0ID0gZXZhbCh3cmFwcGVkQ29kZSk7XG4gICAgaWYgKGV2YWxFcnIpIHtcbiAgICAgIHZhciBlcnJNZXNzYWdlID0gZXZhbEVyci5tYXRjaCgvLiovKVswXTtcbiAgICAgIHJlbmRlcihgPHNwYW4gY2xhc3M9XCJlcnJvclwiPiR7ZXJyTWVzc2FnZX08L3NwYW4+YCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0eXBlb2Ygb3V0cHV0ID09PSAnb2JqZWN0JylcbiAgICAgICAgb3V0cHV0ID0gSlNPTi5zdHJpbmdpZnkob3V0cHV0KTtcbiAgICAgIHJlbmRlcihgPT4gJHtvdXRwdXR9YCk7XG4gICAgfVxuICB9KTtcbn1cblxuLy8gZXhlY3V0ZXMgYSBmdW5jdGlvbiBpbiBhIGNvbnRleHQgd2hlcmUgYWxsIGNhbGxzIHRvIGNvbnNvbGUubG9nIHdpbGwgcmVuZGVyIHRvIHRoZSBET01cbmZ1bmN0aW9uIHdyYXBMb2dPdXRwdXQoZnVuYykge1xuICBjb25zb2xlLm5hdGl2ZUxvZyA9IGNvbnNvbGUubG9nO1xuICBjb25zb2xlLmxvZyA9IGZ1bmN0aW9uKCkge1xuICAgIFtdLmZvckVhY2guY2FsbChhcmd1bWVudHMsIGxpbmUgPT4ge1xuICAgICAgcmVuZGVyKGxpbmUpO1xuICAgIH0pO1xuICAgIGNvbnNvbGUubmF0aXZlTG9nKC4uLmFyZ3VtZW50cyk7XG4gIH1cbiAgZnVuYygpO1xuICBjb25zb2xlLmxvZyA9IGNvbnNvbGUubmF0aXZlTG9nO1xufVxuXG5cblxuXG4iLCJ3aW5kb3cub25sb2FkID0gZnVuY3Rpb24oKSB7XG5cbiAgd2luZG93LmVkaXRvciA9IENvZGVNaXJyb3IuZnJvbVRleHRBcmVhKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29kZS1lZGl0b3JcIiksIHtcbiAgICBsaW5lTnVtYmVyczogdHJ1ZSxcbiAgICBtb2RlOiBcImphdmFzY3JpcHRcIixcbiAgICBtYXRjaEJyYWNrZXRzOiB0cnVlLFxuICAgIGF1dG9DbG9zZUJyYWNrZXRzOiB0cnVlLFxuICAgIGtleU1hcDogJ3N1YmxpbWUnLFxuICAgIHRhYlNpemU6IDIsXG4gICAgdGhlbWU6ICd0dGNuJ1xuICB9KTtcblxuICB2YXIgd2FpdGluZztcbiAgZWRpdG9yLm9uKFwiY2hhbmdlXCIsICgpID0+IHtcbiAgICBjbGVhclRpbWVvdXQod2FpdGluZyk7XG4gICAgd2FpdGluZyA9IHNldFRpbWVvdXQodXBkYXRlRXJyb3JzLCA4MDApO1xuICB9KTtcblxuICB2YXIgc2F2ZSA9IHJlcXVpcmUoJy4vc2F2ZScpO1xuICBzYXZlKGVkaXRvcik7XG5cbn07XG5cbnZhciBlcnJXaWRnZXRzID0gW107XG5cbmZ1bmN0aW9uIGNoZWNrRm9yRXJyb3JzKCkge1xuICByZXR1cm4gZXJyV2lkZ2V0cztcbn1cblxuZnVuY3Rpb24gcmVuZGVyRXJyKGxpbmVOdW0sIGRlc2MsIGNvbE51bSkge1xuICB2YXIgbXNnID0gJChgXG4gICAgPGRpdiBjbGFzcz1cImxpbnQtZXJyb3JcIj5cbiAgICAgIDxzcGFuIGNsYXNzPVwibGludC1lcnJvci1pY29uXCI+ITwvc3Bhbj5cbiAgICAgICR7ZGVzY31cbiAgICA8L2Rpdj5cbiAgYClbMF07XG4gIGVycldpZGdldHMucHVzaChcbiAgICBlZGl0b3IuYWRkTGluZVdpZGdldChsaW5lTnVtIC0gMSwgbXNnLCB7IGNvdmVyR3V0dGVyOiBmYWxzZSwgbm9IU2Nyb2xsOiB0cnVlIH0pXG4gICk7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZUVycm9ycygpIHtcbiAgdmFyIGNvZGUgPSBlZGl0b3IuZ2V0VmFsdWUoKTtcblxuICBlcnJXaWRnZXRzLmZvckVhY2goZXJyID0+IHtcbiAgICBlZGl0b3IucmVtb3ZlTGluZVdpZGdldChlcnIpO1xuICB9KTtcbiAgZXJyV2lkZ2V0cyA9IFtdO1xuXG4gIHRyeSB7XG4gICAgdmFyIHN5bnRheCA9IGVzcHJpbWEucGFyc2UoY29kZSwgeyB0b2xlcmFudDogdHJ1ZSwgbG9jOiB0cnVlIH0pO1xuICAgIHZhciBldmFsRXJyO1xuICAgIHZhciB3cmFwcGVkQ29kZSA9IGB0cnl7ICR7Y29kZX1cXG4gfSBjYXRjaChlcnIpIHsgZXZhbEVyciA9IGVyci5zdGFjayB9YDtcblxuICAgIGV2YWwod3JhcHBlZENvZGUpO1xuICAgIGlmIChldmFsRXJyKSB7XG4gICAgICB2YXIgZXJyTWVzc2FnZSA9IGV2YWxFcnIubWF0Y2goLy4qLylbMF07XG4gICAgICB2YXIgW19fLCBsaW5lTnVtLCBjb2xOdW1dID0gZXZhbEVyci5tYXRjaCgvPGFub255bW91cz46KFxcZCspOihcXGQrKS8pO1xuICAgICAgcmVuZGVyRXJyKGxpbmVOdW0sIGVyck1lc3NhZ2UsIGNvbE51bSk7XG4gICAgfVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICByZW5kZXJFcnIoZXJyLmxpbmVOdW1iZXIsIGVyci5kZXNjcmlwdGlvbiwgZXJyLmNvbHVtbik7XG4gIH1cblxufVxuXG53aW5kb3cucmVwbGFjZUVkaXRvclRleHQgPSBmdW5jdGlvbih0ZXh0KSB7XG4gIGVkaXRvci5yZXBsYWNlUmFuZ2UoXG4gICAgdGV4dCxcbiAgICBDb2RlTWlycm9yLlBvcyhlZGl0b3IuZmlyc3RMaW5lKCktMSksXG4gICAgQ29kZU1pcnJvci5Qb3MoZWRpdG9yLmxhc3RMaW5lKCkpXG4gICk7XG59XG5cbnZhciBleGVjdXRlID0gcmVxdWlyZSgnLi9leGVjJyk7XG5leGVjdXRlKGNoZWNrRm9yRXJyb3JzKTsiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGVkaXRvcikge1xuXG4gIHZhciBwYXRoID0gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lO1xuXG4gICQoJyNzYXZlJykub24oJ2NsaWNrJywgZSA9PiB7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0ocGF0aCwgZWRpdG9yLmdldFZhbHVlKCkpO1xuICAgIGFsZXJ0KCdQcm9ncmVzcyBzYXZlZC4nKVxuICB9KTtcblxuICB2YXIgc2F2ZWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShwYXRoKTtcbiAgaWYgKHNhdmVkKSB7XG4gICAgcmVwbGFjZUVkaXRvclRleHQoc2F2ZWQpO1xuICB9XG5cbiAgJCgnI2NsZWFyJykub24oJ2NsaWNrJywgZSA9PiB7XG4gICAgaWYgKGNvbmZpcm0oJ0FyZSB5b3Ugc3VyZT8gVGhpcyB3aWxsIHJlbW92ZSBzYXZlZCBwcm9ncmVzcy4nKSkge1xuICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0ocGF0aCk7XG4gICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG4gICAgfVxuICB9KTtcblxufSJdfQ==
