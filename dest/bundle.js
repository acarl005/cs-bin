(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({"/home/andrew/Desktop/production/codesmith-bin/src/exec.js":[function(require,module,exports){
function render(e){e=String(e).replace(/Unexpected end of input/,"Unexpected end of input: make sure your brackets match"),$("#console #output").append("<p>"+e+"</p>");var o=document.getElementById("console");o.scrollTop=o.scrollHeight}function repl(e){e.preventDefault();var code=$(e.target).find("input").val();commandStack.unshift(code),commandStack=commandStack.slice(0,9),commandIndex=-1,wrapLogOutput(function(){$(e.target).find("input").val("");var evalErr,wrappedCode="try{ "+code+" } catch(err) { evalErr = err.stack }",output=eval(wrappedCode);if(evalErr){var errMessage=evalErr.match(/.*/)[0];render('<span class="error">'+errMessage+"</span>")}else render("=> "+output)})}function wrapLogOutput(e){console.nativeLog=console.log,console.log=function(){[].forEach.call(arguments,function(e){render(e)}),console.nativeLog.apply(console,arguments)},e(),console.log=console.nativeLog}module.exports=function(hasErrors){function execute(){$("#console #output").empty();var errors=hasErrors();if(errors[0])return render('<span class="error">'+errors[0].node.innerText+"</span>");var code=editor.getValue();wrapLogOutput(function(){eval(code),$("#console form").off("submit"),$("#console form").on("submit",eval("("+String(repl)+")"))})}$(document).ready(function(){$("#console form").on("submit",repl),$("#execute").on("click",execute),$(window).on("keypress",function(e){e.ctrlKey&&e.keyCode&&execute()}),$("#console form").on("keydown",function(e){if(38===e.keyCode)commandIndex++;else{if(40!==e.keyCode)return"we can ignore this";commandIndex--}commandIndex=Math.min(commandStack.length-1,commandIndex),commandIndex=Math.max(-1,commandIndex),$("#console form input").val(commandStack[commandIndex])})})};var commandStack=[],commandIndex=-1;

},{}],"/home/andrew/Desktop/production/codesmith-bin/src/repl.js":[function(require,module,exports){
function checkForErrors(){return errWidgets}function renderErr(r,e,t){var a=$('<div class="lint-error"><span class="lint-error-icon">!</span>'+e+"</div>")[0];errWidgets.push(editor.addLineWidget(r-1,a,{coverGutter:!1,noHScroll:!0}))}function updateErrors(){var code=editor.getValue();errWidgets.forEach(function(r){editor.removeLineWidget(r)}),errWidgets=[];try{var syntax=esprima.parse(code,{tolerant:!0,loc:!0}),evalErr,wrappedCode="try{ "+code+" } catch(err) { evalErr = err.stack }";if(eval(wrappedCode),evalErr){var errMessage=evalErr.match(/.*/)[0],_evalErr$match=evalErr.match(/<anonymous>:(\d+):(\d+)/),_evalErr$match2=_slicedToArray(_evalErr$match,3),__=_evalErr$match2[0],lineNum=_evalErr$match2[1],colNum=_evalErr$match2[2];renderErr(lineNum,errMessage,colNum)}}catch(err){renderErr(err.lineNumber,err.description,err.column)}}var _slicedToArray=function(){function r(r,e){var t=[],a=!0,o=!1,n=void 0;try{for(var i,c=r[Symbol.iterator]();!(a=(i=c.next()).done)&&(t.push(i.value),!e||t.length!==e);a=!0);}catch(d){o=!0,n=d}finally{try{!a&&c["return"]&&c["return"]()}finally{if(o)throw n}}return t}return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return r(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();window.onload=function(){window.editor=CodeMirror.fromTextArea(document.getElementById("code-editor"),{lineNumbers:!0,mode:"javascript",matchBrackets:!0,autoCloseBrackets:!0,keyMap:"sublime",tabSize:2,theme:"ttcn"});var r;editor.on("change",function(){clearTimeout(r),r=setTimeout(updateErrors,800)});var e=require("./save");e(editor)};var errWidgets=[],execute=require("./exec");execute(checkForErrors);

},{"./exec":"/home/andrew/Desktop/production/codesmith-bin/src/exec.js","./save":"/home/andrew/Desktop/production/codesmith-bin/src/save.js"}],"/home/andrew/Desktop/production/codesmith-bin/src/save.js":[function(require,module,exports){
module.exports=function(e){var o=window.location.pathname;$("#save").on("click",function(r){localStorage.setItem(o,e.getValue()),alert("Progress saved.")});var r=localStorage.getItem(o);r&&e.replaceRange(r,CodeMirror.Pos(e.firstLine()-1),CodeMirror.Pos(e.lastLine())),$("#clear").on("click",function(e){confirm("Are you sure? This will remove saved progress.")&&(localStorage.removeItem(o),window.location.reload())})};

},{}]},{},["/home/andrew/Desktop/production/codesmith-bin/src/repl.js"])
//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIvaG9tZS9hbmRyZXcvRGVza3RvcC9wcm9kdWN0aW9uL2NvZGVzbWl0aC1iaW4vc3JjL2V4ZWMuanMiLCIvaG9tZS9hbmRyZXcvRGVza3RvcC9wcm9kdWN0aW9uL2NvZGVzbWl0aC1iaW4vc3JjL3JlcGwuanMiLCIvaG9tZS9hbmRyZXcvRGVza3RvcC9wcm9kdWN0aW9uL2NvZGVzbWl0aC1iaW4vc3JjL3NhdmUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQSxBQWlEQSxNQWpETSxDQUFDLENBaURFLE1BakRLLEVBaURFLENBakRDLEVBa0RmLEVBQU8sTUFsRGlCLENBa0RWLEdBQU0sS0FsRGEsRUFBRSxDQWtEUCwwQkFBMkIsMERBQ3ZELEVBQUUsb0JBQW9CLE9BQU0sTUFBTyxFQUFJLE9BQ3ZDLElBQUksR0FBVSxTQUFTLGVBQWUsVUFDdEMsR0FBUSxVQUFZLEVBQVEsYUFHOUIsUUFBUyxNQUFLLEdBQ1osRUFBRSxnQkFDRixJQUFJLE1BQU8sRUFBRSxFQUFFLFFBQVEsS0FBSyxTQUFTLEtBQ3JDLGNBQWEsUUFBUSxNQUNyQixhQUFlLGFBQWEsTUFBTSxFQUFHLEdBQ3JDLGFBQWUsR0FDZixjQUFjLFdBQ1osRUFBRSxFQUFFLFFBQVEsS0FBSyxTQUFTLElBQUksR0FDOUIsSUFBSSxTQUNBLFlBQVcsUUFBVyxLQUFJLHdDQUMxQixPQUFTLEtBQUssWUFDbEIsSUFBSSxRQUFTLENBQ1gsR0FBSSxZQUFhLFFBQVEsTUFBTSxNQUFNLEVBQ3JDLFFBQU0sdUJBQXdCLFdBQVUsZUFFeEMsUUFBTSxNQUFPLFVBTW5CLFFBQVMsZUFBYyxHQUNyQixRQUFRLFVBQVksUUFBUSxJQUM1QixRQUFRLElBQU0sY0FDVCxRQUFRLEtBQUssVUFBVyxTQUFBLEdBQ3pCLE9BQU8sS0FFVCxRQUFRLFVBQVMsTUFBakIsUUFBcUIsWUFFdkIsSUFD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Y0FBYyxDQUFDLENBQUM7R0RXckIsQ0FBQyxDQUFDO0NBQ0o7OztBQUdELFNBQVMsYUFBYSxDQUFDLElBQUksRUFBRTtBQUMzQixTQUFPLENBQUMsU0FBUyxHQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUM7QUFDaEMsU0FBTyxDQUFDLEdBQUcsR0FBRyxZQUFXO0FBQ3ZCLE1BQUUsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxVQUFBLElBQUksRUFBSTtBQUNqQyxZQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7S0FDZCxDQUFDLENBQUM7QUFDSCxXQUFPLENBQUMsU0FBUyxNQUFBLENBQWpCLE9BQU8sRUFBYyxTQUFTLENBQUMsQ0FBQztHQUNqQyxDQUFBO0FBQ0QsTUFBSSxFQUFFLENBQUM7QUFDUCxTQUFPLENBQUMsR0FBRyxHQUFHLE9BQU8sQ0FBQyxTQUFTLENBQUM7Q0FDakMiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihoYXNFcnJvcnMpIHtcbiAgJChkb2N1bWVudCkucmVhZHkoKCkgPT4ge1xuXG4gICAgJCgnI2NvbnNvbGUgZm9ybScpLm9uKCdzdWJtaXQnLCByZXBsKTtcbiAgICAkKCcjZXhlY3V0ZScpLm9uKCdjbGljaycsIGV4ZWN1dGUpO1xuICAgICQod2luZG93KS5vbigna2V5cHJlc3MnLCBlID0+IHtcbiAgICAgIGUuY3RybEtleSAmJiBlLmtleUNvZGUgJiYgZXhlY3V0ZSgpOyAgIC8vZXhlY3V0ZSBpZiB0aGV5IHByZXNzIGN0cmwrYlxuICAgIH0pO1xuXG4gICAgJCgnI2NvbnNvbGUgZm9ybScpLm9uKCdrZXlkb3duJywgZSA9PiB7XG4gICAgICBpZiAoZS5rZXlDb2RlID09PSAzOCkgeyAgLy91cCBhcnJvdyBrZXlcbiAgICAgICAgY29tbWFuZEluZGV4Kys7XG4gICAgICB9IGVsc2UgaWYgKGUua2V5Q29kZSA9PT0gNDApIHsgIC8vZG93biBhcnJvdyBrZXlcbiAgICAgICAgY29tbWFuZEluZGV4LS07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gJ3dlIGNhbiBpZ25vcmUgdGhpcyc7XG4gICAgICB9XG4gICAgICAvLyBtYWtlIHN1cmUgY29tbWFuZEluZGV4IHN0YXlzIGluIHJlYXNvbmFibGUgcmFuZ2VcbiAgICAgIGNvbW1hbmRJbmRleCA9IE1hdGgubWluKGNvbW1hbmRTdGFjay5sZW5ndGggLSAxLCBjb21tYW5kSW5kZXgpO1xuICAgICAgY29tbWFuZEluZGV4ID0gTWF0aC5tYXgoLTEsIGNvbW1hbmRJbmRleCk7XG4gICAgICAkKCcjY29uc29sZSBmb3JtIGlucHV0JykudmFsKGNvbW1hbmRTdGFja1tjb21tYW5kSW5kZXhdKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZnVuY3Rpb24gZXhlY3V0ZSgpIHtcbiAgICAkKCcjY29uc29sZSAjb3V0cHV0JykuZW1wdHkoKTtcbiAgICB2YXIgZXJyb3JzID0gaGFzRXJyb3JzKCk7XG4gICAgaWYgKGVycm9yc1swXSlcbiAgICAgIHJldHVybiByZW5kZXIoYDxzcGFuIGNsYXNzPVwiZXJyb3JcIj4ke2Vycm9yc1swXS5ub2RlLmlubmVyVGV4dH08L3NwYW4+YCk7XG5cbiAgICB2YXIgY29kZSA9IGVkaXRvci5nZXRWYWx1ZSgpO1xuXG4gICAgd3JhcExvZ091dHB1dCgoKSA9PiB7XG5cbiAgICAgIGV2YWwoY29kZSk7XG5cbiAgICAgICQoJyNjb25zb2xlIGZvcm0nKS5vZmYoJ3N1Ym1pdCcpO1xuICAgICAgJCgnI2NvbnNvbGUgZm9ybScpLm9uKCdzdWJtaXQnLCBldmFsKCcoJytTdHJpbmcocmVwbCkrJyknKSk7XG4gICAgICAvLyB0aGlzIGV2YWwvU3RyaW5nIHRoaW5nIGlzIHByZXR0eSB3ZWlyZCByaWdodD8gSXQncyBiYXNpY2FsbHkgYSBoYWNrIHRoYXQgUm9iIGFuZCBJIGRldmlzZWQgdG8gXCJjbG9uZVwiIGEgZnVuY3Rpb24uIEl0IHRha2VzIGEgZnVuYywgY29udmVydHMgdG8gYSBzdHJpbmcsIHRoZW4gcmVkZWZpbmVzIGl0IGluIGFuIGV2YWwuIFRoaXMgZWZmZWN0aXZlbHkgYWNoaWV2ZXMgZHluYW1pYyBzY29waW5nLiBCeSByZWRlZmluaW5nIGl0IGluIHRoaXMgc2NvcGUsIEkgY2FuIGFjY2VzcyB0aGUgbG9jYWwgdmFyaWFibGVzIGhlcmUgaW5zdGVhZCBvZiB0aGUgZGVmYXVsdCBsZXhpY2FsIHNjb3BpbmcgYmVoYXZpb3IuIFRoZSByZWFzb24gSSB3YW50IHRoaXMgaXMgc28gdGhlIHJlcGwgaGFzIGFjY2VzcyB0byB0aGUgdmFyaWFibGVzIGRlZmluZWQgaW4gdGhlIENvZGVNaXJyb3IgZWRpdG9yLlxuXG4gICAgfSk7XG5cbiAgfVxufVxuXG4vL2FsbG93IHVzZXIgdG8gYWNjZXNzIHByZXZpb3VzbHkgZW50ZXJlZCBjb21tYW5kc1xudmFyIGNvbW1hbmRTdGFjayA9IFtdO1xudmFyIGNvbW1hbmRJbmRleCA9IC0xO1xuXG5mdW5jdGlvbiByZW5kZXIodGV4dCkge1xuICB0ZXh0ID0gU3RyaW5nKHRleHQpLnJlcGxhY2UoL1VuZXhwZWN0ZWQgZW5kIG9mIGlucHV0LywgJ1VuZXhwZWN0ZWQgZW5kIG9mIGlucHV0OiBtYWtlIHN1cmUgeW91ciBicmFja2V0cyBtYXRjaCcpXG4gICQoJyNjb25zb2xlICNvdXRwdXQnKS5hcHBlbmQoYDxwPiR7dGV4dH08L3A+YCk7XG4gIHZhciBjb25zb2xlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnNvbGUnKTtcbiAgY29uc29sZS5zY3JvbGxUb3AgPSBjb25zb2xlLnNjcm9sbEhlaWdodDtcbn1cblxuZnVuY3Rpb24gcmVwbChlKSB7XG4gIGUucHJldmVudERlZmF1bHQoKTtcbiAgdmFyIGNvZGUgPSAkKGUudGFyZ2V0KS5maW5kKCdpbnB1dCcpLnZhbCgpO1xuICBjb21tYW5kU3RhY2sudW5zaGlmdChjb2RlKTtcbiAgY29tbWFuZFN0YWNrID0gY29tbWFuZFN0YWNrLnNsaWNlKDAsIDkpO1xuICBjb21tYW5kSW5kZXggPSAtMTtcbiAgd3JhcExvZ091dHB1dCgoKSA9PiB7XG4gICAgJChlLnRhcmdldCkuZmluZCgnaW5wdXQnKS52YWwoJycpO1xuICAgIHZhciBldmFsRXJyO1xuICAgIHZhciB3cmFwcGVkQ29kZSA9IGB0cnl7ICR7Y29kZX0gfSBjYXRjaChlcnIpIHsgZXZhbEVyciA9IGVyci5zdGFjayB9YDtcbiAgICB2YXIgb3V0cHV0ID0gZXZhbCh3cmFwcGVkQ29kZSk7XG4gICAgaWYgKGV2YWxFcnIpIHtcbiAgICAgIHZhciBlcnJNZXNzYWdlID0gZXZhbEVyci5tYXRjaCgvLiovKVswXTtcbiAgICAgIHJlbmRlcihgPHNwYW4gY2xhc3M9XCJlcnJvclwiPiR7ZXJyTWVzc2FnZX08L3NwYW4+YCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlbmRlcihgPT4gJHtvdXRwdXR9YCk7XG4gICAgfVxuICB9KTtcbn1cblxuLy8gZXhlY3V0ZXMgYSBmdW5jdGlvbiBpbiBhIGNvbnRleHQgd2hlcmUgYWxsIGNhbGxzIHRvIGNvbnNvbGUubG9nIHdpbGwgcmVuZGVyIHRvIHRoZSBET01cbmZ1bmN0aW9uIHdyYXBMb2dPdXRwdXQoZnVuYykge1xuICBjb25zb2xlLm5hdGl2ZUxvZyA9IGNvbnNvbGUubG9nO1xuICBjb25zb2xlLmxvZyA9IGZ1bmN0aW9uKCkge1xuICAgIFtdLmZvckVhY2guY2FsbChhcmd1bWVudHMsIGxpbmUgPT4ge1xuICAgICAgcmVuZGVyKGxpbmUpO1xuICAgIH0pO1xuICAgIGNvbnNvbGUubmF0aXZlTG9nKC4uLmFyZ3VtZW50cyk7XG4gIH1cbiAgZnVuYygpO1xuICBjb25zb2xlLmxvZyA9IGNvbnNvbGUubmF0aXZlTG9nO1xufVxuXG5cblxuXG4iLCJ3aW5kb3cub25sb2FkID0gZnVuY3Rpb24oKSB7XG5cbiAgd2luZG93LmVkaXRvciA9IENvZGVNaXJyb3IuZnJvbVRleHRBcmVhKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29kZS1lZGl0b3JcIiksIHtcbiAgICBsaW5lTnVtYmVyczogdHJ1ZSxcbiAgICBtb2RlOiBcImphdmFzY3JpcHRcIixcbiAgICBtYXRjaEJyYWNrZXRzOiB0cnVlLFxuICAgIGF1dG9DbG9zZUJyYWNrZXRzOiB0cnVlLFxuICAgIGtleU1hcDogJ3N1YmxpbWUnLFxuICAgIHRhYlNpemU6IDIsXG4gICAgdGhlbWU6ICd0dGNuJ1xuICB9KTtcblxuICB2YXIgd2FpdGluZztcbiAgZWRpdG9yLm9uKFwiY2hhbmdlXCIsICgpID0+IHtcbiAgICBjbGVhclRpbWVvdXQod2FpdGluZyk7XG4gICAgd2FpdGluZyA9IHNldFRpbWVvdXQodXBkYXRlRXJyb3JzLCA4MDApO1xuICB9KTtcblxuICB2YXIgc2F2ZSA9IHJlcXVpcmUoJy4vc2F2ZScpO1xuICBzYXZlKGVkaXRvcik7XG5cbn07XG5cbnZhciBlcnJXaWRnZXRzID0gW107XG5cbmZ1bmN0aW9uIGNoZWNrRm9yRXJyb3JzKCkge1xuICByZXR1cm4gZXJyV2lkZ2V0cztcbn1cblxuZnVuY3Rpb24gcmVuZGVyRXJyKGxpbmVOdW0sIGRlc2MsIGNvbE51bSkge1xuICB2YXIgbXNnID0gJChgPGRpdiBjbGFzcz1cImxpbnQtZXJyb3JcIj48c3BhbiBjbGFzcz1cImxpbnQtZXJyb3ItaWNvblwiPiE8L3NwYW4+JHtkZXNjfTwvZGl2PmApWzBdO1xuICBlcnJXaWRnZXRzLnB1c2goXG4gICAgZWRpdG9yLmFkZExpbmVXaWRnZXQobGluZU51bSAtIDEsIG1zZywgeyBjb3Zlckd1dHRlcjogZmFsc2UsIG5vSFNjcm9sbDogdHJ1ZSB9KVxuICApO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVFcnJvcnMoKSB7XG4gIHZhciBjb2RlID0gZWRpdG9yLmdldFZhbHVlKCk7XG5cbiAgZXJyV2lkZ2V0cy5mb3JFYWNoKGVyciA9PiB7XG4gICAgZWRpdG9yLnJlbW92ZUxpbmVXaWRnZXQoZXJyKTtcbiAgfSk7XG4gIGVycldpZGdldHMgPSBbXTtcblxuICB0cnkge1xuICAgIHZhciBzeW50YXggPSBlc3ByaW1hLnBhcnNlKGNvZGUsIHsgdG9sZXJhbnQ6IHRydWUsIGxvYzogdHJ1ZSB9KTtcblxuICAgIHZhciBldmFsRXJyO1xuICAgIHZhciB3cmFwcGVkQ29kZSA9IGB0cnl7ICR7Y29kZX0gfSBjYXRjaChlcnIpIHsgZXZhbEVyciA9IGVyci5zdGFjayB9YDtcbiAgICBldmFsKHdyYXBwZWRDb2RlKTtcbiAgICBpZiAoZXZhbEVycikge1xuICAgICAgdmFyIGVyck1lc3NhZ2UgPSBldmFsRXJyLm1hdGNoKC8uKi8pWzBdO1xuICAgICAgdmFyIFtfXywgbGluZU51bSwgY29sTnVtXSA9IGV2YWxFcnIubWF0Y2goLzxhbm9ueW1vdXM+OihcXGQrKTooXFxkKykvKTtcbiAgICAgIHJlbmRlckVycihsaW5lTnVtLCBlcnJNZXNzYWdlLCBjb2xOdW0pO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgcmVuZGVyRXJyKGVyci5saW5lTnVtYmVyLCBlcnIuZGVzY3JpcHRpb24sIGVyci5jb2x1bW4pO1xuICB9XG5cbn1cblxudmFyIGV4ZWN1dGUgPSByZXF1aXJlKCcuL2V4ZWMnKTtcbmV4ZWN1dGUoY2hlY2tGb3JFcnJvcnMpOyIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZWRpdG9yKSB7XG5cbiAgdmFyIHBhdGggPSB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWU7XG5cbiAgJCgnI3NhdmUnKS5vbignY2xpY2snLCBlID0+IHtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShwYXRoLCBlZGl0b3IuZ2V0VmFsdWUoKSk7XG4gICAgYWxlcnQoJ1Byb2dyZXNzIHNhdmVkLicpXG4gIH0pO1xuXG4gIHZhciBzYXZlZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKHBhdGgpO1xuICBpZiAoc2F2ZWQpIHtcbiAgICBlZGl0b3IucmVwbGFjZVJhbmdlKFxuICAgICAgc2F2ZWQsXG4gICAgICBDb2RlTWlycm9yLlBvcyhlZGl0b3IuZmlyc3RMaW5lKCktMSksXG4gICAgICBDb2RlTWlycm9yLlBvcyhlZGl0b3IubGFzdExpbmUoKSlcbiAgICApO1xuICB9XG5cbiAgJCgnI2NsZWFyJykub24oJ2NsaWNrJywgZSA9PiB7XG4gICAgaWYgKGNvbmZpcm0oJ0FyZSB5b3Ugc3VyZT8gVGhpcyB3aWxsIHJlbW92ZSBzYXZlZCBwcm9ncmVzcy4nKSkge1xuICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0ocGF0aCk7XG4gICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG4gICAgfVxuICB9KTtcblxufSJdfQ==
