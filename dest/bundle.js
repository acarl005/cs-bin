(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({"/home/andy/Desktop/production/cs-bin/src/exec.js":[function(require,module,exports){
function render(e){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];e="object"==typeof e?JSON.stringify(e,null,4):String(e),e=e.replace(/Unexpected end of input/,"Unexpected end of input: probably an extra opening bracket or operator."),r.arrow&&(e="=> "+e),r.error&&(e='<span class="error">'+e+"</span>"),r.lineNum&&(e=e.replace(/!/,"line "+r.lineNum+" - ")),$("#console #output").append("<p>"+e+"</p>");var o=document.getElementById("console");o.scrollTop=o.scrollHeight}function repl(e){e.preventDefault();var code=$(e.target).find("input").val();commandStack.unshift(code),commandStack=commandStack.slice(0,9),commandIndex=-1,wrapLogOutput(function(){if($(e.target).find("input").val(""),code.match(/var/))return render("do var declarations in the editor above",{error:!0});var evalErr,wrappedCode="try{ "+code+"\n } catch(err) { evalErr = err }";try{var output=eval(wrappedCode)}catch(err){evalErr=err}evalErr?render(evalErr.message,{error:!0}):render(output,{arrow:!0})})}function wrapLogOutput(e){console.nativeLog=console.log,console.log=function(){[].forEach.call(arguments,function(e){render(e)}),console.nativeLog.apply(console,arguments)},e(),console.log=console.nativeLog}module.exports=function(hasErrors){function execute(){$("#console #output").empty();var errors=hasErrors(),error=errors[0];if(error)return render(error.node.innerText||$(error.node).text(),{error:!0,lineNum:editor.getLineNumber(error.line)+1});var code=editor.getValue();wrapLogOutput(function(){eval(code),$("#console form").off("submit"),$("#console form").on("submit",eval("("+String(repl)+")"))})}$(document).ready(function(){$("#console form").on("submit",repl),$("#execute").on("click",execute),$(window).on("keypress",function(e){e.ctrlKey&&e.keyCode&&execute()}),$("#console form").on("keydown",function(e){if(38===e.keyCode)commandIndex++;else{if(40!==e.keyCode)return"we can ignore this";commandIndex--}commandIndex=Math.min(commandStack.length-1,commandIndex),commandIndex=Math.max(-1,commandIndex),$("#console form input").val(commandStack[commandIndex])})})};var commandStack=[],commandIndex=-1;

},{}],"/home/andy/Desktop/production/cs-bin/src/repl.js":[function(require,module,exports){
function checkForErrors(){return errWidgets}function renderErr(r,e,t){if(!r)throw new Error("Line number for renderErr must be a valid integer.");var o=$('\n    <div class="lint-error">\n      <span class="lint-error-icon">!</span>\n      '+e+"\n    </div>\n  ")[0];errWidgets.push(editor.addLineWidget(r-1,o,{coverGutter:!1,noHScroll:!0}))}function updateErrors(){var code=editor.getValue();errWidgets.forEach(function(r){editor.removeLineWidget(r)}),errWidgets=[];try{var syntax=esprima.parse(code,{tolerant:!0,loc:!0}),evalErr,wrappedCode="try{ "+code+"\n } catch(err) { evalErr = err }";if(eval(wrappedCode),evalErr){var stack=evalErr.stack,errMessage=evalErr.message||stack.match(/.*/)[0],lineNum=evalErr.lineNumber||stack.match(/<anonymous>:(\d+):\d+/)[1];renderErr(lineNum,errMessage)}}catch(err){renderErr(err.lineNumber,err.description,err.column)}}window.onload=function(){window.editor=CodeMirror.fromTextArea(document.getElementById("code-editor"),{lineNumbers:!0,mode:"javascript",matchBrackets:!0,autoCloseBrackets:!0,keyMap:"sublime",tabSize:2,theme:"ttcn"});var r;editor.on("change",function(){clearTimeout(r),r=setTimeout(updateErrors,800)});var e=require("./save");e(editor)};var errWidgets=[];window.replaceEditorText=function(r){editor.replaceRange(r,CodeMirror.Pos(editor.firstLine()-1),CodeMirror.Pos(editor.lastLine()))};var execute=require("./exec");execute(checkForErrors),require("./resize");

},{"./exec":"/home/andy/Desktop/production/cs-bin/src/exec.js","./resize":"/home/andy/Desktop/production/cs-bin/src/resize.js","./save":"/home/andy/Desktop/production/cs-bin/src/save.js"}],"/home/andy/Desktop/production/cs-bin/src/resize.js":[function(require,module,exports){
function pxToNum(e){return+e.slice(0,-2)}$(document).ready(function(e){var t=$("#editor-wrap").css("height"),s=$("#console").css("height");$(".resize").draggable({axis:"y",drag:function(e){var i=e.target.style.top;if(!(pxToNum(i)+pxToNum(t)>window.innerHeight-50)){var o="+-";"-"===i[0]&&(i=i.slice(1),o="-+"),$("#editor-wrap").css("height","calc("+t+" "+o[0]+" "+i+")"),$("#console").css("height","calc("+s+" "+o[1]+" "+i+")")}},stop:function(e){t=$("#editor-wrap").css("height"),s=$("#console").css("height"),e.target.style.top=0,editor.refresh()}})});

},{}],"/home/andy/Desktop/production/cs-bin/src/save.js":[function(require,module,exports){
module.exports=function(e){var o=window.location.pathname;$("#save").on("click",function(r){localStorage.setItem(o,e.getValue()),alert("Progress saved.")});var r=localStorage.getItem(o);r&&replaceEditorText(r),$("#clear").on("click",function(e){confirm("Are you sure? This will remove saved progress.")&&(localStorage.removeItem(o),replaceEditorText($("#code-editor").val()))})};

},{}]},{},["/home/andy/Desktop/production/cs-bin/src/repl.js"])
//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIvaG9tZS9hbmR5L0Rlc2t0b3AvcHJvZHVjdGlvbi9jcy1iaW4vc3JjL2V4ZWMuanMiLCIvaG9tZS9hbmR5L0Rlc2t0b3AvcHJvZHVjdGlvbi9jcy1iaW4vc3JjL3JlcGwuanMiLCIvaG9tZS9hbmR5L0Rlc2t0b3AvcHJvZHVjdGlvbi9jcy1iaW4vc3JjL3Jlc2l6ZS5qcyIsIi9ob21lL2FuZHkvRGVza3RvcC9wcm9kdWN0aW9uL2NzLWJpbi9zcmMvc2F2ZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBLEFBc0RBLE1BdERNLENBQUMsQ0FzREUsTUF0REssRUFzREUsQ0F0REMsS0FzREssR0FBTyxFQXRESCxRQXNERyxDQXRETSxFQUFFLEtBc0RSLEdBQUEsU0FBQSxVQUFBLE1BQUcsVUFBQSxFQUU1QixHQURrQixnQkFBVCxHQUNGLEtBQUssVUFBVSxFQUFNLEtBQU0sR0FFM0IsT0FBTyxHQUloQixFQUFPLEVBQUssUUFDViwwQkFDQSwyRUFHRSxFQUFRLFFBQ1YsRUFBSSxNQUFTLEdBQ1gsRUFBUSxRQUNWLEVBQUksdUJBQTBCLEVBQUksV0FDaEMsRUFBUSxVQUNWLEVBQU8sRUFBSyxRQUFRLElBQUcsUUFBVSxFQUFRLFFBQU8sUUFDbEQsRUFBRSxvQkFBb0IsT0FBTSxNQUFPLEVBQUksT0FHdkMsSUFBSSxHQUFhLFNBQVMsZUFBZSxVQUN6QyxHQUFXLFVBQVksRUFBVyxhQUdwQyxRQUFTLE1BQUssR0FDWixFQUFFLGdCQUNGLElBQUksTUFBTyxFQUFFLEVBQUUsUUFBUSxLQUFLLFNBQVMsS0FDckMsY0FBYSxRQUFRLE1BQ3JCLGFBQWUsYUFBYSxNQUFNLEVBQUcsR0FDckMsYUFBZSxHQUNmLGNBQWMsV0FJWixHQUhBLEVBQUUsRUFBRSxRQUFRLEtBQUssU0FBUyxJQUFJLElBRzFCLEtBQUssTUFBTSxPQUFRLE1BQU8s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Q0hBLFFBQUksQ0RHQyxDQ0hDLENER0MsRUNIRSxJREdJLEdERUcsRUFBRSxDQUFDO0FFSm5CLEFDSEYsR0ZNQyxBRU5BLENGTUMsQUVOQSxDRk1DLEVERUUsQ0VMQyxFQUFFLENDSEMsQ0FBQyxDSFFDLEFHUkEsRUFBRSxDQUFDLENIUUMsQ0FBQyxDQUFDLElHUkksQ0RHYixDQUFDLEFDSGMsQ0hRQyxDRUxYLElGS2dCLEVBQUUsRUFBRSxBR1JWLENBQUMsRUFBSTtBREl4QixBQ0hGLFVER00sTUFBTSxBQ0hBLENBQUMsRURHRSxDQUFDLENBQUMsR0NIRyxDQUFDLEVER0UsQ0FBQyxDQ0hDLEVBQUUsRURHRSxDQUFDLEdBQUcsQUNIQSxDREdDLEFDSEEsUUFBUSxFQUFFLENBQUMsQ0FBQztBSFExQyxBQ0ROLEFFTkUsTUZNRSxHRU5HLENBQUMsR0ZNRyxDQUFDLE1EQ00sRUFBRSxDQUFDLElHUEksQ0FBQyxDQUFBO0FGTzFCLEFDSEksR0NISCxDQUFDLENBQUMsRUhPRSxDQ0RDLENBQUMsQ0NGRCxDREVHLENBQUMsQ0RDQyxJRUhFLENBQUMsRURFSSxFQUFFLEVDRkEsQ0FBQyxHQUFHLE1ERUUsQ0NGSyxDQUFDLFlBQVksQ0FBQyxHQUN2QyxNQUFNLENBQUMsV0FBVyxHQUFHLEVBQUUsRUFDdkIsT0FBTztBRkVQLEFDREosZURDVyxDQ0RDLENBQUMsT0FBTyxDQUFDLENBQUMsU0RDUyxDQUFDO0FDQWhDLEFDQUUsQUNOSixNQUFJLENIT0MsR0VERyxDREFDLEFFTkEsR0ZNRyxBQ0FBLEFDTkEsR0RNRyxJQUFJLENBQUMsRURBRSxDQUFDLENFTkMsQ0FBQyxPQUFPLENBQUMsRUZNRSxFQUFFLEFFTkEsQ0FBQyxDQUFDLENGTUMsQ0FBQyxDQUFDO0FDQ3RDLEFDTkosR0ZNQyxDQUFDLENBQUMsQ0VOQyxJRE1JLENDTkMsRUFBRSxHRE1HLENBQUMsQ0FBQyxDQUFDLEtBQUssR0FBRyxFQUFFO0FGRXZCLEFFREUsQUNOSixjRE1VLEdBQUcsQ0ZDQyxHQUFHLEFHUEEsQ0FBQyxDRE1DLENBQUMsQ0ZDQyxD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ZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaGFzRXJyb3JzKSB7XG4gICQoZG9jdW1lbnQpLnJlYWR5KCgpID0+IHtcblxuICAgICQoJyNjb25zb2xlIGZvcm0nKS5vbignc3VibWl0JywgcmVwbCk7XG4gICAgJCgnI2V4ZWN1dGUnKS5vbignY2xpY2snLCBleGVjdXRlKTtcbiAgICAkKHdpbmRvdykub24oJ2tleXByZXNzJywgZSA9PiB7XG4gICAgICBlLmN0cmxLZXkgJiYgZS5rZXlDb2RlICYmIGV4ZWN1dGUoKTsgICAvL2V4ZWN1dGUgaWYgdGhleSBwcmVzcyBjdHJsK2IgaW4gY2hyb21lXG4gICAgfSk7XG5cbiAgICAkKCcjY29uc29sZSBmb3JtJykub24oJ2tleWRvd24nLCBlID0+IHtcbiAgICAgIGlmIChlLmtleUNvZGUgPT09IDM4KSB7ICAvL3VwIGFycm93IGtleVxuICAgICAgICBjb21tYW5kSW5kZXgrKztcbiAgICAgIH0gZWxzZSBpZiAoZS5rZXlDb2RlID09PSA0MCkgeyAgLy9kb3duIGFycm93IGtleVxuICAgICAgICBjb21tYW5kSW5kZXgtLTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAnd2UgY2FuIGlnbm9yZSB0aGlzJztcbiAgICAgIH1cbiAgICAgIC8vIG1ha2Ugc3VyZSBjb21tYW5kSW5kZXggc3RheXMgaW4gcmVhc29uYWJsZSByYW5nZVxuICAgICAgY29tbWFuZEluZGV4ID0gTWF0aC5taW4oY29tbWFuZFN0YWNrLmxlbmd0aCAtIDEsIGNvbW1hbmRJbmRleCk7XG4gICAgICBjb21tYW5kSW5kZXggPSBNYXRoLm1heCgtMSwgY29tbWFuZEluZGV4KTtcbiAgICAgICQoJyNjb25zb2xlIGZvcm0gaW5wdXQnKS52YWwoY29tbWFuZFN0YWNrW2NvbW1hbmRJbmRleF0pO1xuICAgIH0pO1xuICB9KTtcblxuICBmdW5jdGlvbiBleGVjdXRlKCkge1xuICAgICQoJyNjb25zb2xlICNvdXRwdXQnKS5lbXB0eSgpO1xuICAgIHZhciBlcnJvcnMgPSBoYXNFcnJvcnMoKTtcbiAgICB2YXIgZXJyb3IgPSBlcnJvcnNbMF07XG4gICAgaWYgKGVycm9yKXtcbiAgICAgIHJldHVybiByZW5kZXIoXG4gICAgICAgIGVycm9yLm5vZGUuaW5uZXJUZXh0IHx8ICQoZXJyb3Iubm9kZSkudGV4dCgpLCAgICAvLyBjaHJvbWUgfHwgZmlyZWZveFxuICAgICAgICB7IGVycm9yOiB0cnVlLCBsaW5lTnVtOiBlZGl0b3IuZ2V0TGluZU51bWJlcihlcnJvci5saW5lKSArIDEgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICB2YXIgY29kZSA9IGVkaXRvci5nZXRWYWx1ZSgpO1xuXG4gICAgd3JhcExvZ091dHB1dCgoKSA9PiB7XG5cbiAgICAgIGV2YWwoY29kZSk7XG5cbiAgICAgICQoJyNjb25zb2xlIGZvcm0nKS5vZmYoJ3N1Ym1pdCcpO1xuICAgICAgJCgnI2NvbnNvbGUgZm9ybScpLm9uKCdzdWJtaXQnLCBldmFsKCcoJytTdHJpbmcocmVwbCkrJyknKSk7XG4gICAgICAvLyB0aGlzIGV2YWwvU3RyaW5nIHRoaW5nIGlzIHByZXR0eSB3ZWlyZCByaWdodD8gSXQncyBiYXNpY2FsbHkgYSBoYWNrIHRoYXQgUm9iIGFuZCBJIGRldmlzZWQgdG8gXCJjbG9uZVwiIGEgZnVuY3Rpb24uIEl0IHRha2VzIGEgZnVuYywgY29udmVydHMgdG8gYSBzdHJpbmcsIHRoZW4gcmVkZWZpbmVzIGl0IGluIGFuIGV2YWwuIFRoaXMgZWZmZWN0aXZlbHkgYWNoaWV2ZXMgZHluYW1pYyBzY29waW5nLiBCeSByZWRlZmluaW5nIGl0IGluIHRoaXMgc2NvcGUsIEkgY2FuIGFjY2VzcyB0aGUgbG9jYWwgdmFyaWFibGVzIGhlcmUgaW5zdGVhZCBvZiB0aGUgZGVmYXVsdCBsZXhpY2FsIHNjb3BpbmcgYmVoYXZpb3IuIFRoZSByZWFzb24gSSB3YW50IHRoaXMgaXMgc28gdGhlIHJlcGwgaGFzIGFjY2VzcyB0byB0aGUgdmFyaWFibGVzIGRlZmluZWQgaW4gdGhlIENvZGVNaXJyb3IgZWRpdG9yLlxuXG4gICAgfSk7XG5cbiAgfVxufVxuXG4vLyBhbGxvdyB1c2VyIHRvIGFjY2VzcyBwcmV2aW91c2x5IGVudGVyZWQgY29tbWFuZHNcbnZhciBjb21tYW5kU3RhY2sgPSBbXTtcbnZhciBjb21tYW5kSW5kZXggPSAtMTtcblxuZnVuY3Rpb24gcmVuZGVyKHRleHQsIG9wdGlvbnM9e30pIHtcbiAgaWYgKHR5cGVvZiB0ZXh0ID09PSAnb2JqZWN0Jykge1xuICAgIHRleHQgPSBKU09OLnN0cmluZ2lmeSh0ZXh0LCBudWxsLCA0KTtcbiAgfSBlbHNlIHtcbiAgICB0ZXh0ID0gU3RyaW5nKHRleHQpO1xuICB9XG5cbiAgLy8gVGhpcyBwYXJ0aWN1bGFyIGVyciBtZXNzYWdlIGlzIHBvb3IuIE1ha2UgaXQgYSBiaXQgbW9yZSBoZWxwZnVsXG4gIHRleHQgPSB0ZXh0LnJlcGxhY2UoXG4gICAgL1VuZXhwZWN0ZWQgZW5kIG9mIGlucHV0LywgXG4gICAgJ1VuZXhwZWN0ZWQgZW5kIG9mIGlucHV0OiBwcm9iYWJseSBhbiBleHRyYSBvcGVuaW5nIGJyYWNrZXQgb3Igb3BlcmF0b3IuJ1xuICApO1xuXG4gIGlmIChvcHRpb25zLmFycm93KVxuICAgIHRleHQgPSBgPT4gJHt0ZXh0fWA7XG4gIGlmIChvcHRpb25zLmVycm9yKVxuICAgIHRleHQgPSBgPHNwYW4gY2xhc3M9XCJlcnJvclwiPiR7dGV4dH08L3NwYW4+YDtcbiAgaWYgKG9wdGlvbnMubGluZU51bSlcbiAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC8hLywgYGxpbmUgJHtvcHRpb25zLmxpbmVOdW19IC0gYCk7XG4gICQoJyNjb25zb2xlICNvdXRwdXQnKS5hcHBlbmQoYDxwPiR7dGV4dH08L3A+YCk7XG5cbiAgLy8gc2Nyb2xsIHRvIGJvdHRvbSBpbiBvcmRlciB0byBzaG93IG1vc3QgcmVjZW50XG4gIHZhciBjb25zb2xlRE9NID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnNvbGUnKTtcbiAgY29uc29sZURPTS5zY3JvbGxUb3AgPSBjb25zb2xlRE9NLnNjcm9sbEhlaWdodDtcbn1cblxuZnVuY3Rpb24gcmVwbChlKSB7XG4gIGUucHJldmVudERlZmF1bHQoKTtcbiAgdmFyIGNvZGUgPSAkKGUudGFyZ2V0KS5maW5kKCdpbnB1dCcpLnZhbCgpO1xuICBjb21tYW5kU3RhY2sudW5zaGlmdChjb2RlKTtcbiAgY29tbWFuZFN0YWNrID0gY29tbWFuZFN0YWNrLnNsaWNlKDAsIDkpO1xuICBjb21tYW5kSW5kZXggPSAtMTtcbiAgd3JhcExvZ091dHB1dCgoKSA9PiB7XG4gICAgJChlLnRhcmdldCkuZmluZCgnaW5wdXQnKS52YWwoJycpO1xuXG4gICAgLy92YXIgZGVjbGFyYXRpb25zIGRvbid0IHdvcmsgaW4gdGhlIFJFUEwsIHNvIGdpdmUgdGhlbSBhbiBlcnJvclxuICAgIGlmIChjb2RlLm1hdGNoKC92YXIvKSkgcmV0dXJuIHJlbmRlcignZG8gdmFyIGRlY2xhcmF0aW9ucyBpbiB0aGUgZWRpdG9yIGFib3ZlJywgeyBlcnJvcjogdHJ1ZSB9KTtcblxuICAgIHZhciBldmFsRXJyO1xuICAgIHZhciB3cmFwcGVkQ29kZSA9IGB0cnl7ICR7Y29kZX1cXG4gfSBjYXRjaChlcnIpIHsgZXZhbEVyciA9IGVyciB9YDtcbiAgICB0cnkge1xuICAgICAgdmFyIG91dHB1dCA9IGV2YWwod3JhcHBlZENvZGUpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgZXZhbEVyciA9IGVycjtcbiAgICB9XG4gICAgaWYgKGV2YWxFcnIpIHtcbiAgICAgIHJlbmRlcihldmFsRXJyLm1lc3NhZ2UsIHsgZXJyb3I6IHRydWUgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlbmRlcihvdXRwdXQsIHsgYXJyb3c6IHRydWUgfSk7XG4gICAgfVxuICB9KTtcbn1cblxuLy8gZXhlY3V0ZXMgYSBmdW5jdGlvbiBpbiBhIGNvbnRleHQgd2hlcmUgYWxsIGNhbGxzIHRvIGNvbnNvbGUubG9nIHdpbGwgcmVuZGVyIHRvIHRoZSBET01cbmZ1bmN0aW9uIHdyYXBMb2dPdXRwdXQoZnVuYykge1xuICBjb25zb2xlLm5hdGl2ZUxvZyA9IGNvbnNvbGUubG9nO1xuICBjb25zb2xlLmxvZyA9IGZ1bmN0aW9uKCkge1xuICAgIFtdLmZvckVhY2guY2FsbChhcmd1bWVudHMsIGxpbmUgPT4ge1xuICAgICAgcmVuZGVyKGxpbmUpO1xuICAgIH0pO1xuICAgIGNvbnNvbGUubmF0aXZlTG9nKC4uLmFyZ3VtZW50cyk7XG4gIH1cbiAgZnVuYygpO1xuICBjb25zb2xlLmxvZyA9IGNvbnNvbGUubmF0aXZlTG9nO1xufVxuXG5cblxuXG4iLCJ3aW5kb3cub25sb2FkID0gZnVuY3Rpb24oKSB7XG5cbiAgd2luZG93LmVkaXRvciA9IENvZGVNaXJyb3IuZnJvbVRleHRBcmVhKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29kZS1lZGl0b3JcIiksIHtcbiAgICBsaW5lTnVtYmVyczogdHJ1ZSxcbiAgICBtb2RlOiBcImphdmFzY3JpcHRcIixcbiAgICBtYXRjaEJyYWNrZXRzOiB0cnVlLFxuICAgIGF1dG9DbG9zZUJyYWNrZXRzOiB0cnVlLFxuICAgIGtleU1hcDogJ3N1YmxpbWUnLFxuICAgIHRhYlNpemU6IDIsXG4gICAgdGhlbWU6ICd0dGNuJ1xuICB9KTtcblxuICB2YXIgd2FpdGluZztcbiAgZWRpdG9yLm9uKFwiY2hhbmdlXCIsICgpID0+IHtcbiAgICBjbGVhclRpbWVvdXQod2FpdGluZyk7XG4gICAgd2FpdGluZyA9IHNldFRpbWVvdXQodXBkYXRlRXJyb3JzLCA4MDApO1xuICB9KTtcblxuICB2YXIgc2F2ZSA9IHJlcXVpcmUoJy4vc2F2ZScpO1xuICBzYXZlKGVkaXRvcik7XG5cbn07XG5cbnZhciBlcnJXaWRnZXRzID0gW107XG5cbmZ1bmN0aW9uIGNoZWNrRm9yRXJyb3JzKCkge1xuICByZXR1cm4gZXJyV2lkZ2V0cztcbn1cblxuZnVuY3Rpb24gcmVuZGVyRXJyKGxpbmVOdW0sIGRlc2MsIGNvbE51bSkge1xuICBpZiAoIWxpbmVOdW0pIHRocm93IG5ldyBFcnJvcignTGluZSBudW1iZXIgZm9yIHJlbmRlckVyciBtdXN0IGJlIGEgdmFsaWQgaW50ZWdlci4nKTtcbiAgdmFyIG1zZyA9ICQoYFxuICAgIDxkaXYgY2xhc3M9XCJsaW50LWVycm9yXCI+XG4gICAgICA8c3BhbiBjbGFzcz1cImxpbnQtZXJyb3ItaWNvblwiPiE8L3NwYW4+XG4gICAgICAke2Rlc2N9XG4gICAgPC9kaXY+XG4gIGApWzBdO1xuICBlcnJXaWRnZXRzLnB1c2goXG4gICAgZWRpdG9yLmFkZExpbmVXaWRnZXQobGluZU51bSAtIDEsIG1zZywgeyBjb3Zlckd1dHRlcjogZmFsc2UsIG5vSFNjcm9sbDogdHJ1ZSB9KVxuICApO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVFcnJvcnMoKSB7XG4gIHZhciBjb2RlID0gZWRpdG9yLmdldFZhbHVlKCk7XG5cbiAgZXJyV2lkZ2V0cy5mb3JFYWNoKGVyciA9PiB7XG4gICAgZWRpdG9yLnJlbW92ZUxpbmVXaWRnZXQoZXJyKTtcbiAgfSk7XG4gIGVycldpZGdldHMgPSBbXTtcblxuICB0cnkge1xuICAgIHZhciBzeW50YXggPSBlc3ByaW1hLnBhcnNlKGNvZGUsIHsgdG9sZXJhbnQ6IHRydWUsIGxvYzogdHJ1ZSB9KTtcbiAgICB2YXIgZXZhbEVycjtcbiAgICB2YXIgd3JhcHBlZENvZGUgPSBgdHJ5eyAke2NvZGV9XFxuIH0gY2F0Y2goZXJyKSB7IGV2YWxFcnIgPSBlcnIgfWA7XG5cbiAgICBldmFsKHdyYXBwZWRDb2RlKTtcbiAgICBpZiAoZXZhbEVycikge1xuICAgICAgdmFyIHN0YWNrID0gZXZhbEVyci5zdGFjaztcbiAgICAgIHZhciBlcnJNZXNzYWdlID0gZXZhbEVyci5tZXNzYWdlIHx8IHN0YWNrLm1hdGNoKC8uKi8pWzBdOyAgICAgLy8gZmlyZWZveCB8fCBjaHJvbWVcbiAgICAgIHZhciBsaW5lTnVtID0gZXZhbEVyci5saW5lTnVtYmVyIHx8IHN0YWNrLm1hdGNoKC88YW5vbnltb3VzPjooXFxkKyk6XFxkKy8pWzFdO1xuICAgICAgLy8gdmFyIGNvbE51bSA9IGV2YWxFcnIuY29sdW1uTnVtYmVyIHx8IHN0YWNrLm1hdGNoKC88YW5vbnltb3VzPjpcXGQrOihcXGQrKS8pWzBdO1xuICAgICAgcmVuZGVyRXJyKGxpbmVOdW0sIGVyck1lc3NhZ2UpO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgcmVuZGVyRXJyKGVyci5saW5lTnVtYmVyLCBlcnIuZGVzY3JpcHRpb24sIGVyci5jb2x1bW4pO1xuICB9XG5cbn1cblxud2luZG93LnJlcGxhY2VFZGl0b3JUZXh0ID0gZnVuY3Rpb24odGV4dCkge1xuICBlZGl0b3IucmVwbGFjZVJhbmdlKFxuICAgIHRleHQsXG4gICAgQ29kZU1pcnJvci5Qb3MoZWRpdG9yLmZpcnN0TGluZSgpLTEpLFxuICAgIENvZGVNaXJyb3IuUG9zKGVkaXRvci5sYXN0TGluZSgpKVxuICApO1xufVxuXG52YXIgZXhlY3V0ZSA9IHJlcXVpcmUoJy4vZXhlYycpO1xuZXhlY3V0ZShjaGVja0ZvckVycm9ycyk7XG5yZXF1aXJlKCcuL3Jlc2l6ZScpOyIsIiQoZG9jdW1lbnQpLnJlYWR5KGUgPT4ge1xuXG4gIHZhciBlZGl0b3JIZWlnaHQgPSAkKCcjZWRpdG9yLXdyYXAnKS5jc3MoJ2hlaWdodCcpO1xuICB2YXIgY29uc29sZUhlaWdodCA9ICQoJyNjb25zb2xlJykuY3NzKCdoZWlnaHQnKTtcblxuICAkKCcucmVzaXplJykuZHJhZ2dhYmxlKHtcbiAgICBheGlzOiAneScsXG4gICAgZHJhZzogZSA9PiB7XG4gICAgICB2YXIgY2hhbmdlID0gZS50YXJnZXQuc3R5bGUudG9wO1xuXG4gICAgICBpZiAoXG4gICAgICAgIHB4VG9OdW0oY2hhbmdlKSArIHB4VG9OdW0oZWRpdG9ySGVpZ2h0KSA+IFxuICAgICAgICB3aW5kb3cuaW5uZXJIZWlnaHQgLSA1MFxuICAgICAgKSByZXR1cm47XG4gICAgICAgIFxuICAgICAgdmFyIG9wZXIgPSAnKy0nO1xuICAgICAgaWYgKGNoYW5nZVswXSA9PT0gJy0nKSB7XG4gICAgICAgIGNoYW5nZSA9IGNoYW5nZS5zbGljZSgxKTtcbiAgICAgICAgb3BlciA9ICctKyc7XG4gICAgICB9XG4gICAgICAkKCcjZWRpdG9yLXdyYXAnKS5jc3MoJ2hlaWdodCcsIGBjYWxjKCR7ZWRpdG9ySGVpZ2h0fSAke29wZXJbMF19ICR7Y2hhbmdlfSlgKTtcbiAgICAgICQoJyNjb25zb2xlJykuY3NzKCdoZWlnaHQnLCBgY2FsYygke2NvbnNvbGVIZWlnaHR9ICR7b3BlclsxXX0gJHtjaGFuZ2V9KWApO1xuICAgIH0sXG4gICAgc3RvcDogZSA9PiB7XG4gICAgICBlZGl0b3JIZWlnaHQgPSAkKCcjZWRpdG9yLXdyYXAnKS5jc3MoJ2hlaWdodCcpO1xuICAgICAgY29uc29sZUhlaWdodCA9ICQoJyNjb25zb2xlJykuY3NzKCdoZWlnaHQnKTtcbiAgICAgIGUudGFyZ2V0LnN0eWxlLnRvcCA9IDA7XG4gICAgICBlZGl0b3IucmVmcmVzaCgpO1xuICAgIH1cbiAgfSlcbn0pO1xuXG5mdW5jdGlvbiBweFRvTnVtKHN0cikge1xuICByZXR1cm4gK3N0ci5zbGljZSgwLCAtMik7XG59IiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihlZGl0b3IpIHtcblxuICB2YXIgcGF0aCA9IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZTtcblxuICAkKCcjc2F2ZScpLm9uKCdjbGljaycsIGUgPT4ge1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKHBhdGgsIGVkaXRvci5nZXRWYWx1ZSgpKTtcbiAgICBhbGVydCgnUHJvZ3Jlc3Mgc2F2ZWQuJylcbiAgfSk7XG5cbiAgdmFyIHNhdmVkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0ocGF0aCk7XG4gIGlmIChzYXZlZCkge1xuICAgIHJlcGxhY2VFZGl0b3JUZXh0KHNhdmVkKTtcbiAgfVxuXG4gICQoJyNjbGVhcicpLm9uKCdjbGljaycsIGUgPT4ge1xuICAgIGlmIChjb25maXJtKCdBcmUgeW91IHN1cmU/IFRoaXMgd2lsbCByZW1vdmUgc2F2ZWQgcHJvZ3Jlc3MuJykpIHtcbiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKHBhdGgpO1xuICAgICAgcmVwbGFjZUVkaXRvclRleHQoJCgnI2NvZGUtZWRpdG9yJykudmFsKCkpO1xuICAgIH1cbiAgfSk7XG5cbn0iXX0=
