(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({"/home/andrew/Desktop/production/codesmith-bin/src/exec.js":[function(require,module,exports){
function render(e){e=String(e).replace(/Unexpected end of input/,"Unexpected end of input: make sure your brackets match"),$("#console #output").append("<p>"+e+"</p>");var o=document.getElementById("console");o.scrollTop=o.scrollHeight}function repl(e){e.preventDefault();var code=$(e.target).find("input").val();commandStack.unshift(code),commandStack=commandStack.slice(0,9),commandIndex=-1,wrapLogOutput(function(){$(e.target).find("input").val("");var evalErr,wrappedCode="try{ "+code+" } catch(err) { evalErr = err.stack }",output=eval(wrappedCode);if(evalErr){var errMessage=evalErr.match(/.*/)[0];render('<span class="error">'+errMessage+"</span>")}else render("=> "+output)})}function wrapLogOutput(e){console.nativeLog=console.log,console.log=function(){[].forEach.call(arguments,function(e){render(e)}),console.nativeLog.apply(console,arguments)},e(),console.log=console.nativeLog}module.exports=function(hasErrors){function execute(){$("#console #output").empty();var errors=hasErrors();if(errors[0])return render('<span class="error">'+errors[0].node.innerText+"</span>");var code=editor.getValue();wrapLogOutput(function(){eval(code),$("#console form").off("submit"),$("#console form").on("submit",eval("("+String(repl)+")"))})}$(document).ready(function(){$("#console form").on("submit",repl),$("#execute").on("click",execute),$(window).on("keypress",function(e){e.ctrlKey&&e.keyCode&&execute()}),$("#console form").on("keydown",function(e){if(38===e.keyCode)commandIndex++;else{if(40!==e.keyCode)return"we can ignore this";commandIndex--}commandIndex=Math.min(commandStack.length-1,commandIndex),commandIndex=Math.max(-1,commandIndex),$("#console form input").val(commandStack[commandIndex])})})};var commandStack=[],commandIndex=-1;

},{}],"/home/andrew/Desktop/production/codesmith-bin/src/repl.js":[function(require,module,exports){
function checkForErrors(){return errWidgets}function renderErr(r,e,t){var a=$('<div class="lint-error"><span class="lint-error-icon">!</span>'+e+"</div>")[0];errWidgets.push(editor.addLineWidget(r-1,a,{coverGutter:!1,noHScroll:!0}))}function updateErrors(){var code=editor.getValue();errWidgets.forEach(function(r){editor.removeLineWidget(r)}),errWidgets=[];try{var syntax=esprima.parse(code,{tolerant:!0,loc:!0}),evalErr,wrappedCode="try{ "+code+" } catch(err) { evalErr = err.stack }";if(eval(wrappedCode),evalErr){var errMessage=evalErr.match(/.*/)[0],_evalErr$match=evalErr.match(/<anonymous>:(\d+):(\d+)/),_evalErr$match2=_slicedToArray(_evalErr$match,3),__=_evalErr$match2[0],lineNum=_evalErr$match2[1],colNum=_evalErr$match2[2];renderErr(lineNum,errMessage,colNum)}}catch(err){renderErr(err.lineNumber,err.description,err.column)}}var _slicedToArray=function(){function r(r,e){var t=[],a=!0,o=!1,n=void 0;try{for(var i,c=r[Symbol.iterator]();!(a=(i=c.next()).done)&&(t.push(i.value),!e||t.length!==e);a=!0);}catch(d){o=!0,n=d}finally{try{!a&&c["return"]&&c["return"]()}finally{if(o)throw n}}return t}return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return r(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();window.onload=function(){window.editor=CodeMirror.fromTextArea(document.getElementById("editor"),{lineNumbers:!0,mode:"javascript",matchBrackets:!0,autoCloseBrackets:!0,keyMap:"sublime",tabSize:2,theme:"ttcn"});var r;editor.on("change",function(){clearTimeout(r),r=setTimeout(updateErrors,800)})};var errWidgets=[],execute=require("./exec");execute(checkForErrors);

},{"./exec":"/home/andrew/Desktop/production/codesmith-bin/src/exec.js"}]},{},["/home/andrew/Desktop/production/codesmith-bin/src/repl.js"])
//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIvaG9tZS9hbmRyZXcvRGVza3RvcC9wcm9kdWN0aW9uL2NvZGVzbWl0aC1iaW4vc3JjL2V4ZWMuanMiLCIvaG9tZS9hbmRyZXcvRGVza3RvcC9wcm9kdWN0aW9uL2NvZGVzbWl0aC1iaW4vc3JjL3JlcGwuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQSxBQWlEQSxNQWpETSxDQUFDLENBaURFLE1BakRLLEVBaURFLENBakRDLEVBa0RmLEVBQU8sTUFsRGlCLENBa0RWLEdBQU0sS0FsRGEsRUFBRSxDQWtEUCwwQkFBMkIsMERBQ3ZELEVBQUUsb0JBQW9CLE9BQU0sTUFBTyxFQUFJLE9BQ3ZDLElBQUksR0FBVSxTQUFTLGVBQWUsVUFDdEMsR0FBUSxVQUFZLEVBQVEsYUFHOUIsUUFBUyxNQUFLLEdBQ1osRUFBRSxnQkFDRixJQUFJLE1BQU8sRUFBRSxFQUFFLFFBQVEsS0FBSyxTQUFTLEtBQ3JDLGNBQWEsUUFBUSxNQUNyQixhQUFlLGFBQWEsTUFBTSxFQUFHLEdBQ3JDLGFBQWUsR0FDZixjQUFjLFdBQ1osRUFBRSxFQUFFLFFBQVEsS0FBSyxTQUFTLElBQUksR0FDOUIsSUFBSSxTQUNBLFlBQVcsUUFBVyxLQUFJLHdDQUMxQixPQUFTLEtBQUssWUFDbEIsSUFBSSxRQUFTLENBQ1gsR0FBSSxZQUFhLFFBQVEsTUFBTSxNQUFNLEVBQ3JDLFFBQU0sdUJBQXdCLFdBQVUsZUFFeEMsUUFBTSxNQUFPLFVBTW5CLFFBQVMsZUFBYyxHQUNyQixRQUFRLFVBQVksUUFBUSxJQUM1QixRQUFRLElBQU0sY0FDVCxRQUFRLEtBQUssVUFBVyxTQUFBLEdBQ3pCLE9BQU8sS0FFVCxRQUFRLFVBQVMsTUFBakIsUUFBcUIsWUFFdkIsSUFDQSxRQUFRLElBQU0sUUFBUSxVQXRGeEIsT0FBTyxRQUFVLFNBQVMsV0F3QnhCLFFBQVMsV0FDUCxFQUFF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V0FBTyxDQUFDLFNBQVMsTUFBQSxDQUFqQixPQUFPLEVBQWMsU0FBUyxDQUFDLENBQUM7R0FDakMsQ0FBQTtBQUNELE1BQUksRUFBRSxDQUFDO0FBQ1AsU0FBTyxDQUFDLEdBQUcsR0FBRyxPQUFPLENBQUMsU0FBUyxDQUFDO0NBQ2pDIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaGFzRXJyb3JzKSB7XG4gICQoZG9jdW1lbnQpLnJlYWR5KCgpID0+IHtcblxuICAgICQoJyNjb25zb2xlIGZvcm0nKS5vbignc3VibWl0JywgcmVwbCk7XG4gICAgJCgnI2V4ZWN1dGUnKS5vbignY2xpY2snLCBleGVjdXRlKTtcbiAgICAkKHdpbmRvdykub24oJ2tleXByZXNzJywgZSA9PiB7XG4gICAgICBlLmN0cmxLZXkgJiYgZS5rZXlDb2RlICYmIGV4ZWN1dGUoKTsgICAvL2V4ZWN1dGUgaWYgdGhleSBwcmVzcyBjdHJsK2JcbiAgICB9KTtcblxuICAgICQoJyNjb25zb2xlIGZvcm0nKS5vbigna2V5ZG93bicsIGUgPT4ge1xuICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMzgpIHsgIC8vdXAgYXJyb3cga2V5XG4gICAgICAgIGNvbW1hbmRJbmRleCsrO1xuICAgICAgfSBlbHNlIGlmIChlLmtleUNvZGUgPT09IDQwKSB7ICAvL2Rvd24gYXJyb3cga2V5XG4gICAgICAgIGNvbW1hbmRJbmRleC0tO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuICd3ZSBjYW4gaWdub3JlIHRoaXMnO1xuICAgICAgfVxuICAgICAgLy8gbWFrZSBzdXJlIGNvbW1hbmRJbmRleCBzdGF5cyBpbiByZWFzb25hYmxlIHJhbmdlXG4gICAgICBjb21tYW5kSW5kZXggPSBNYXRoLm1pbihjb21tYW5kU3RhY2subGVuZ3RoIC0gMSwgY29tbWFuZEluZGV4KTtcbiAgICAgIGNvbW1hbmRJbmRleCA9IE1hdGgubWF4KC0xLCBjb21tYW5kSW5kZXgpO1xuICAgICAgJCgnI2NvbnNvbGUgZm9ybSBpbnB1dCcpLnZhbChjb21tYW5kU3RhY2tbY29tbWFuZEluZGV4XSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGZ1bmN0aW9uIGV4ZWN1dGUoKSB7XG4gICAgJCgnI2NvbnNvbGUgI291dHB1dCcpLmVtcHR5KCk7XG4gICAgdmFyIGVycm9ycyA9IGhhc0Vycm9ycygpO1xuICAgIGlmIChlcnJvcnNbMF0pXG4gICAgICByZXR1cm4gcmVuZGVyKGA8c3BhbiBjbGFzcz1cImVycm9yXCI+JHtlcnJvcnNbMF0ubm9kZS5pbm5lclRleHR9PC9zcGFuPmApO1xuXG4gICAgdmFyIGNvZGUgPSBlZGl0b3IuZ2V0VmFsdWUoKTtcblxuICAgIHdyYXBMb2dPdXRwdXQoKCkgPT4ge1xuXG4gICAgICBldmFsKGNvZGUpO1xuXG4gICAgICAkKCcjY29uc29sZSBmb3JtJykub2ZmKCdzdWJtaXQnKTtcbiAgICAgICQoJyNjb25zb2xlIGZvcm0nKS5vbignc3VibWl0JywgZXZhbCgnKCcrU3RyaW5nKHJlcGwpKycpJykpO1xuICAgICAgLy8gdGhpcyBldmFsL1N0cmluZyB0aGluZyBpcyBwcmV0dHkgd2VpcmQgcmlnaHQ/IEl0J3MgYmFzaWNhbGx5IGEgaGFjayB0aGF0IFJvYiBhbmQgSSBkZXZpc2VkIHRvIFwiY2xvbmVcIiBhIGZ1bmN0aW9uLiBJdCB0YWtlcyBhIGZ1bmMsIGNvbnZlcnRzIHRvIGEgc3RyaW5nLCB0aGVuIHJlZGVmaW5lcyBpdCBpbiBhbiBldmFsLiBUaGlzIGVmZmVjdGl2ZWx5IGFjaGlldmVzIGR5bmFtaWMgc2NvcGluZy4gQnkgcmVkZWZpbmluZyBpdCBpbiB0aGlzIHNjb3BlLCBJIGNhbiBhY2Nlc3MgdGhlIGxvY2FsIHZhcmlhYmxlcyBoZXJlIGluc3RlYWQgb2YgdGhlIGRlZmF1bHQgbGV4aWNhbCBzY29waW5nIGJlaGF2aW9yLiBUaGUgcmVhc29uIEkgd2FudCB0aGlzIGlzIHNvIHRoZSByZXBsIGhhcyBhY2Nlc3MgdG8gdGhlIHZhcmlhYmxlcyBkZWZpbmVkIGluIHRoZSBDb2RlTWlycm9yIGVkaXRvci5cblxuICAgIH0pO1xuXG4gIH1cbn1cblxuLy9hbGxvdyB1c2VyIHRvIGFjY2VzcyBwcmV2aW91c2x5IGVudGVyZWQgY29tbWFuZHNcbnZhciBjb21tYW5kU3RhY2sgPSBbXTtcbnZhciBjb21tYW5kSW5kZXggPSAtMTtcblxuZnVuY3Rpb24gcmVuZGVyKHRleHQpIHtcbiAgdGV4dCA9IFN0cmluZyh0ZXh0KS5yZXBsYWNlKC9VbmV4cGVjdGVkIGVuZCBvZiBpbnB1dC8sICdVbmV4cGVjdGVkIGVuZCBvZiBpbnB1dDogbWFrZSBzdXJlIHlvdXIgYnJhY2tldHMgbWF0Y2gnKVxuICAkKCcjY29uc29sZSAjb3V0cHV0JykuYXBwZW5kKGA8cD4ke3RleHR9PC9wPmApO1xuICB2YXIgY29uc29sZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb25zb2xlJyk7XG4gIGNvbnNvbGUuc2Nyb2xsVG9wID0gY29uc29sZS5zY3JvbGxIZWlnaHQ7XG59XG5cbmZ1bmN0aW9uIHJlcGwoZSkge1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIHZhciBjb2RlID0gJChlLnRhcmdldCkuZmluZCgnaW5wdXQnKS52YWwoKTtcbiAgY29tbWFuZFN0YWNrLnVuc2hpZnQoY29kZSk7XG4gIGNvbW1hbmRTdGFjayA9IGNvbW1hbmRTdGFjay5zbGljZSgwLCA5KTtcbiAgY29tbWFuZEluZGV4ID0gLTE7XG4gIHdyYXBMb2dPdXRwdXQoKCkgPT4ge1xuICAgICQoZS50YXJnZXQpLmZpbmQoJ2lucHV0JykudmFsKCcnKTtcbiAgICB2YXIgZXZhbEVycjtcbiAgICB2YXIgd3JhcHBlZENvZGUgPSBgdHJ5eyAke2NvZGV9IH0gY2F0Y2goZXJyKSB7IGV2YWxFcnIgPSBlcnIuc3RhY2sgfWA7XG4gICAgdmFyIG91dHB1dCA9IGV2YWwod3JhcHBlZENvZGUpO1xuICAgIGlmIChldmFsRXJyKSB7XG4gICAgICB2YXIgZXJyTWVzc2FnZSA9IGV2YWxFcnIubWF0Y2goLy4qLylbMF07XG4gICAgICByZW5kZXIoYDxzcGFuIGNsYXNzPVwiZXJyb3JcIj4ke2Vyck1lc3NhZ2V9PC9zcGFuPmApO1xuICAgIH0gZWxzZSB7XG4gICAgICByZW5kZXIoYD0+ICR7b3V0cHV0fWApO1xuICAgIH1cbiAgfSk7XG59XG5cbi8vIGV4ZWN1dGVzIGEgZnVuY3Rpb24gaW4gYSBjb250ZXh0IHdoZXJlIGFsbCBjYWxscyB0byBjb25zb2xlLmxvZyB3aWxsIHJlbmRlciB0byB0aGUgRE9NXG5mdW5jdGlvbiB3cmFwTG9nT3V0cHV0KGZ1bmMpIHtcbiAgY29uc29sZS5uYXRpdmVMb2cgPSBjb25zb2xlLmxvZztcbiAgY29uc29sZS5sb2cgPSBmdW5jdGlvbigpIHtcbiAgICBbXS5mb3JFYWNoLmNhbGwoYXJndW1lbnRzLCBsaW5lID0+IHtcbiAgICAgIHJlbmRlcihsaW5lKTtcbiAgICB9KTtcbiAgICBjb25zb2xlLm5hdGl2ZUxvZyguLi5hcmd1bWVudHMpO1xuICB9XG4gIGZ1bmMoKTtcbiAgY29uc29sZS5sb2cgPSBjb25zb2xlLm5hdGl2ZUxvZztcbn1cblxuXG5cblxuIiwid2luZG93Lm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuXG4gIHdpbmRvdy5lZGl0b3IgPSBDb2RlTWlycm9yLmZyb21UZXh0QXJlYShkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImVkaXRvclwiKSwge1xuICAgIGxpbmVOdW1iZXJzOiB0cnVlLFxuICAgIG1vZGU6IFwiamF2YXNjcmlwdFwiLFxuICAgIG1hdGNoQnJhY2tldHM6IHRydWUsXG4gICAgYXV0b0Nsb3NlQnJhY2tldHM6IHRydWUsXG4gICAga2V5TWFwOiAnc3VibGltZScsXG4gICAgdGFiU2l6ZTogMixcbiAgICB0aGVtZTogJ3R0Y24nXG4gIH0pO1xuXG4gIHZhciB3YWl0aW5nO1xuICBlZGl0b3Iub24oXCJjaGFuZ2VcIiwgKCkgPT4ge1xuICAgIGNsZWFyVGltZW91dCh3YWl0aW5nKTtcbiAgICB3YWl0aW5nID0gc2V0VGltZW91dCh1cGRhdGVFcnJvcnMsIDgwMCk7XG4gIH0pO1xuXG59O1xuXG52YXIgZXJyV2lkZ2V0cyA9IFtdO1xuXG5mdW5jdGlvbiBjaGVja0ZvckVycm9ycygpIHtcbiAgcmV0dXJuIGVycldpZGdldHM7XG59XG5cbmZ1bmN0aW9uIHJlbmRlckVycihsaW5lTnVtLCBkZXNjLCBjb2xOdW0pIHtcbiAgdmFyIG1zZyA9ICQoYDxkaXYgY2xhc3M9XCJsaW50LWVycm9yXCI+PHNwYW4gY2xhc3M9XCJsaW50LWVycm9yLWljb25cIj4hPC9zcGFuPiR7ZGVzY308L2Rpdj5gKVswXTtcbiAgZXJyV2lkZ2V0cy5wdXNoKFxuICAgIGVkaXRvci5hZGRMaW5lV2lkZ2V0KGxpbmVOdW0gLSAxLCBtc2csIHsgY292ZXJHdXR0ZXI6IGZhbHNlLCBub0hTY3JvbGw6IHRydWUgfSlcbiAgKTtcbn1cblxuZnVuY3Rpb24gdXBkYXRlRXJyb3JzKCkge1xuICB2YXIgY29kZSA9IGVkaXRvci5nZXRWYWx1ZSgpO1xuXG4gIGVycldpZGdldHMuZm9yRWFjaChlcnIgPT4ge1xuICAgIGVkaXRvci5yZW1vdmVMaW5lV2lkZ2V0KGVycik7XG4gIH0pO1xuICBlcnJXaWRnZXRzID0gW107XG5cbiAgdHJ5IHtcbiAgICB2YXIgc3ludGF4ID0gZXNwcmltYS5wYXJzZShjb2RlLCB7IHRvbGVyYW50OiB0cnVlLCBsb2M6IHRydWUgfSk7XG5cbiAgICB2YXIgZXZhbEVycjtcbiAgICB2YXIgd3JhcHBlZENvZGUgPSBgdHJ5eyAke2NvZGV9IH0gY2F0Y2goZXJyKSB7IGV2YWxFcnIgPSBlcnIuc3RhY2sgfWA7XG4gICAgZXZhbCh3cmFwcGVkQ29kZSk7XG4gICAgaWYgKGV2YWxFcnIpIHtcbiAgICAgIHZhciBlcnJNZXNzYWdlID0gZXZhbEVyci5tYXRjaCgvLiovKVswXTtcbiAgICAgIHZhciBbX18sIGxpbmVOdW0sIGNvbE51bV0gPSBldmFsRXJyLm1hdGNoKC88YW5vbnltb3VzPjooXFxkKyk6KFxcZCspLyk7XG4gICAgICByZW5kZXJFcnIobGluZU51bSwgZXJyTWVzc2FnZSwgY29sTnVtKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHJlbmRlckVycihlcnIubGluZU51bWJlciwgZXJyLmRlc2NyaXB0aW9uLCBlcnIuY29sdW1uKTtcbiAgfVxuXG59XG5cbnZhciBleGVjdXRlID0gcmVxdWlyZSgnLi9leGVjJyk7XG5leGVjdXRlKGNoZWNrRm9yRXJyb3JzKTsiXX0=
