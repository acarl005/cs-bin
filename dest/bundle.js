(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({"/home/andy/Desktop/production/cs-bin/src/exec.js":[function(require,module,exports){
function render(e){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];e="object"==typeof e?JSON.stringify(e,null,4):String(e),e=e.replace(/Unexpected end of input/,"Unexpected end of input: probably an extra opening bracket or operator."),r.arrow&&(e="=> "+e),r.error&&(e='<span class="error">'+e+"</span>"),r.lineNum&&(e=e.replace(/!/,"line "+r.lineNum+" - ")),$("#console #output").append("<p>"+e+"</p>");var o=document.getElementById("console");o.scrollTop=o.scrollHeight}function repl(e){e.preventDefault();var code=$(e.target).find("input").val();commandStack.unshift(code),commandStack=commandStack.slice(0,9),commandIndex=-1,wrapLogOutput(function(){if($(e.target).find("input").val(""),code.match(/var/))return render("do var declarations in the editor above",{error:!0});var evalErr,wrappedCode="try{ "+code+"\n } catch(err) { evalErr = err }";try{var output=eval(wrappedCode)}catch(err){evalErr=err}evalErr?render(evalErr.message,{error:!0}):render(output,{arrow:!0})})}function wrapLogOutput(e){console.nativeLog=console.log,console.log=function(){[].forEach.call(arguments,function(e){render(e)}),console.nativeLog.apply(console,arguments)},e(),console.log=console.nativeLog}module.exports=function(hasErrors){function execute(){$("#console #output").empty();var errors=hasErrors(),error=errors[0];if(error)return render(error.node.innerText||$(error.node).text(),{error:!0,lineNum:editor.getLineNumber(error.line)+1});var code=editor.getValue();wrapLogOutput(function(){eval(code),$("#console form").off("submit"),$("#console form").on("submit",eval("("+String(repl)+")"))})}$(document).ready(function(){$("#console form").on("submit",repl),$("#execute").on("click",execute),$(window).on("keypress",function(e){e.ctrlKey&&e.keyCode&&execute()}),$("#console form").on("keydown",function(e){if(38===e.keyCode)commandIndex++;else{if(40!==e.keyCode)return"we can ignore this";commandIndex--}commandIndex=Math.min(commandStack.length-1,commandIndex),commandIndex=Math.max(-1,commandIndex),$("#console form input").val(commandStack[commandIndex])})})};var commandStack=[],commandIndex=-1;

},{}],"/home/andy/Desktop/production/cs-bin/src/repl.js":[function(require,module,exports){
function checkForErrors(){return errWidgets}function renderErr(r,e,t){if(!r)throw new Error("Line number for renderErr must be a valid integer.");var o=$('\n    <div class="lint-error">\n      <span class="lint-error-icon">!</span>\n      '+e+"\n    </div>\n  ")[0];errWidgets.push(editor.addLineWidget(r-1,o,{coverGutter:!1,noHScroll:!0}))}function updateErrors(){var code=editor.getValue();errWidgets.forEach(function(r){editor.removeLineWidget(r)}),errWidgets=[];try{var syntax=esprima.parse(code,{tolerant:!0,loc:!0}),evalErr,wrappedCode="try{ "+code+"\n } catch(err) { evalErr = err }";if(eval(wrappedCode),evalErr){var stack=evalErr.stack,errMessage=evalErr.message||stack.match(/.*/)[0],lineNum=evalErr.lineNumber||stack.match(/<anonymous>:(\d+):\d+/)[1];renderErr(lineNum,errMessage)}}catch(err){renderErr(err.lineNumber,err.description,err.column)}}window.onload=function(){window.editor=CodeMirror.fromTextArea(document.getElementById("code-editor"),{lineNumbers:!0,mode:"javascript",matchBrackets:!0,autoCloseBrackets:!0,keyMap:"sublime",tabSize:2,theme:"ttcn"});var r;editor.on("change",function(){clearTimeout(r),r=setTimeout(updateErrors,800)});var e=require("./save");e(editor)};var errWidgets=[];window.replaceEditorText=function(r){editor.replaceRange(r,CodeMirror.Pos(editor.firstLine()-1),CodeMirror.Pos(editor.lastLine()))};var execute=require("./exec");execute(checkForErrors),require("./resize");

},{"./exec":"/home/andy/Desktop/production/cs-bin/src/exec.js","./resize":"/home/andy/Desktop/production/cs-bin/src/resize.js","./save":"/home/andy/Desktop/production/cs-bin/src/save.js"}],"/home/andy/Desktop/production/cs-bin/src/resize.js":[function(require,module,exports){
function pxToNum(e){return+e.slice(0,-2)}$(document).ready(function(e){var o=$("#editor-wrap").css("height"),s=$("#console").css("height");$(".resize").draggable({axis:"y",drag:function(e){var i=e.target.style.top;if(pxToNum(i)+pxToNum(o)>window.innerHeight-50)throw"";var t="+-";"-"===i[0]&&(i=i.slice(1),t="-+"),$("#editor-wrap").css("height","calc("+o+" "+t[0]+" "+i+")"),$("#console").css("height","calc("+s+" "+t[1]+" "+i+")")},stop:function(e){o=$("#editor-wrap").css("height"),s=$("#console").css("height"),e.target.style.top=0,editor.refresh()}}),hideConsole(),$("#execute").on("click",showConsole),$("#close").on("click",hideConsole)}),window.hideConsole=function(){$("#black-stuff").hide(),$("#editor-wrap").css("height","100vh")},window.showConsole=function(){$("#black-stuff").show().css("height","33.5vh"),$("#editor-wrap").css("height","65vh")};

},{}],"/home/andy/Desktop/production/cs-bin/src/save.js":[function(require,module,exports){
module.exports=function(e){var o=window.location.pathname;$("#save").on("click",function(r){localStorage.setItem(o,e.getValue()),alert("Progress saved.")});var r=localStorage.getItem(o);r&&replaceEditorText(r),$("#clear").on("click",function(e){confirm("Are you sure? This will remove saved progress.")&&(localStorage.removeItem(o),replaceEditorText($("#code-editor").val()))})};

},{}]},{},["/home/andy/Desktop/production/cs-bin/src/repl.js"])
//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIvaG9tZS9hbmR5L0Rlc2t0b3AvcHJvZHVjdGlvbi9jcy1iaW4vc3JjL2V4ZWMuanMiLCIvaG9tZS9hbmR5L0Rlc2t0b3AvcHJvZHVjdGlvbi9jcy1iaW4vc3JjL3JlcGwuanMiLCIvaG9tZS9hbmR5L0Rlc2t0b3AvcHJvZHVjdGlvbi9jcy1iaW4vc3JjL3Jlc2l6ZS5qcyIsIi9ob21lL2FuZHkvRGVza3RvcC9wcm9kdWN0aW9uL2NzLWJpbi9zcmMvc2F2ZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBLEFBc0RBLE1BdERNLENBQUMsQ0FzREUsTUF0REssRUFzREUsQ0F0REMsS0FzREssR0FBTyxFQXRESCxRQXNERyxDQXRETSxFQUFFLEtBc0RSLEdBQUEsU0FBQSxVQUFBLE1BQUcsVUFBQSxFQUU1QixHQURrQixnQkFBVCxHQUNGLEtBQUssVUFBVSxFQUFNLEtBQU0sR0FFM0IsT0FBTyxHQUloQixFQUFPLEVBQUssUUFDViwwQkFDQSwyRUFHRSxFQUFRLFFBQ1YsRUFBSSxNQUFTLEdBQ1gsRUFBUSxRQUNWLEVBQUksdUJBQTBCLEVBQUksV0FDaEMsRUFBUSxVQUNWLEVBQU8sRUFBSyxRQUFRLElBQUcsUUFBVSxFQUFRLFFBQU8sUUFDbEQsRUFBRSxvQkFBb0IsT0FBTSxNQUFPLEVBQUksT0FHdkMsSUFBSSxHQUFhLFNBQVMsZUFBZSxVQUN6QyxHQUFXLFVBQVksRUFBVyxhQUdwQyxRQUFTLE1BQUssR0FDWixFQUFFLGdCQUNGLElBQUksTUFBTyxFQUFFLEVBQUUsUUFBUSxLQUFLLFNBQVMsS0FDckMsY0FBYSxRQUFRLE1BQ3JCLGFBQWUsYUFBYSxNQUFNLEVBQUcsR0FDckMsYUFBZSxHQUNmLGNBQWMsV0FJWixHQUhBLEVBQUUsRUFBRSxRQUFRLEtBQUssU0FBUyxJQUFJLElBRzFCLEtBQUssTUFBTSxPQUFRLE1BQU8s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QUFrQixFQUFFLGdCQUFnQjtBSFBwQyxBQ0hGLFVER00sQUNIQSxDREdDLENBQUMsQUNIQSxPREdPLEVDSEUsR0RHRyxFQUFFLEVBQUU7QUNGeEIsQUNIRixBQ0hBLEdER0MsQ0FBQyxFQ0hFLElBQUksQ0ZNQyxFQUFFLEFDSEEsQUNIQSxDRk1DLEFDSEEsQ0FBQyxJQ0hJLENBQUMsSURHSSxDQUFDLEdDSEcsQ0FBQyxRQUFRLENBQUM7QUhTOUIsQUNGSixBQ0hBLFFBQUksQ0RHQyxDQ0hDLENER0MsRUNIRSxJREdJLEdERUcsRUFBRSxDQUFDO0FHUHJCLEdGTUMsQUVOQSxDRk1DLEFFTkEsQ0ZNQyxFREVFLElHUkksQ0FBQyxDSFFDLEFHUkEsRUFBRSxDQUFDLENIUUMsQ0FBQyxDQUFDLElHUkksRUFBRSxDSFFDLEtBQUssRUFBRSxFQUFFLEFHUlYsQ0FBQyxFQUFJO0FESTFCLEFDSEEsUURHSSxFQUFFLE1DSE0sQ0FBQyxPREdQLEFDSGMsQ0RHYixBQ0hjLEVER1YsRUNIYyxFQUFFLE1BQU0sQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDO0FIUTFDLEFDRE4sQUNISSxBQ0hGLE1GTUUsR0VORyxDREdDLEFDSEEsR0ZNRyxDQUFDLEVDSEUsR0FBRyxDRklDLEFFSkEsQ0FBQyxDRklDLENBQUMsSUVKSSxBQ0hBLENER0MsQUNIQSxDQUFBLElER0ssQ0FBQyxHQUFHLENBQUM7QURJcEMsR0VOQyxDQUFDLENBQUMsRUhPRSxDQ0RDLENBQUMsRUFBRSxDQUFDLENEQ0MsT0NETyxFQUFFLFlBQU07QURFcEIsQUNESixlRENXLENDREMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxTRENTLENBQUM7QUNBaEMsQUNIRSxBQ0hKLE1BQUksQ0hPQyxHRUhDLENERUcsQUVOQSxHRk1HLEFFTkEsR0RJQyxDQUFDLE1ERVEsQUNGRixDREVHLEFDRkYsQ0NKRyxDQUFDLENESUQsTUNKUSxDRElELEFDSkUsQ0RJRCxDREVHLEVBQUUsQUVOQSxDQUFDLENBQUMsQ0ZNQyxDQUFDLENBQUMsSUNGRSxDQUFDLEdBQ3ZDLE1BQU0sQ0FBQyxXQUFXLEdBQUcsRUFBRSxFQUN2QixNQUFNLEVBQUUsQ0FBQztBQ0xmLEdGTUMsQ0FBQyxDQUFDLENFTkMsS0FBSyxFQUFFO0FIUVAsQUVEQSxBQ05GLFVETU0sSUFBSSxHQUFHLENGQ0MsR0FBRyxBRURBLEFDTkEsQ0RNQyxBQ05BLEdIT0csQ0FBQyxDR1BDLENBQUMsQ0hPQyxBR1BBLENIT0MsWUFBWSxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUUsWUFBWSxDQUFDLENBQUM7QUFDL0QsQUNESixBQ0FJLEdDTkgsR0ZNRyxJQUFJLEFDQUEsR0RBRyxHQ0FHLENBQUMsQ0ZDQyxBRURBLENBQUMsQ0RBQyxDRENDLEFDREEsR0NBRyxDRkNDLENBQUMsQ0VEQyxFRkNFLEFDREEsQUNBQSxDRkNDLEFDREEsQ0RDQyxBQ0RBLENEQ0MsRUFBRSxZQUFZLENBQUMsQ0FBQztBQUMxQyxBQ0RKLEFDQU0sTURBRixDRENDLEFDREEsQ0RDQyxLQ0RLLENBQUMsQUNBQSxDREFDLEVDQUUsTUFBTSxDQUFDLEtGQ0ssQUVEQSxDRkNDLEFFREEsQ0ZDQyxBRURBLENBQUMsQ0FBQyxDRkNDLENBQUMsWUFBWSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUM7QUVBdkQsQUNOTixDRk9ELENBQUMsQ0VQQyxDQUFDLENIT0MsQ0FBQyxDQUFDLEtFREssQUNOQSxDQUFDLENBQUMsQ0RNQyxDQ05DLENBQUMsRURNRSxDQUFDLElDTkksRUFBRSxVQUFBLENBQUMsRUFBSTtBQUMzQixHSE9ELENBQUMsQ0FBQyxFRURFLENDTkMsT0FBTyxDQUFDLGdEQUFnRCxDQUFDLEVBQUU7QUZRbkUsQUNETSxBQ05BLElGT0YsR0NERyxDQUFDLE1EQ00sR0FBRyxDRVBDLENGT0MsQUVQQSxDRk9DLEVDREUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQ05DLENBQUMsSUFBSSxDQUFDLENETUMsQUNOQSxZRE1VLFlBQVksU0FBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLFNBQUksTUFBTSxPQUFJLENBQUM7QUZFbEYsQUVESSxBQ05BLE9ETUMsQ0FBQyxHRkNHLE9BQU8sQUVEQSxDQUFDLENBQUMsQ0ZDQyxFRURFLEFDTkEsQ0RNQyxBQ05BLENBQUMsQ0FBQyxNRE1NLFFDTlEsQ0FBQyxDQUFDLEVETUEsQ0NORyxFQUFFLENBQUMsQ0FBQyxRRE1NLFNBQUksSUFBSSxDQUFDLENBQUMsQ0FBQyxTQUFJLE1BQU0sT0FBSSxDQUFDO0FGRTdFLEFDQUosS0RBSyxBRURBLEFDTkEsQ0hPQyxHQ0FHLGNBQWMsQ0RBQyxDQUFDLENBQUMsQUNBQSxLREFLLEVBQUUsQ0FBQztBQUM5QixBQ0FGLEdFUEMsQ0FBQyxDQUFDLEdIT0csQ0NBQyxLREFLLEdBQUcsRUNBRSxDQUFDLE1EQU0sRUFBRSxDQUFDO0FBQ3pCLEFFREEsQ0RDSCxBRU5BLENBQUEsTUhNTyxBRURBLEVBQUUsR0ZDRyxHQUFHLE1BQU0sQ0FBQyxDQUFDLEFFRGQsQ0ZDZSxBRURkLENGQ2UsQ0VEWDtBRkVYLEFFREUsUUZDRSxLQUFLLEVBQUMsR0VESSxHQUFHLENBQUMsQ0FBQyxjQUFjLENBQUMsQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUM7QUZFL0MsQUNBTixBQ0RNLFNEQ0csSURBSSxLQ0FLLENEQUMsQUNBQSxBQ0RBLENGRVgsRUVGYyxDQUFDLENBQUMsQ0ZFWCxDQUFDLEFDRFksRUFBRSxFRENWLENBQUMsQ0NEYSxFQUFFLEFDREEsQ0FBQyxDQUFDLEdBQUcsQ0ZFWCxBQ0RZLEFDREEsRURDRSxFRENWLENBQUMsQ0FBQyxFRUZjLENBQUMsQ0FBQyxDRkVYLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxFQUFFO0FBQzVDLEFDRE4sQUNESSxNRENBLENBQUMsQUNEQSxDRkVHLEFFRkYsS0ZFTyxDQ0RELEFDREEsQ0ZFRyxBRUZGLENEQ0MsR0RDSyxDRUZELENGRUcsQUVGRixDRENDLEVDREUsRURDRSxDQ0RDLENGRUcsQUVGRixDQUFDLENGRUcsQ0NERCxDQUFDLElEQ00sQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUMvRCxDQUFDLGNDRjRFLENB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TSxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQztLQUNoQyxDQUFDLE9BQU8sR0FBRyxFQUFFO0FBQ1osYUFBTyxHQUFHLEdBQUcsQ0FBQztLQUNmO0FBQ0QsUUFBSSxPQUFPLEVBQUU7QUFDWCxZQUFNLENBQUMsT0FBTyxDQUFDLE9BQU8sRUFBRSxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDO0tBQzFDLE1BQU07QUFDTCxZQUFNLENBQUMsTUFBTSxFQUFFLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUM7S0FDakM7R0FDRixDQUFDLENBQUM7Q0FDSjs7O0FBR0QsU0FBUyxhQUFhLENBQUMsSUFBSSxFQUFFO0FBQzNCLFNBQU8sQ0FBQyxTQUFTLEdBQUcsT0FBTyxDQUFDLEdBQUcsQ0FBQztBQUNoQyxTQUFPLENBQUMsR0FBRyxHQUFHLFlBQVc7QUFDdkIsTUFBRSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFLFVBQUEsSUFBSSxFQUFJO0FBQ2pDLFlBQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQztLQUNkLENBQUMsQ0FBQztBQUNILFdBQU8sQ0FBQyxTQUFTLE1BQUEsQ0FBakIsT0FBTyxFQUFjLFNBQVMsQ0FBQyxDQUFDO0dBQ2pDLENBQUE7QUFDRCxNQUFJLEVBQUUsQ0FBQztBQUNQLFNBQU8sQ0FBQyxHQUFHLEdBQUcsT0FBTyxDQUFDLFNBQVMsQ0FBQztDQUNqQyIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGhhc0Vycm9ycykge1xuICAkKGRvY3VtZW50KS5yZWFkeSgoKSA9PiB7XG5cbiAgICAkKCcjY29uc29sZSBmb3JtJykub24oJ3N1Ym1pdCcsIHJlcGwpO1xuICAgICQoJyNleGVjdXRlJykub24oJ2NsaWNrJywgZXhlY3V0ZSk7XG4gICAgJCh3aW5kb3cpLm9uKCdrZXlwcmVzcycsIGUgPT4ge1xuICAgICAgZS5jdHJsS2V5ICYmIGUua2V5Q29kZSAmJiBleGVjdXRlKCk7ICAgLy9leGVjdXRlIGlmIHRoZXkgcHJlc3MgY3RybCtiIGluIGNocm9tZVxuICAgIH0pO1xuXG4gICAgJCgnI2NvbnNvbGUgZm9ybScpLm9uKCdrZXlkb3duJywgZSA9PiB7XG4gICAgICBpZiAoZS5rZXlDb2RlID09PSAzOCkgeyAgLy91cCBhcnJvdyBrZXlcbiAgICAgICAgY29tbWFuZEluZGV4Kys7XG4gICAgICB9IGVsc2UgaWYgKGUua2V5Q29kZSA9PT0gNDApIHsgIC8vZG93biBhcnJvdyBrZXlcbiAgICAgICAgY29tbWFuZEluZGV4LS07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gJ3dlIGNhbiBpZ25vcmUgdGhpcyc7XG4gICAgICB9XG4gICAgICAvLyBtYWtlIHN1cmUgY29tbWFuZEluZGV4IHN0YXlzIGluIHJlYXNvbmFibGUgcmFuZ2VcbiAgICAgIGNvbW1hbmRJbmRleCA9IE1hdGgubWluKGNvbW1hbmRTdGFjay5sZW5ndGggLSAxLCBjb21tYW5kSW5kZXgpO1xuICAgICAgY29tbWFuZEluZGV4ID0gTWF0aC5tYXgoLTEsIGNvbW1hbmRJbmRleCk7XG4gICAgICAkKCcjY29uc29sZSBmb3JtIGlucHV0JykudmFsKGNvbW1hbmRTdGFja1tjb21tYW5kSW5kZXhdKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZnVuY3Rpb24gZXhlY3V0ZSgpIHtcbiAgICAkKCcjY29uc29sZSAjb3V0cHV0JykuZW1wdHkoKTtcbiAgICB2YXIgZXJyb3JzID0gaGFzRXJyb3JzKCk7XG4gICAgdmFyIGVycm9yID0gZXJyb3JzWzBdO1xuICAgIGlmIChlcnJvcil7XG4gICAgICByZXR1cm4gcmVuZGVyKFxuICAgICAgICBlcnJvci5ub2RlLmlubmVyVGV4dCB8fCAkKGVycm9yLm5vZGUpLnRleHQoKSwgICAgLy8gY2hyb21lIHx8IGZpcmVmb3hcbiAgICAgICAgeyBlcnJvcjogdHJ1ZSwgbGluZU51bTogZWRpdG9yLmdldExpbmVOdW1iZXIoZXJyb3IubGluZSkgKyAxIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgdmFyIGNvZGUgPSBlZGl0b3IuZ2V0VmFsdWUoKTtcblxuICAgIHdyYXBMb2dPdXRwdXQoKCkgPT4ge1xuXG4gICAgICBldmFsKGNvZGUpO1xuXG4gICAgICAkKCcjY29uc29sZSBmb3JtJykub2ZmKCdzdWJtaXQnKTtcbiAgICAgICQoJyNjb25zb2xlIGZvcm0nKS5vbignc3VibWl0JywgZXZhbCgnKCcrU3RyaW5nKHJlcGwpKycpJykpO1xuICAgICAgLy8gdGhpcyBldmFsL1N0cmluZyB0aGluZyBpcyBwcmV0dHkgd2VpcmQgcmlnaHQ/IEl0J3MgYmFzaWNhbGx5IGEgaGFjayB0aGF0IFJvYiBhbmQgSSBkZXZpc2VkIHRvIFwiY2xvbmVcIiBhIGZ1bmN0aW9uLiBJdCB0YWtlcyBhIGZ1bmMsIGNvbnZlcnRzIHRvIGEgc3RyaW5nLCB0aGVuIHJlZGVmaW5lcyBpdCBpbiBhbiBldmFsLiBUaGlzIGVmZmVjdGl2ZWx5IGFjaGlldmVzIGR5bmFtaWMgc2NvcGluZy4gQnkgcmVkZWZpbmluZyBpdCBpbiB0aGlzIHNjb3BlLCBJIGNhbiBhY2Nlc3MgdGhlIGxvY2FsIHZhcmlhYmxlcyBoZXJlIGluc3RlYWQgb2YgdGhlIGRlZmF1bHQgbGV4aWNhbCBzY29waW5nIGJlaGF2aW9yLiBUaGUgcmVhc29uIEkgd2FudCB0aGlzIGlzIHNvIHRoZSByZXBsIGhhcyBhY2Nlc3MgdG8gdGhlIHZhcmlhYmxlcyBkZWZpbmVkIGluIHRoZSBDb2RlTWlycm9yIGVkaXRvci5cblxuICAgIH0pO1xuXG4gIH1cbn1cblxuLy8gYWxsb3cgdXNlciB0byBhY2Nlc3MgcHJldmlvdXNseSBlbnRlcmVkIGNvbW1hbmRzXG52YXIgY29tbWFuZFN0YWNrID0gW107XG52YXIgY29tbWFuZEluZGV4ID0gLTE7XG5cbmZ1bmN0aW9uIHJlbmRlcih0ZXh0LCBvcHRpb25zPXt9KSB7XG4gIGlmICh0eXBlb2YgdGV4dCA9PT0gJ29iamVjdCcpIHtcbiAgICB0ZXh0ID0gSlNPTi5zdHJpbmdpZnkodGV4dCwgbnVsbCwgNCk7XG4gIH0gZWxzZSB7XG4gICAgdGV4dCA9IFN0cmluZyh0ZXh0KTtcbiAgfVxuXG4gIC8vIFRoaXMgcGFydGljdWxhciBlcnIgbWVzc2FnZSBpcyBwb29yLiBNYWtlIGl0IGEgYml0IG1vcmUgaGVscGZ1bFxuICB0ZXh0ID0gdGV4dC5yZXBsYWNlKFxuICAgIC9VbmV4cGVjdGVkIGVuZCBvZiBpbnB1dC8sIFxuICAgICdVbmV4cGVjdGVkIGVuZCBvZiBpbnB1dDogcHJvYmFibHkgYW4gZXh0cmEgb3BlbmluZyBicmFja2V0IG9yIG9wZXJhdG9yLidcbiAgKTtcblxuICBpZiAob3B0aW9ucy5hcnJvdylcbiAgICB0ZXh0ID0gYD0+ICR7dGV4dH1gO1xuICBpZiAob3B0aW9ucy5lcnJvcilcbiAgICB0ZXh0ID0gYDxzcGFuIGNsYXNzPVwiZXJyb3JcIj4ke3RleHR9PC9zcGFuPmA7XG4gIGlmIChvcHRpb25zLmxpbmVOdW0pXG4gICAgdGV4dCA9IHRleHQucmVwbGFjZSgvIS8sIGBsaW5lICR7b3B0aW9ucy5saW5lTnVtfSAtIGApO1xuICAkKCcjY29uc29sZSAjb3V0cHV0JykuYXBwZW5kKGA8cD4ke3RleHR9PC9wPmApO1xuXG4gIC8vIHNjcm9sbCB0byBib3R0b20gaW4gb3JkZXIgdG8gc2hvdyBtb3N0IHJlY2VudFxuICB2YXIgY29uc29sZURPTSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb25zb2xlJyk7XG4gIGNvbnNvbGVET00uc2Nyb2xsVG9wID0gY29uc29sZURPTS5zY3JvbGxIZWlnaHQ7XG59XG5cbmZ1bmN0aW9uIHJlcGwoZSkge1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIHZhciBjb2RlID0gJChlLnRhcmdldCkuZmluZCgnaW5wdXQnKS52YWwoKTtcbiAgY29tbWFuZFN0YWNrLnVuc2hpZnQoY29kZSk7XG4gIGNvbW1hbmRTdGFjayA9IGNvbW1hbmRTdGFjay5zbGljZSgwLCA5KTtcbiAgY29tbWFuZEluZGV4ID0gLTE7XG4gIHdyYXBMb2dPdXRwdXQoKCkgPT4ge1xuICAgICQoZS50YXJnZXQpLmZpbmQoJ2lucHV0JykudmFsKCcnKTtcblxuICAgIC8vdmFyIGRlY2xhcmF0aW9ucyBkb24ndCB3b3JrIGluIHRoZSBSRVBMLCBzbyBnaXZlIHRoZW0gYW4gZXJyb3JcbiAgICBpZiAoY29kZS5tYXRjaCgvdmFyLykpIHJldHVybiByZW5kZXIoJ2RvIHZhciBkZWNsYXJhdGlvbnMgaW4gdGhlIGVkaXRvciBhYm92ZScsIHsgZXJyb3I6IHRydWUgfSk7XG5cbiAgICB2YXIgZXZhbEVycjtcbiAgICB2YXIgd3JhcHBlZENvZGUgPSBgdHJ5eyAke2NvZGV9XFxuIH0gY2F0Y2goZXJyKSB7IGV2YWxFcnIgPSBlcnIgfWA7XG4gICAgdHJ5IHtcbiAgICAgIHZhciBvdXRwdXQgPSBldmFsKHdyYXBwZWRDb2RlKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGV2YWxFcnIgPSBlcnI7XG4gICAgfVxuICAgIGlmIChldmFsRXJyKSB7XG4gICAgICByZW5kZXIoZXZhbEVyci5tZXNzYWdlLCB7IGVycm9yOiB0cnVlIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZW5kZXIob3V0cHV0LCB7IGFycm93OiB0cnVlIH0pO1xuICAgIH1cbiAgfSk7XG59XG5cbi8vIGV4ZWN1dGVzIGEgZnVuY3Rpb24gaW4gYSBjb250ZXh0IHdoZXJlIGFsbCBjYWxscyB0byBjb25zb2xlLmxvZyB3aWxsIHJlbmRlciB0byB0aGUgRE9NXG5mdW5jdGlvbiB3cmFwTG9nT3V0cHV0KGZ1bmMpIHtcbiAgY29uc29sZS5uYXRpdmVMb2cgPSBjb25zb2xlLmxvZztcbiAgY29uc29sZS5sb2cgPSBmdW5jdGlvbigpIHtcbiAgICBbXS5mb3JFYWNoLmNhbGwoYXJndW1lbnRzLCBsaW5lID0+IHtcbiAgICAgIHJlbmRlcihsaW5lKTtcbiAgICB9KTtcbiAgICBjb25zb2xlLm5hdGl2ZUxvZyguLi5hcmd1bWVudHMpO1xuICB9XG4gIGZ1bmMoKTtcbiAgY29uc29sZS5sb2cgPSBjb25zb2xlLm5hdGl2ZUxvZztcbn1cblxuXG5cblxuIiwid2luZG93Lm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuXG4gIHdpbmRvdy5lZGl0b3IgPSBDb2RlTWlycm9yLmZyb21UZXh0QXJlYShkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvZGUtZWRpdG9yXCIpLCB7XG4gICAgbGluZU51bWJlcnM6IHRydWUsXG4gICAgbW9kZTogXCJqYXZhc2NyaXB0XCIsXG4gICAgbWF0Y2hCcmFja2V0czogdHJ1ZSxcbiAgICBhdXRvQ2xvc2VCcmFja2V0czogdHJ1ZSxcbiAgICBrZXlNYXA6ICdzdWJsaW1lJyxcbiAgICB0YWJTaXplOiAyLFxuICAgIHRoZW1lOiAndHRjbidcbiAgfSk7XG5cbiAgdmFyIHdhaXRpbmc7XG4gIGVkaXRvci5vbihcImNoYW5nZVwiLCAoKSA9PiB7XG4gICAgY2xlYXJUaW1lb3V0KHdhaXRpbmcpO1xuICAgIHdhaXRpbmcgPSBzZXRUaW1lb3V0KHVwZGF0ZUVycm9ycywgODAwKTtcbiAgfSk7XG5cbiAgdmFyIHNhdmUgPSByZXF1aXJlKCcuL3NhdmUnKTtcbiAgc2F2ZShlZGl0b3IpO1xuXG59O1xuXG52YXIgZXJyV2lkZ2V0cyA9IFtdO1xuXG5mdW5jdGlvbiBjaGVja0ZvckVycm9ycygpIHtcbiAgcmV0dXJuIGVycldpZGdldHM7XG59XG5cbmZ1bmN0aW9uIHJlbmRlckVycihsaW5lTnVtLCBkZXNjLCBjb2xOdW0pIHtcbiAgaWYgKCFsaW5lTnVtKSB0aHJvdyBuZXcgRXJyb3IoJ0xpbmUgbnVtYmVyIGZvciByZW5kZXJFcnIgbXVzdCBiZSBhIHZhbGlkIGludGVnZXIuJyk7XG4gIHZhciBtc2cgPSAkKGBcbiAgICA8ZGl2IGNsYXNzPVwibGludC1lcnJvclwiPlxuICAgICAgPHNwYW4gY2xhc3M9XCJsaW50LWVycm9yLWljb25cIj4hPC9zcGFuPlxuICAgICAgJHtkZXNjfVxuICAgIDwvZGl2PlxuICBgKVswXTtcbiAgZXJyV2lkZ2V0cy5wdXNoKFxuICAgIGVkaXRvci5hZGRMaW5lV2lkZ2V0KGxpbmVOdW0gLSAxLCBtc2csIHsgY292ZXJHdXR0ZXI6IGZhbHNlLCBub0hTY3JvbGw6IHRydWUgfSlcbiAgKTtcbn1cblxuZnVuY3Rpb24gdXBkYXRlRXJyb3JzKCkge1xuICB2YXIgY29kZSA9IGVkaXRvci5nZXRWYWx1ZSgpO1xuXG4gIGVycldpZGdldHMuZm9yRWFjaChlcnIgPT4ge1xuICAgIGVkaXRvci5yZW1vdmVMaW5lV2lkZ2V0KGVycik7XG4gIH0pO1xuICBlcnJXaWRnZXRzID0gW107XG5cbiAgdHJ5IHtcbiAgICB2YXIgc3ludGF4ID0gZXNwcmltYS5wYXJzZShjb2RlLCB7IHRvbGVyYW50OiB0cnVlLCBsb2M6IHRydWUgfSk7XG4gICAgdmFyIGV2YWxFcnI7XG4gICAgdmFyIHdyYXBwZWRDb2RlID0gYHRyeXsgJHtjb2RlfVxcbiB9IGNhdGNoKGVycikgeyBldmFsRXJyID0gZXJyIH1gO1xuXG4gICAgZXZhbCh3cmFwcGVkQ29kZSk7XG4gICAgaWYgKGV2YWxFcnIpIHtcbiAgICAgIHZhciBzdGFjayA9IGV2YWxFcnIuc3RhY2s7XG4gICAgICB2YXIgZXJyTWVzc2FnZSA9IGV2YWxFcnIubWVzc2FnZSB8fCBzdGFjay5tYXRjaCgvLiovKVswXTsgICAgIC8vIGZpcmVmb3ggfHwgY2hyb21lXG4gICAgICB2YXIgbGluZU51bSA9IGV2YWxFcnIubGluZU51bWJlciB8fCBzdGFjay5tYXRjaCgvPGFub255bW91cz46KFxcZCspOlxcZCsvKVsxXTtcbiAgICAgIC8vIHZhciBjb2xOdW0gPSBldmFsRXJyLmNvbHVtbk51bWJlciB8fCBzdGFjay5tYXRjaCgvPGFub255bW91cz46XFxkKzooXFxkKykvKVswXTtcbiAgICAgIHJlbmRlckVycihsaW5lTnVtLCBlcnJNZXNzYWdlKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHJlbmRlckVycihlcnIubGluZU51bWJlciwgZXJyLmRlc2NyaXB0aW9uLCBlcnIuY29sdW1uKTtcbiAgfVxuXG59XG5cbndpbmRvdy5yZXBsYWNlRWRpdG9yVGV4dCA9IGZ1bmN0aW9uKHRleHQpIHtcbiAgZWRpdG9yLnJlcGxhY2VSYW5nZShcbiAgICB0ZXh0LFxuICAgIENvZGVNaXJyb3IuUG9zKGVkaXRvci5maXJzdExpbmUoKS0xKSxcbiAgICBDb2RlTWlycm9yLlBvcyhlZGl0b3IubGFzdExpbmUoKSlcbiAgKTtcbn1cblxudmFyIGV4ZWN1dGUgPSByZXF1aXJlKCcuL2V4ZWMnKTtcbmV4ZWN1dGUoY2hlY2tGb3JFcnJvcnMpO1xucmVxdWlyZSgnLi9yZXNpemUnKTsiLCIkKGRvY3VtZW50KS5yZWFkeShlID0+IHtcblxuICB2YXIgZWRpdG9ySGVpZ2h0ID0gJCgnI2VkaXRvci13cmFwJykuY3NzKCdoZWlnaHQnKTtcbiAgdmFyIGNvbnNvbGVIZWlnaHQgPSAkKCcjY29uc29sZScpLmNzcygnaGVpZ2h0Jyk7XG5cbiAgJCgnLnJlc2l6ZScpLmRyYWdnYWJsZSh7XG4gICAgYXhpczogJ3knLFxuICAgIFxuICAgIGRyYWc6IGUgPT4ge1xuICAgICAgdmFyIGNoYW5nZSA9IGUudGFyZ2V0LnN0eWxlLnRvcDtcblxuICAgICAgLy8gcHJldmVudCB0aGVtIGZyb20gcmVzaXppbmcgYmVsb3cgdGhlIGJvdHRvbSBvZiB0aGUgcGFnZVxuICAgICAgaWYgKFxuICAgICAgICBweFRvTnVtKGNoYW5nZSkgKyBweFRvTnVtKGVkaXRvckhlaWdodCkgPiBcbiAgICAgICAgd2luZG93LmlubmVySGVpZ2h0IC0gNTBcbiAgICAgICkgdGhyb3cgJyc7XG5cbiAgICAgIHZhciBvcGVyID0gJystJztcbiAgICAgIGlmIChjaGFuZ2VbMF0gPT09ICctJykge1xuICAgICAgICBjaGFuZ2UgPSBjaGFuZ2Uuc2xpY2UoMSk7XG4gICAgICAgIG9wZXIgPSAnLSsnO1xuICAgICAgfVxuICAgICAgJCgnI2VkaXRvci13cmFwJykuY3NzKCdoZWlnaHQnLCBgY2FsYygke2VkaXRvckhlaWdodH0gJHtvcGVyWzBdfSAke2NoYW5nZX0pYCk7XG4gICAgICAkKCcjY29uc29sZScpLmNzcygnaGVpZ2h0JywgYGNhbGMoJHtjb25zb2xlSGVpZ2h0fSAke29wZXJbMV19ICR7Y2hhbmdlfSlgKTtcbiAgICB9LFxuXG4gICAgc3RvcDogZSA9PiB7XG4gICAgICBlZGl0b3JIZWlnaHQgPSAkKCcjZWRpdG9yLXdyYXAnKS5jc3MoJ2hlaWdodCcpO1xuICAgICAgY29uc29sZUhlaWdodCA9ICQoJyNjb25zb2xlJykuY3NzKCdoZWlnaHQnKTtcbiAgICAgIGUudGFyZ2V0LnN0eWxlLnRvcCA9IDA7XG4gICAgICBlZGl0b3IucmVmcmVzaCgpO1xuICAgIH1cbiAgfSk7XG5cbiAgaGlkZUNvbnNvbGUoKTtcbiAgJCgnI2V4ZWN1dGUnKS5vbignY2xpY2snLCBzaG93Q29uc29sZSk7XG4gICQoJyNjbG9zZScpLm9uKCdjbGljaycsIGhpZGVDb25zb2xlKTtcblxufSk7XG5cbmZ1bmN0aW9uIHB4VG9OdW0oc3RyKSB7XG4gIHJldHVybiArc3RyLnNsaWNlKDAsIC0yKTtcbn1cblxud2luZG93LmhpZGVDb25zb2xlID0gZnVuY3Rpb24oKSB7XG4gICQoJyNibGFjay1zdHVmZicpLmhpZGUoKTtcbiAgJCgnI2VkaXRvci13cmFwJykuY3NzKCdoZWlnaHQnLCAnMTAwdmgnKTtcbn1cblxud2luZG93LnNob3dDb25zb2xlID0gZnVuY3Rpb24oKSB7XG4gICQoJyNibGFjay1zdHVmZicpLnNob3coKS5jc3MoJ2hlaWdodCcsICczMy41dmgnKTtcbiAgJCgnI2VkaXRvci13cmFwJykuY3NzKCdoZWlnaHQnLCAnNjV2aCcpO1xufSIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZWRpdG9yKSB7XG5cbiAgdmFyIHBhdGggPSB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWU7XG5cbiAgJCgnI3NhdmUnKS5vbignY2xpY2snLCBlID0+IHtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShwYXRoLCBlZGl0b3IuZ2V0VmFsdWUoKSk7XG4gICAgYWxlcnQoJ1Byb2dyZXNzIHNhdmVkLicpXG4gIH0pO1xuXG4gIHZhciBzYXZlZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKHBhdGgpO1xuICBpZiAoc2F2ZWQpIHtcbiAgICByZXBsYWNlRWRpdG9yVGV4dChzYXZlZCk7XG4gIH1cblxuICAkKCcjY2xlYXInKS5vbignY2xpY2snLCBlID0+IHtcbiAgICBpZiAoY29uZmlybSgnQXJlIHlvdSBzdXJlPyBUaGlzIHdpbGwgcmVtb3ZlIHNhdmVkIHByb2dyZXNzLicpKSB7XG4gICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShwYXRoKTtcbiAgICAgIHJlcGxhY2VFZGl0b3JUZXh0KCQoJyNjb2RlLWVkaXRvcicpLnZhbCgpKTtcbiAgICB9XG4gIH0pO1xuXG59Il19
