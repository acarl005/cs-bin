(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({"/home/andrew/Desktop/production/codesmith-bin/src/exec.js":[function(require,module,exports){
function render(e){e=String(e).replace(/Unexpected end of input/,"Unexpected end of input: make sure your brackets match"),$("#console #output").append("<p>"+e+"</p>");var o=document.getElementById("console");o.scrollTop=o.scrollHeight}function repl(e){e.preventDefault();var code=$(e.target).find("input").val();commandStack.unshift(code),commandStack=commandStack.slice(0,9),commandIndex=-1,wrapLogOutput(function(){$(e.target).find("input").val("");var evalErr,wrappedCode="try{ "+code+" } catch(err) { evalErr = err.stack }",output=eval(wrappedCode);if(evalErr){var errMessage=evalErr.match(/.*/)[0];render('<span class="error">'+errMessage+"</span>")}else render("=> "+output)})}function wrapLogOutput(e){console.nativeLog=console.log,console.log=function(){[].forEach.call(arguments,function(e){render(e)}),console.nativeLog.apply(console,arguments)},e(),console.log=console.nativeLog}module.exports=function(hasErrors){function execute(){$("#console #output").empty();var errors=hasErrors();if(errors[0])return render('<span class="error">'+errors[0].node.innerText+"</span>");var code=editor.getValue();wrapLogOutput(function(){eval(code),$("#console form").off("submit"),$("#console form").on("submit",eval("("+String(repl)+")"))})}$(document).ready(function(){$("#console form").on("submit",repl),$("#execute").on("click",execute),$(window).on("keypress",function(e){e.ctrlKey&&e.keyCode&&execute()}),$("#console form").on("keydown",function(e){if(38===e.keyCode)commandIndex++;else{if(40!==e.keyCode)return"we can ignore this";commandIndex--}commandIndex=Math.min(commandStack.length-1,commandIndex),commandIndex=Math.max(-1,commandIndex),$("#console form input").val(commandStack[commandIndex])})})};var commandStack=[],commandIndex=-1;

},{}],"/home/andrew/Desktop/production/codesmith-bin/src/repl.js":[function(require,module,exports){
function checkForErrors(){return errWidgets}function renderErr(r,e,t){var o=$('\n    <div class="lint-error">\n      <span class="lint-error-icon">!</span>\n      '+e+"\n    </div>\n  ")[0];errWidgets.push(editor.addLineWidget(r-1,o,{coverGutter:!1,noHScroll:!0}))}function updateErrors(){var code=editor.getValue();errWidgets.forEach(function(r){editor.removeLineWidget(r)}),errWidgets=[];try{var syntax=esprima.parse(code,{tolerant:!0,loc:!0}),evalErr,wrappedCode="try{ "+code+" } catch(err) { evalErr = err.stack }";if(eval(wrappedCode),evalErr){var errMessage=evalErr.match(/.*/)[0],_evalErr$match=evalErr.match(/<anonymous>:(\d+):(\d+)/),_evalErr$match2=_slicedToArray(_evalErr$match,3),__=_evalErr$match2[0],lineNum=_evalErr$match2[1],colNum=_evalErr$match2[2];renderErr(lineNum,errMessage,colNum)}}catch(err){renderErr(err.lineNumber,err.description,err.column)}}var _slicedToArray=function(){function r(r,e){var t=[],o=!0,a=!1,n=void 0;try{for(var i,c=r[Symbol.iterator]();!(o=(i=c.next()).done)&&(t.push(i.value),!e||t.length!==e);o=!0);}catch(d){a=!0,n=d}finally{try{!o&&c["return"]&&c["return"]()}finally{if(a)throw n}}return t}return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return r(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();window.onload=function(){window.editor=CodeMirror.fromTextArea(document.getElementById("code-editor"),{lineNumbers:!0,mode:"javascript",matchBrackets:!0,autoCloseBrackets:!0,keyMap:"sublime",tabSize:2,theme:"ttcn"});var r;editor.on("change",function(){clearTimeout(r),r=setTimeout(updateErrors,800)});var e=require("./save");e(editor)};var errWidgets=[];window.replaceEditorText=function(r){editor.replaceRange(r,CodeMirror.Pos(editor.firstLine()-1),CodeMirror.Pos(editor.lastLine()))};var execute=require("./exec");execute(checkForErrors);

},{"./exec":"/home/andrew/Desktop/production/codesmith-bin/src/exec.js","./save":"/home/andrew/Desktop/production/codesmith-bin/src/save.js"}],"/home/andrew/Desktop/production/codesmith-bin/src/save.js":[function(require,module,exports){
module.exports=function(e){var o=window.location.pathname;$("#save").on("click",function(a){localStorage.setItem(o,e.getValue()),alert("Progress saved.")});var a=localStorage.getItem(o);a&&replaceEditorText(a),$("#clear").on("click",function(e){confirm("Are you sure? This will remove saved progress.")&&(localStorage.removeItem(o),window.location.reload())})};

},{}]},{},["/home/andrew/Desktop/production/codesmith-bin/src/repl.js"])
//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIvaG9tZS9hbmRyZXcvRGVza3RvcC9wcm9kdWN0aW9uL2NvZGVzbWl0aC1iaW4vc3JjL2V4ZWMuanMiLCIvaG9tZS9hbmRyZXcvRGVza3RvcC9wcm9kdWN0aW9uL2NvZGVzbWl0aC1iaW4vc3JjL3JlcGwuanMiLCIvaG9tZS9hbmRyZXcvRGVza3RvcC9wcm9kdWN0aW9uL2NvZGVzbWl0aC1iaW4vc3JjL3NhdmUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQSxBQWlEQSxNQWpETSxDQUFDLENBaURFLE1BakRLLEVBaURFLENBakRDLEVBa0RmLEVBQU8sTUFsRGlCLENBa0RWLEdBQU0sS0FsRGEsRUFBRSxDQWtEUCwwQkFBMkIsMERBQ3ZELEVBQUUsb0JBQW9CLE9BQU0sTUFBTyxFQUFJLE9BQ3ZDLElBQUksR0FBVSxTQUFTLGVBQWUsVUFDdEMsR0FBUSxVQUFZLEVBQVEsYUFHOUIsUUFBUyxNQUFLLEdBQ1osRUFBRSxnQkFDRixJQUFJLE1BQU8sRUFBRSxFQUFFLFFBQVEsS0FBSyxTQUFTLEtBQ3JDLGNBQWEsUUFBUSxNQUNyQixhQUFlLGFBQWEsTUFBTSxFQUFHLEdBQ3JDLGFBQWUsR0FDZixjQUFjLFdBQ1osRUFBRSxFQUFFLFFBQVEsS0FBSyxTQUFTLElBQUksR0FDOUIsSUFBSSxTQUNBLFlBQVcsUUFBVyxLQUFJLHdDQUMxQixPQUFTLEtBQUssWUFDbEIsSUFBSSxRQUFTLENBQ1gsR0FBSSxZQUFhLFFBQVEsTUFBTSxNQUFNLEVBQ3JDLFFBQU0sdUJBQXdCLFdBQVUsZUFFeEMsUUFBTSxNQUFPLFVBTW5CLFFBQVMsZUFBYyxHQUNyQixRQUFRLFVBQVksUUFBUSxJQUM1QixRQUFRLElBQU0sY0FDVCxRQUFRLEtBQUssVUFBVyxTQUFBLEdBQ3pCLE9BQU8sS0FFVCxRQUFRLFVBQVMsTUFBakIsUUFBcUIsWUFFdkIsSUFDQSxRQUFRLElBQU0sUUFBUSxVQXRGeEIsT0FBTyxRQUFVLFNBQVMsV0F3QnhCLFFBQVMsV0FDUCxFQUFFLG9CQUFvQixPQUN0QixJQUFJLFFBQVMsV0FDYixJQUFJLE9BQU8sR0FDVCxNQUFPLFFBQU0sdUJBQXdCLE9BQU8sR0FBRyxLQUFLLFVBQVMsVUFFL0QsSUFBSSxNQUFPLE9BQU8sVUFFbEIsZUFBYyxXQUVaLEtBQUssTUFFTCxFQUFFLGlCQUFpQixJQUFJLFVBQ3ZCLEVBQUUsaUJBQWlCLEdBQUcsU0FBVSxLQUFLLElBQUksT0FBTyxNQUFNLFFBcEMxRCxFQUFFLFVBQVUsTUFBTSxXQUVoQixFQUFFLGlCQUFpQixHQUFHLFNBQVUsTUFDaEMsRUFBRSxZQUFZLEdBQUcsUUFBUyxTQUMxQixFQUFFLFFBQVEsR0FBRyxXQUFZLFNBQUEsR0FDdkIsRUFBRSxTQUFXLEVBQUUsU0FBVyxZQUc1QixFQUFFLGlCQUFpQixHQUFHLFVBQVcsU0FBQSxHQUMvQixHQUFrQixLQUFkLEVBQUUsUUFDSixtQkFDSyxDQUFBLEdBQWtCLEtBQWQsRUFBRSxRQUdYLE1BQU8sb0JBRlAsZ0JBS0YsYUFBZSxLQUFLLElBQUksYUFBYSxPQUFTLEVBQUcsY0FDakQsYUFBZSxLQUFLLElBQUksR0FBSSxjQUM1QixFQUFFLHVCQUF1QixJQUFJLGFBQWEsbUJBMEJoRCxJQUFJLGlCQUNBLGFBQWU7QUE5Q2pCLEdBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxLQUFLLENBQUMsWUFBTTs7QUFFdEIsQUNzQkosS0R0QkssQ0FBQyxFQ3NCRyxhRHRCWSxDQUFDLENBQUMsRUFBRSxDQUFDLEFDdUJ4QixNQUFPLEVEdkJ5QixFQUFFLElBQUksQ0FBQyxDQUFDLEVDMEIxQyxRQUFTLFdBQVUsRUFBUyxFQUFNLEdBQ2hDLEdBQUksR0FBTSxFQUFDLHVGQUdMLEVBQUksb0JBRVAsRUFDSCxZQUFXLEtBQ1QsT0FBTyxjQUFjLEVBQVUsRUFBRyxHQUFPLGFBQWEsRUFBTyxXQUFXLEtBSTVFLFFBQVMsZ0JBQ1AsR0FBSSxNQUFPLE9BQU8sVUFFbEIsWUFBVyxRQUFRLFNBQUEsR0FDakIsT0FBTyxpQkFBaUIsS0FFMUIsYUFFQSxLQUNFLEdBQUksUUFBUyxRQUFRLE1BQU0sTUFBUSxVQUFVLEVBQU0sS0FBSyxJQUVwRCxRQUNBLFlBQVcsUUFBVyxLQUFJLHVDQUU5QixJQURBLEtBQUssYUFDRCxRQUFTLENBQ1gsR0FBSSxZQUFhLFFBQVEsTUFBTSxNQUFNLGtCQUNULFFBQVEsTUFBTSw0RUFBckMsR0FBRSxnQkFBQSxHQUFFLFFBQU8sZ0JBQUEsR0FBRSxPQUFNLGdCQUFBLEVBQ3hCLFdBQVUsUUFBUyxXQUFZLFNBRWpDLE1BQU8sS0FDUCxVQUFVLElBQUksV0FBWSxJQUFJLFlBQWEsSUFBSSxxY0E3RG5ELFFBQU8sT0FBUyxXQUVkLE9BQU8sT0FBUyxXQUFXLGFBQWEsU0FBUyxlQUFlLGdCQUM5RCxhQUFhLEVBQ2IsS0FBTSxhQUNOLGVBQWUsRUFDZixtQkFBbUIsRUFDbkIsT0FBUSxVQUNSLFFBQVMsRUFDVCxNQUFPLFFBR1QsSUFBSSxFQUNKLFFBQU8sR0FBRyxTQUFVLFdBQ2xCLGFBQWEsR0FDYixFQUFVLFdBQVcsYUFBYyxNQUdyQyxJQUFJLEdBQU8sUUFBUSxTQUNuQixHQUFLLFFBSVAsSUFBSSxjQTJDSixRQUFPLGtCQUFvQixTQUFTLEdBQ2xDLE9BQU8sYUFDTCxFQUNBLFdBQVcsSUFBSSxPQUFPLFlBQVksR0FDbEMsV0FBVyxJQUFJLE9BQU8sYUFJMUIsSUFBSSxTQUFVLFFBQVEsU0FDdEIsU0FBUTtBRHZFSixLQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsQ0FBQztBQUNuQyxBQ0xKLEtES0ssQ0FBQyxBQ0xBLENBQUMsS0RLSyxDQUFDLEFDTEEsQ0RLQyxFQUFFLEFDTEEsQ0RLQyxVQUFVLENDTEEsQ0RLRSxVQUFBLENBQUMsRUFBSTtBQUM1QixBRU5OLE1BQU0sQ0ZNQyxBRU5BLENGTUMsTUVOTSxDRk1DLEFFTkUsRUFBQSxFRk1FLENBQUMsQ0FBQyxHRU5LLEdBQUEsQUFFeEIsQ0ZJMEIsRUVKdEIsRUZJMEIsQ0VOQSxBQUVuQixFQUZxQixJRk1LLENFSm5CLENGSXFCLENBQUMsT0VKYixRQUUzQixHQUFFLFNBQVMsR0FBRyxRQUFTLFNBQUEsR0FDckIsYUFBYSxRQUFRLEVBQU0sRUFBTyxZQUNsQyxNQUFNLG9CQUdSLElBQUksR0FBUSxhQUFhLFFBQVEsRUFDN0IsSUFDRixrQkFBa0IsR0FHcEIsRUFBRSxVQUFVLEdBQUcsUUFBUyxTQUFBLEdBQ2xCLFFBQVEsb0RBQ1YsYUFBYSxXQUFXLEdBQ3hCLE9BQU8sU0FBUztBRGZwQixLREtHLENBQUMsQ0FBQyxDQ0xDLENBQUMsTUFBTSxHQUFHLFVBQVUsQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDLGNBQWMsQ0FBQyxhQUFhLENBQUMsRUFBRTtBQUM5RSxBQ0RGLE1BQUksSUFBSSxHQUFHLEVEQ0UsRUFBRSxFQ0RFLENBQUMsQ0RDQyxPQ0RPLENBQUMsUUFBUSxDQUFDO0FGT2xDLEFDTEEsS0RLQyxDQUFDLEVDTEUsRUFBRSxXREtXLENBQUMsQUNMQSxDREtDLEVBQUUsQ0FBQyxTQUFTLEVBQUUsVUFBQSxDQUFDLEVBQUk7QUFDcEMsQUNMRixBQ0RGLEdBQUMsQ0FBQyxNRk1NLENBQUMsQUVOQSxDRk1DLEFFTkEsQ0FBQyxFQUFFLENBQUMsQ0RDQyxFREtFLEFDTEEsSUFBSSxBQ0RBLENGTUMsQ0VOQyxDRk1DLEVBQUUsT0VOSCxDQUFDLEVBQUk7QURFMUIsQUNEQSxnQkFBWSxDQUFDLElEQ0ksRUFBRSxDQ0RDLENBQUMsRURDRSxFQ0RFLEVBQUUsTUFBTSxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUM7QUZNMUMsQUNKSixBQ0RBLFNBQUssQ0RDQyxBQ0RBLEVEQ0UsUURJUSxDQ0pDLENESUMsQ0FBQyxJRUxJLENBQUMsQ0FBQTtBREV4QixHQ0RELENBQUMsQ0FBQyxFRktFLElDSkksRURJRSxBQ0pBLENBQUMsR0RJRyxDQUFDLENBQUMsT0FBTyxLQUFLLEVBQUUsRUFBRTtBQ0gvQixTQUFLLEVBQUUsTUFBTTtBRElULEFFSk4sR0RDQyxDQUFDLENBQUMsQ0NEQyxLQUFLLEdBQUcsTUZJTSxFQUFFLENBQUMsR0VKRyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUN2QyxNQUFJLENGSUMsSUVKSSxFRklFLEFFSkE7QUZLTCxBQ0hOLEFDREUsTURDRSxPQUFPLENBQUMsQ0RHQyxNRUpNLENBQUMsS0FBSyxDQUFDLENBQUMsTUZJTSxDQUFDO0FDRmxDLEdDREMsSUZJSSxDQ0hDLENBQUMsRUFBRSxDQUFDLFFBQVEsRUFBRSxZQUFNO0FBQ3hCLGdCQUFZLENBQUMsT0FBTyxDQUFDLENBQUM7QURJcEIsQUNIRixBQ0RGLEdBQUMsQ0FBQyxPRENPLENDREMsQ0FBQyxDRENDLEFDREEsRUFBRSxDQUFDLENGSUMsR0FBRyxHQ0hHLEFDREEsQ0ZJQyxBQ0hBLENER0MsQUVKQSxHRklHLENBQUMsTUVKSixDRENXLEFDRFYsRURDWSxBQ0RSLEdGSVcsQUNIQSxDREdDLEFDSEEsQ0FBQyxLREdLLEdBQUcsQ0FBQyxFQUFFLFlBQVksQ0FBQyxDQUFDO0FBQy9ELEFFSkYsR0RDRCxDQUFDLENBQUMsR0NERyxPQUFPLENBQUMsRUZJRSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsWUFBWSxDQUFDLENBQUMsZ0JFSmdCLENBQUMsRUFBRTtBRks3RCxBRUpBLE9GSUMsQ0FBQyxVRUpVLENBQUMsVUZJVSxBRUpBLENGSUMsQUVKQSxDRklDLEdBQUcsQUVKQSxDRklDLEFFSkEsQ0FBQyxXRklXLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQztBQ0Y3RCxBQ0RJLEtGSUQsQ0FBQyxBQ0hBLENER0MsR0NIRyxFQ0RFLENEQ0MsQUNEQSxPRENPLENBQUMsQUNEQSxDQUFDLE1BQU0sQ0RDQyxDQUFDLEFDREEsQ0RDQyxBQ0RBO0FERTdCLEdER0MsQ0FBQyxDQUFDLEFFSkEsQ0RDQyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0NBRWQsQ0FBQyxDQ0ZDLENBQUMsQ0FBQztBRktILENFSEQsQ0FBQSxTRkdVLE9BQU8sR0FBRztBQUNqQixBQ0ZKLElBQUksQ0RFQyxDQUFDLFFDRlEsR0FBRyxFQUFFLENBQUMsSURFSSxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUM7QUFDOUIsUUFBSSxNQUFNLEdBQUcsU0FBUyxFQUFFLENBQUM7QUFDekIsQUNGSixRREVRLENDRkMsS0RFSyxDQUFDLENBQUMsQ0FBQyxFQUNYLElDSGlCLEdER1YsQUNIYSxNREdQLDBCQUF3QixNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFNBQVMsYUFBVSxDQUFDO0FDRjVFLFNBQU8sVUFBVSxDQUFDO0FESWhCLENDSEgsT0RHTyxJQUFJLEdBQUcsTUFBTSxDQUFDLFFBQVEsRUFBRSxDQUFDOztBQUU3QixBQ0hKLFNBQVMsUURHUSxDQUFDLEFDSEEsQ0FBQyxPQUFPLEVBQUUsRURHSixFQ0hRLEVBQUUsTUFBTSxFQUFFO0FBQ3hDLE1BQUksR0FBRyxHQUFHLENBQUMsOEZBR0wsSUFBSSxzQkFFUixDQUFDLENBQUMsQ0FBQyxDQUFDO0FEREYsQUNFSixVREZRLENBQUMsQ0NFQyxDQUFDLEVERkUsQ0FBQyxDQUFDLEFDRUEsQ0FDYixNQUFNLENBQUMsYUFBYSxDQUFDLE9BQU8sR0FBRyxDQUFDLEVBQUUsR0FBRyxFQUFFLEVBQUUsV0FBVyxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FDaEYsQ0FBQztDQUNIO0FESEssT0FBQyxDQUFDLGVBQWUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUNqQyxBQ0lOLE9ESk8sQ0FBQyxDQ0lDLFlBQVksRURKRSxDQUFDLEFDSUEsQ0RKQyxFQUFFLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxHQUFHLEdBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7QUNLaEUsTUFBSSxJQUFJLEdBQUcsTUFBTSxDQUFDLFFBQVEsRUFBRSxDQUFDO0tERjFCLENBQUMsQ0FBQztBQ0lMLEdERkMsU0NFUyxDQUFDLE9BQU8sQ0FBQyxVQUFBLEdBQUcsRUFBSTtBQUN4QixDREZILENBQUEsUUNFUyxDQUFDLGdCQUFnQixDQUFDLEdBQUcsQ0FBQyxDQUFDO0dBQzlCLENBQUMsQ0FBQztBQUNILFlBQVUsR0FBRyxFQUFFLENBQUM7QUREbEIsSUFBSSxZQUFZLEdBQUcsRUFBRSxDQUFDO0FBQ3RCLEFDRUUsSURGRSxFQ0VFLFVERlUsR0FBRyxDQUFDLENBQUMsQ0FBQztBQ0dsQixRQUFJLE1BQU0sR0FBRyxPQUFPLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsR0FBRyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUM7QUREcEUsU0FBUyxNQUFNLENBQUMsSUFBSSxFQUFFO0FBQ3BCLEFDRUUsTURGRSxFQ0VFLENERkMsTUFBTSxBQ0VBLENERkMsQUNFQSxJREZJLENBQUMsQ0FBQyxPQUFPLENBQUMseUJBQXlCLEVBQUUsd0RBQXdELENBQUMsQ0FBQTtBQUNoSCxBQ0VFLEdERkQsQ0FBQyxJQ0VJLFdBQVcsR0RGRyxDQUFDLENBQUMsTUFBTSxFQ0VBLElBQUksR0RGRyxJQUFJLFVBQU8sQ0FBQyx3QkNFd0IsQ0FBQztBRER4RSxBQ0VFLE1ERkUsRUNFRSxDQUFDLElERkksR0FBRyxJQ0VJLENBQUMsQ0FBQyxFREZFLENBQUMsY0FBYyxDQUFDLFNBQVMsQ0FBQyxDQUFDO0FBQ2pELEFDRUUsUUFBSSxDREZDLENBQUMsS0NFSyxFQUFFLEVERkUsR0FBRyxPQUFPLENBQUMsWUFBWSxDQUFDO0FDR3JDLENERkwsU0NFUyxVQUFVLEdBQUcsT0FBTyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQzs7QURBOUMsU0FBUyxJQUFJLENBQUMsQ0FBQyxFQUFFLFVDQ2lCLE9BQU8sQ0FBQyxLQUFLLENBQUMseUJBQXlCLENBQUM7QURBeEUsR0FBQyxDQUFDLGNBQWMsRUFBRSxDQUFDO0FBQ25CLE1BQUksSUFBSSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDO0FBQzNDLGNBQVksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDM0IsVUNIUyxFQUFFLEVER0MsR0FBRyxZQUFZLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztBQUN4QyxVQ0phLElESUQsR0FBRyxBQ0pLLENESUosQ0FBQyxDQUFDO0FBQ2xCLFVDTHNCLEtES1QsQ0FBQyxBQ0xjLFlES1I7QUFDbEIsS0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQ2xDLEFDTkUsUURNRSxPQUFPLEFDTkEsQ0RNQyxBQ05BLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxDQUFDLENBQUM7QURPekMsS0NOQyxHRE1HLFdBQVcsYUFBVyxJQUFJLDBDQUF1QyxDQUFDO0FBQ3RFLEdDTkQsQ0FBQyxJRE1JLEdDTkcsR0RNRyxBQ05BLEVBQUUsQ0RNQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7QUFDL0IsQUNOQSxRRE1JLEtDTkssQ0FBQyxDRE1DLEVBQUUsQUNOQSxDQUFDLFVBQVUsRUFBRSxHQUFHLENBQUMsV0FBVyxFQUFFLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQztBRE9yRCxHQ05ILE9ETU8sVUFBVSxHQUFHLE9BQU8sQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDeEMsQ0NMTCxXREtXLDBCQUF3QixVQUFVLGFBQVUsQ0FBQztLQUNwRCxNQUFNO0FBQ0wsQUNMTixNQUFNLENBQUMsS0RLSyxTQUFPLEdDTEssR0RLQyxBQ0xFLENES0MsQ0FBQyxRQ0xPLElBQUksRUFBRTtBQUN4QyxLREtHLEdDTEcsQ0FBQyxZQUFZLENBQ2pCLElBQUksRUFDSixVQUFVLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxTQUFTLEVBQUUsR0FBQyxDQUFDLENBQUMsRUFDcEMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FDbEMsQ0FBQztDQUNILENBQUEsQ0RDRSxDQUFDLENBQUM7Q0FDSjtBQ0FELElBQUksT0FBTyxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUNoQyxPQUFPLENBQUMsY0FBYyxDQUFDLENBQUM7QURFeEIsU0FBUyxhQUFhLENBQUMsSUFBSSxFQUFFO0FBQzNCLFNBQU8sQ0FBQyxTQUFTLEdBQUcsT0FBTyxDQUFDLEdBQUcsQ0FBQztBQUNoQyxTQUFPLENBQUMsR0FBRyxHQUFHLFlBQVc7QUFDdkIsTUFBRSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFLFVBQUEsSUFBSSxFQUFJO0FBQ2pDLFlBQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQztLQUNkLENBQUMsQ0FBQztBQUNILFdBQU8sQ0FBQyxTQUFTLE1BQUEsQ0FBakIsT0FBTyxFQUFjLFNBQVMsQ0FBQyxDQUFDO0dBQ2pDLENBQUE7QUFDRCxNQUFJLEVBQUUsQ0FBQztBQUNQLFNBQU8sQ0FBQyxHQUFHLEdBQUcsT0FBTyxDQUFDLFNBQVMsQ0FBQztDQUNqQyIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGhhc0Vycm9ycykge1xuICAkKGRvY3VtZW50KS5yZWFkeSgoKSA9PiB7XG5cbiAgICAkKCcjY29uc29sZSBmb3JtJykub24oJ3N1Ym1pdCcsIHJlcGwpO1xuICAgICQoJyNleGVjdXRlJykub24oJ2NsaWNrJywgZXhlY3V0ZSk7XG4gICAgJCh3aW5kb3cpLm9uKCdrZXlwcmVzcycsIGUgPT4ge1xuICAgICAgZS5jdHJsS2V5ICYmIGUua2V5Q29kZSAmJiBleGVjdXRlKCk7ICAgLy9leGVjdXRlIGlmIHRoZXkgcHJlc3MgY3RybCtiXG4gICAgfSk7XG5cbiAgICAkKCcjY29uc29sZSBmb3JtJykub24oJ2tleWRvd24nLCBlID0+IHtcbiAgICAgIGlmIChlLmtleUNvZGUgPT09IDM4KSB7ICAvL3VwIGFycm93IGtleVxuICAgICAgICBjb21tYW5kSW5kZXgrKztcbiAgICAgIH0gZWxzZSBpZiAoZS5rZXlDb2RlID09PSA0MCkgeyAgLy9kb3duIGFycm93IGtleVxuICAgICAgICBjb21tYW5kSW5kZXgtLTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAnd2UgY2FuIGlnbm9yZSB0aGlzJztcbiAgICAgIH1cbiAgICAgIC8vIG1ha2Ugc3VyZSBjb21tYW5kSW5kZXggc3RheXMgaW4gcmVhc29uYWJsZSByYW5nZVxuICAgICAgY29tbWFuZEluZGV4ID0gTWF0aC5taW4oY29tbWFuZFN0YWNrLmxlbmd0aCAtIDEsIGNvbW1hbmRJbmRleCk7XG4gICAgICBjb21tYW5kSW5kZXggPSBNYXRoLm1heCgtMSwgY29tbWFuZEluZGV4KTtcbiAgICAgICQoJyNjb25zb2xlIGZvcm0gaW5wdXQnKS52YWwoY29tbWFuZFN0YWNrW2NvbW1hbmRJbmRleF0pO1xuICAgIH0pO1xuICB9KTtcblxuICBmdW5jdGlvbiBleGVjdXRlKCkge1xuICAgICQoJyNjb25zb2xlICNvdXRwdXQnKS5lbXB0eSgpO1xuICAgIHZhciBlcnJvcnMgPSBoYXNFcnJvcnMoKTtcbiAgICBpZiAoZXJyb3JzWzBdKVxuICAgICAgcmV0dXJuIHJlbmRlcihgPHNwYW4gY2xhc3M9XCJlcnJvclwiPiR7ZXJyb3JzWzBdLm5vZGUuaW5uZXJUZXh0fTwvc3Bhbj5gKTtcblxuICAgIHZhciBjb2RlID0gZWRpdG9yLmdldFZhbHVlKCk7XG5cbiAgICB3cmFwTG9nT3V0cHV0KCgpID0+IHtcblxuICAgICAgZXZhbChjb2RlKTtcblxuICAgICAgJCgnI2NvbnNvbGUgZm9ybScpLm9mZignc3VibWl0Jyk7XG4gICAgICAkKCcjY29uc29sZSBmb3JtJykub24oJ3N1Ym1pdCcsIGV2YWwoJygnK1N0cmluZyhyZXBsKSsnKScpKTtcbiAgICAgIC8vIHRoaXMgZXZhbC9TdHJpbmcgdGhpbmcgaXMgcHJldHR5IHdlaXJkIHJpZ2h0PyBJdCdzIGJhc2ljYWxseSBhIGhhY2sgdGhhdCBSb2IgYW5kIEkgZGV2aXNlZCB0byBcImNsb25lXCIgYSBmdW5jdGlvbi4gSXQgdGFrZXMgYSBmdW5jLCBjb252ZXJ0cyB0byBhIHN0cmluZywgdGhlbiByZWRlZmluZXMgaXQgaW4gYW4gZXZhbC4gVGhpcyBlZmZlY3RpdmVseSBhY2hpZXZlcyBkeW5hbWljIHNjb3BpbmcuIEJ5IHJlZGVmaW5pbmcgaXQgaW4gdGhpcyBzY29wZSwgSSBjYW4gYWNjZXNzIHRoZSBsb2NhbCB2YXJpYWJsZXMgaGVyZSBpbnN0ZWFkIG9mIHRoZSBkZWZhdWx0IGxleGljYWwgc2NvcGluZyBiZWhhdmlvci4gVGhlIHJlYXNvbiBJIHdhbnQgdGhpcyBpcyBzbyB0aGUgcmVwbCBoYXMgYWNjZXNzIHRvIHRoZSB2YXJpYWJsZXMgZGVmaW5lZCBpbiB0aGUgQ29kZU1pcnJvciBlZGl0b3IuXG5cbiAgICB9KTtcblxuICB9XG59XG5cbi8vYWxsb3cgdXNlciB0byBhY2Nlc3MgcHJldmlvdXNseSBlbnRlcmVkIGNvbW1hbmRzXG52YXIgY29tbWFuZFN0YWNrID0gW107XG52YXIgY29tbWFuZEluZGV4ID0gLTE7XG5cbmZ1bmN0aW9uIHJlbmRlcih0ZXh0KSB7XG4gIHRleHQgPSBTdHJpbmcodGV4dCkucmVwbGFjZSgvVW5leHBlY3RlZCBlbmQgb2YgaW5wdXQvLCAnVW5leHBlY3RlZCBlbmQgb2YgaW5wdXQ6IG1ha2Ugc3VyZSB5b3VyIGJyYWNrZXRzIG1hdGNoJylcbiAgJCgnI2NvbnNvbGUgI291dHB1dCcpLmFwcGVuZChgPHA+JHt0ZXh0fTwvcD5gKTtcbiAgdmFyIGNvbnNvbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29uc29sZScpO1xuICBjb25zb2xlLnNjcm9sbFRvcCA9IGNvbnNvbGUuc2Nyb2xsSGVpZ2h0O1xufVxuXG5mdW5jdGlvbiByZXBsKGUpIHtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICB2YXIgY29kZSA9ICQoZS50YXJnZXQpLmZpbmQoJ2lucHV0JykudmFsKCk7XG4gIGNvbW1hbmRTdGFjay51bnNoaWZ0KGNvZGUpO1xuICBjb21tYW5kU3RhY2sgPSBjb21tYW5kU3RhY2suc2xpY2UoMCwgOSk7XG4gIGNvbW1hbmRJbmRleCA9IC0xO1xuICB3cmFwTG9nT3V0cHV0KCgpID0+IHtcbiAgICAkKGUudGFyZ2V0KS5maW5kKCdpbnB1dCcpLnZhbCgnJyk7XG4gICAgdmFyIGV2YWxFcnI7XG4gICAgdmFyIHdyYXBwZWRDb2RlID0gYHRyeXsgJHtjb2RlfSB9IGNhdGNoKGVycikgeyBldmFsRXJyID0gZXJyLnN0YWNrIH1gO1xuICAgIHZhciBvdXRwdXQgPSBldmFsKHdyYXBwZWRDb2RlKTtcbiAgICBpZiAoZXZhbEVycikge1xuICAgICAgdmFyIGVyck1lc3NhZ2UgPSBldmFsRXJyLm1hdGNoKC8uKi8pWzBdO1xuICAgICAgcmVuZGVyKGA8c3BhbiBjbGFzcz1cImVycm9yXCI+JHtlcnJNZXNzYWdlfTwvc3Bhbj5gKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVuZGVyKGA9PiAke291dHB1dH1gKTtcbiAgICB9XG4gIH0pO1xufVxuXG4vLyBleGVjdXRlcyBhIGZ1bmN0aW9uIGluIGEgY29udGV4dCB3aGVyZSBhbGwgY2FsbHMgdG8gY29uc29sZS5sb2cgd2lsbCByZW5kZXIgdG8gdGhlIERPTVxuZnVuY3Rpb24gd3JhcExvZ091dHB1dChmdW5jKSB7XG4gIGNvbnNvbGUubmF0aXZlTG9nID0gY29uc29sZS5sb2c7XG4gIGNvbnNvbGUubG9nID0gZnVuY3Rpb24oKSB7XG4gICAgW10uZm9yRWFjaC5jYWxsKGFyZ3VtZW50cywgbGluZSA9PiB7XG4gICAgICByZW5kZXIobGluZSk7XG4gICAgfSk7XG4gICAgY29uc29sZS5uYXRpdmVMb2coLi4uYXJndW1lbnRzKTtcbiAgfVxuICBmdW5jKCk7XG4gIGNvbnNvbGUubG9nID0gY29uc29sZS5uYXRpdmVMb2c7XG59XG5cblxuXG5cbiIsIndpbmRvdy5vbmxvYWQgPSBmdW5jdGlvbigpIHtcblxuICB3aW5kb3cuZWRpdG9yID0gQ29kZU1pcnJvci5mcm9tVGV4dEFyZWEoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb2RlLWVkaXRvclwiKSwge1xuICAgIGxpbmVOdW1iZXJzOiB0cnVlLFxuICAgIG1vZGU6IFwiamF2YXNjcmlwdFwiLFxuICAgIG1hdGNoQnJhY2tldHM6IHRydWUsXG4gICAgYXV0b0Nsb3NlQnJhY2tldHM6IHRydWUsXG4gICAga2V5TWFwOiAnc3VibGltZScsXG4gICAgdGFiU2l6ZTogMixcbiAgICB0aGVtZTogJ3R0Y24nXG4gIH0pO1xuXG4gIHZhciB3YWl0aW5nO1xuICBlZGl0b3Iub24oXCJjaGFuZ2VcIiwgKCkgPT4ge1xuICAgIGNsZWFyVGltZW91dCh3YWl0aW5nKTtcbiAgICB3YWl0aW5nID0gc2V0VGltZW91dCh1cGRhdGVFcnJvcnMsIDgwMCk7XG4gIH0pO1xuXG4gIHZhciBzYXZlID0gcmVxdWlyZSgnLi9zYXZlJyk7XG4gIHNhdmUoZWRpdG9yKTtcblxufTtcblxudmFyIGVycldpZGdldHMgPSBbXTtcblxuZnVuY3Rpb24gY2hlY2tGb3JFcnJvcnMoKSB7XG4gIHJldHVybiBlcnJXaWRnZXRzO1xufVxuXG5mdW5jdGlvbiByZW5kZXJFcnIobGluZU51bSwgZGVzYywgY29sTnVtKSB7XG4gIHZhciBtc2cgPSAkKGBcbiAgICA8ZGl2IGNsYXNzPVwibGludC1lcnJvclwiPlxuICAgICAgPHNwYW4gY2xhc3M9XCJsaW50LWVycm9yLWljb25cIj4hPC9zcGFuPlxuICAgICAgJHtkZXNjfVxuICAgIDwvZGl2PlxuICBgKVswXTtcbiAgZXJyV2lkZ2V0cy5wdXNoKFxuICAgIGVkaXRvci5hZGRMaW5lV2lkZ2V0KGxpbmVOdW0gLSAxLCBtc2csIHsgY292ZXJHdXR0ZXI6IGZhbHNlLCBub0hTY3JvbGw6IHRydWUgfSlcbiAgKTtcbn1cblxuZnVuY3Rpb24gdXBkYXRlRXJyb3JzKCkge1xuICB2YXIgY29kZSA9IGVkaXRvci5nZXRWYWx1ZSgpO1xuXG4gIGVycldpZGdldHMuZm9yRWFjaChlcnIgPT4ge1xuICAgIGVkaXRvci5yZW1vdmVMaW5lV2lkZ2V0KGVycik7XG4gIH0pO1xuICBlcnJXaWRnZXRzID0gW107XG5cbiAgdHJ5IHtcbiAgICB2YXIgc3ludGF4ID0gZXNwcmltYS5wYXJzZShjb2RlLCB7IHRvbGVyYW50OiB0cnVlLCBsb2M6IHRydWUgfSk7XG5cbiAgICB2YXIgZXZhbEVycjtcbiAgICB2YXIgd3JhcHBlZENvZGUgPSBgdHJ5eyAke2NvZGV9IH0gY2F0Y2goZXJyKSB7IGV2YWxFcnIgPSBlcnIuc3RhY2sgfWA7XG4gICAgZXZhbCh3cmFwcGVkQ29kZSk7XG4gICAgaWYgKGV2YWxFcnIpIHtcbiAgICAgIHZhciBlcnJNZXNzYWdlID0gZXZhbEVyci5tYXRjaCgvLiovKVswXTtcbiAgICAgIHZhciBbX18sIGxpbmVOdW0sIGNvbE51bV0gPSBldmFsRXJyLm1hdGNoKC88YW5vbnltb3VzPjooXFxkKyk6KFxcZCspLyk7XG4gICAgICByZW5kZXJFcnIobGluZU51bSwgZXJyTWVzc2FnZSwgY29sTnVtKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHJlbmRlckVycihlcnIubGluZU51bWJlciwgZXJyLmRlc2NyaXB0aW9uLCBlcnIuY29sdW1uKTtcbiAgfVxuXG59XG5cbndpbmRvdy5yZXBsYWNlRWRpdG9yVGV4dCA9IGZ1bmN0aW9uKHRleHQpIHtcbiAgZWRpdG9yLnJlcGxhY2VSYW5nZShcbiAgICB0ZXh0LFxuICAgIENvZGVNaXJyb3IuUG9zKGVkaXRvci5maXJzdExpbmUoKS0xKSxcbiAgICBDb2RlTWlycm9yLlBvcyhlZGl0b3IubGFzdExpbmUoKSlcbiAgKTtcbn1cblxudmFyIGV4ZWN1dGUgPSByZXF1aXJlKCcuL2V4ZWMnKTtcbmV4ZWN1dGUoY2hlY2tGb3JFcnJvcnMpOyIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZWRpdG9yKSB7XG5cbiAgdmFyIHBhdGggPSB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWU7XG5cbiAgJCgnI3NhdmUnKS5vbignY2xpY2snLCBlID0+IHtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShwYXRoLCBlZGl0b3IuZ2V0VmFsdWUoKSk7XG4gICAgYWxlcnQoJ1Byb2dyZXNzIHNhdmVkLicpXG4gIH0pO1xuXG4gIHZhciBzYXZlZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKHBhdGgpO1xuICBpZiAoc2F2ZWQpIHtcbiAgICByZXBsYWNlRWRpdG9yVGV4dChzYXZlZCk7XG4gIH1cblxuICAkKCcjY2xlYXInKS5vbignY2xpY2snLCBlID0+IHtcbiAgICBpZiAoY29uZmlybSgnQXJlIHlvdSBzdXJlPyBUaGlzIHdpbGwgcmVtb3ZlIHNhdmVkIHByb2dyZXNzLicpKSB7XG4gICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShwYXRoKTtcbiAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgICB9XG4gIH0pO1xuXG59Il19
