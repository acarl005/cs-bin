(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({"/home/andy/Desktop/production/cs-bin/src/exec.js":[function(require,module,exports){
function render(e){var o=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];e="object"==typeof e?JSON.stringify(e,null,4):String(e),e=e.replace(/Unexpected end of input/,"Unexpected end of input: probably an extra opening bracket or operator."),o.arrow&&(e="=> "+e),o.error&&(e='<span class="error">'+e+"</span>"),o.lineNum&&(e=e.replace(/!/,"line "+o.lineNum+" - ")),$("#console #output").append("<p>"+e+"</p>");var r=document.getElementById("console");r.scrollTop=r.scrollHeight}function repl(e){e.preventDefault();var code=$(e.target).find("input").val();commandStack.unshift(code),commandStack=commandStack.slice(0,9),commandIndex=-1,wrapLogOutput(function(){$(e.target).find("input").val("");var evalErr,wrappedCode="try{ "+code+"\n } catch(err) { evalErr = err }";try{var output=eval(wrappedCode)}catch(err){evalErr=err}evalErr?render(evalErr.message,{error:!0}):render(output,{arrow:!0})})}function wrapLogOutput(e){console.nativeLog=console.log,console.log=function(){[].forEach.call(arguments,function(e){render(e)}),console.nativeLog.apply(console,arguments)},e(),console.log=console.nativeLog}module.exports=function(hasErrors){function execute(){$("#console #output").empty();var errors=hasErrors(),error=errors[0];if(error)return render(error.node.innerText||$(error.node).text(),{error:!0,lineNum:editor.getLineNumber(error.line)+1});var code=editor.getValue();wrapLogOutput(function(){eval(code),$("#console form").off("submit"),$("#console form").on("submit",eval("("+String(repl)+")"))})}$(document).ready(function(){$("#console form").on("submit",repl),$("#execute").on("click",execute),$(window).on("keypress",function(e){e.ctrlKey&&e.keyCode&&execute()}),$("#console form").on("keydown",function(e){if(38===e.keyCode)commandIndex++;else{if(40!==e.keyCode)return"we can ignore this";commandIndex--}commandIndex=Math.min(commandStack.length-1,commandIndex),commandIndex=Math.max(-1,commandIndex),$("#console form input").val(commandStack[commandIndex])})})};var commandStack=[],commandIndex=-1;

},{}],"/home/andy/Desktop/production/cs-bin/src/repl.js":[function(require,module,exports){
function checkForErrors(){return errWidgets}function renderErr(r,e,t){if(!r)throw new Error("Line number for renderErr must be a valid integer.");var o=$('\n    <div class="lint-error">\n      <span class="lint-error-icon">!</span>\n      '+e+"\n    </div>\n  ")[0];errWidgets.push(editor.addLineWidget(r-1,o,{coverGutter:!1,noHScroll:!0}))}function updateErrors(){var code=editor.getValue();errWidgets.forEach(function(r){editor.removeLineWidget(r)}),errWidgets=[];try{var syntax=esprima.parse(code,{tolerant:!0,loc:!0}),evalErr,wrappedCode="try{ "+code+"\n } catch(err) { evalErr = err }";if(eval(wrappedCode),evalErr){var stack=evalErr.stack,errMessage=evalErr.message||stack.match(/.*/)[0],lineNum=evalErr.lineNumber||stack.match(/<anonymous>:(\d+):\d+/)[1];renderErr(lineNum,errMessage)}}catch(err){renderErr(err.lineNumber,err.description,err.column)}}window.onload=function(){window.editor=CodeMirror.fromTextArea(document.getElementById("code-editor"),{lineNumbers:!0,mode:"javascript",matchBrackets:!0,autoCloseBrackets:!0,keyMap:"sublime",tabSize:2,theme:"ttcn"});var r;editor.on("change",function(){clearTimeout(r),r=setTimeout(updateErrors,800)});var e=require("./save");e(editor)};var errWidgets=[];window.replaceEditorText=function(r){editor.replaceRange(r,CodeMirror.Pos(editor.firstLine()-1),CodeMirror.Pos(editor.lastLine()))};var execute=require("./exec");execute(checkForErrors);

},{"./exec":"/home/andy/Desktop/production/cs-bin/src/exec.js","./save":"/home/andy/Desktop/production/cs-bin/src/save.js"}],"/home/andy/Desktop/production/cs-bin/src/save.js":[function(require,module,exports){
module.exports=function(e){var o=window.location.pathname;$("#save").on("click",function(a){localStorage.setItem(o,e.getValue()),alert("Progress saved.")});var a=localStorage.getItem(o);a&&replaceEditorText(a),$("#clear").on("click",function(e){confirm("Are you sure? This will remove saved progress.")&&(localStorage.removeItem(o),window.location.reload())})};

},{}]},{},["/home/andy/Desktop/production/cs-bin/src/repl.js"])
//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIvaG9tZS9hbmR5L0Rlc2t0b3AvcHJvZHVjdGlvbi9jcy1iaW4vc3JjL2V4ZWMuanMiLCIvaG9tZS9hbmR5L0Rlc2t0b3AvcHJvZHVjdGlvbi9jcy1iaW4vc3JjL3JlcGwuanMiLCIvaG9tZS9hbmR5L0Rlc2t0b3AvcHJvZHVjdGlvbi9jcy1iaW4vc3JjL3NhdmUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQSxBQXNEQSxNQXRETSxDQUFDLENBc0RFLE1BdERLLEVBc0RFLENBdERDLEtBc0RLLEdBQU8sRUF0REgsUUFzREcsQ0F0RE0sRUFBRSxLQXNEUixHQUFBLFNBQUEsVUFBQSxNQUFHLFVBQUEsRUFFNUIsR0FEa0IsZ0JBQVQsR0FDRixLQUFLLFVBQVUsRUFBTSxLQUFNLEdBRTNCLE9BQU8sR0FJaEIsRUFBTyxFQUFLLFFBQ1YsMEJBQ0EsMkVBR0UsRUFBUSxRQUNWLEVBQUksTUFBUyxHQUNYLEVBQVEsUUFDVixFQUFJLHVCQUEwQixFQUFJLFdBQ2hDLEVBQVEsVUFDVixFQUFPLEVBQUssUUFBUSxJQUFHLFFBQVUsRUFBUSxRQUFPLFFBQ2xELEVBQUUsb0JBQW9CLE9BQU0sTUFBTyxFQUFJLE9BR3ZDLElBQUksR0FBYSxTQUFTLGVBQWUsVUFDekMsR0FBVyxVQUFZLEVBQVcsYUFHcEMsUUFBUyxNQUFLLEdBQ1osRUFBRSxnQkFDRixJQUFJLE1BQU8sRUFBRSxFQUFFLFFBQVEsS0FBSyxTQUFTLEtBQ3JDLGNBQWEsUUFBUSxNQUNyQixhQUFlLGFBQWEsTUFBTSxFQUFHLEdBQ3JDLGFBQWUsR0FDZixjQUFjLFdBQ1osRUFBRSxFQUFFLFFBQVEsS0FBSyxTQUFTLElBQUksR0FDOUIsSUFBSSxTQUNBLFlBQVcsUUFBVyxLQUFJLG1DQUM5QixLQUNFLEdBQUksUUFBUyxLQUFLLGFBQ2xCLE1BQU8sS0FDUCxRQUFVLElBRVIs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QUFXLENBQUMsQ0FBQztLQUNoQyxDQUFDLE9BQU8sR0FBRyxFQUFFO0FBQ1osYUFBTyxHQUFHLEdBQUcsQ0FBQztLQUNmO0FBQ0QsUUFBSSxPQUFPLEVBQUU7O0FBRVgsWUFBTSxDQUFDLE9BQU8sQ0FBQyxPQUFPLEVBQUUsRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQztLQUMxQyxNQUFNO0FBQ0wsWUFBTSxDQUFDLE1BQU0sRUFBRSxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDO0tBQ2pDO0dBQ0YsQ0FBQyxDQUFDO0NBQ0o7OztBQUdELFNBQVMsYUFBYSxDQUFDLElBQUksRUFBRTtBQUMzQixTQUFPLENBQUMsU0FBUyxHQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUM7QUFDaEMsU0FBTyxDQUFDLEdBQUcsR0FBRyxZQUFXO0FBQ3ZCLE1BQUUsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxVQUFBLElBQUksRUFBSTtBQUNqQyxZQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7S0FDZCxDQUFDLENBQUM7QUFDSCxXQUFPLENBQUMsU0FBUyxNQUFBLENBQWpCLE9BQU8sRUFBYyxTQUFTLENBQUMsQ0FBQztHQUNqQyxDQUFBO0FBQ0QsTUFBSSxFQUFFLENBQUM7QUFDUCxTQUFPLENBQUMsR0FBRyxHQUFHLE9BQU8sQ0FBQyxTQUFTLENBQUM7Q0FDakMiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihoYXNFcnJvcnMpIHtcbiAgJChkb2N1bWVudCkucmVhZHkoKCkgPT4ge1xuXG4gICAgJCgnI2NvbnNvbGUgZm9ybScpLm9uKCdzdWJtaXQnLCByZXBsKTtcbiAgICAkKCcjZXhlY3V0ZScpLm9uKCdjbGljaycsIGV4ZWN1dGUpO1xuICAgICQod2luZG93KS5vbigna2V5cHJlc3MnLCBlID0+IHtcbiAgICAgIGUuY3RybEtleSAmJiBlLmtleUNvZGUgJiYgZXhlY3V0ZSgpOyAgIC8vZXhlY3V0ZSBpZiB0aGV5IHByZXNzIGN0cmwrYiBpbiBjaHJvbWVcbiAgICB9KTtcblxuICAgICQoJyNjb25zb2xlIGZvcm0nKS5vbigna2V5ZG93bicsIGUgPT4ge1xuICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMzgpIHsgIC8vdXAgYXJyb3cga2V5XG4gICAgICAgIGNvbW1hbmRJbmRleCsrO1xuICAgICAgfSBlbHNlIGlmIChlLmtleUNvZGUgPT09IDQwKSB7ICAvL2Rvd24gYXJyb3cga2V5XG4gICAgICAgIGNvbW1hbmRJbmRleC0tO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuICd3ZSBjYW4gaWdub3JlIHRoaXMnO1xuICAgICAgfVxuICAgICAgLy8gbWFrZSBzdXJlIGNvbW1hbmRJbmRleCBzdGF5cyBpbiByZWFzb25hYmxlIHJhbmdlXG4gICAgICBjb21tYW5kSW5kZXggPSBNYXRoLm1pbihjb21tYW5kU3RhY2subGVuZ3RoIC0gMSwgY29tbWFuZEluZGV4KTtcbiAgICAgIGNvbW1hbmRJbmRleCA9IE1hdGgubWF4KC0xLCBjb21tYW5kSW5kZXgpO1xuICAgICAgJCgnI2NvbnNvbGUgZm9ybSBpbnB1dCcpLnZhbChjb21tYW5kU3RhY2tbY29tbWFuZEluZGV4XSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGZ1bmN0aW9uIGV4ZWN1dGUoKSB7XG4gICAgJCgnI2NvbnNvbGUgI291dHB1dCcpLmVtcHR5KCk7XG4gICAgdmFyIGVycm9ycyA9IGhhc0Vycm9ycygpO1xuICAgIHZhciBlcnJvciA9IGVycm9yc1swXTtcbiAgICBpZiAoZXJyb3Ipe1xuICAgICAgcmV0dXJuIHJlbmRlcihcbiAgICAgICAgZXJyb3Iubm9kZS5pbm5lclRleHQgfHwgJChlcnJvci5ub2RlKS50ZXh0KCksICAgIC8vIGNocm9tZSB8fCBmaXJlZm94XG4gICAgICAgIHsgZXJyb3I6IHRydWUsIGxpbmVOdW06IGVkaXRvci5nZXRMaW5lTnVtYmVyKGVycm9yLmxpbmUpICsgMSB9XG4gICAgICApO1xuICAgIH1cblxuICAgIHZhciBjb2RlID0gZWRpdG9yLmdldFZhbHVlKCk7XG5cbiAgICB3cmFwTG9nT3V0cHV0KCgpID0+IHtcblxuICAgICAgZXZhbChjb2RlKTtcblxuICAgICAgJCgnI2NvbnNvbGUgZm9ybScpLm9mZignc3VibWl0Jyk7XG4gICAgICAkKCcjY29uc29sZSBmb3JtJykub24oJ3N1Ym1pdCcsIGV2YWwoJygnK1N0cmluZyhyZXBsKSsnKScpKTtcbiAgICAgIC8vIHRoaXMgZXZhbC9TdHJpbmcgdGhpbmcgaXMgcHJldHR5IHdlaXJkIHJpZ2h0PyBJdCdzIGJhc2ljYWxseSBhIGhhY2sgdGhhdCBSb2IgYW5kIEkgZGV2aXNlZCB0byBcImNsb25lXCIgYSBmdW5jdGlvbi4gSXQgdGFrZXMgYSBmdW5jLCBjb252ZXJ0cyB0byBhIHN0cmluZywgdGhlbiByZWRlZmluZXMgaXQgaW4gYW4gZXZhbC4gVGhpcyBlZmZlY3RpdmVseSBhY2hpZXZlcyBkeW5hbWljIHNjb3BpbmcuIEJ5IHJlZGVmaW5pbmcgaXQgaW4gdGhpcyBzY29wZSwgSSBjYW4gYWNjZXNzIHRoZSBsb2NhbCB2YXJpYWJsZXMgaGVyZSBpbnN0ZWFkIG9mIHRoZSBkZWZhdWx0IGxleGljYWwgc2NvcGluZyBiZWhhdmlvci4gVGhlIHJlYXNvbiBJIHdhbnQgdGhpcyBpcyBzbyB0aGUgcmVwbCBoYXMgYWNjZXNzIHRvIHRoZSB2YXJpYWJsZXMgZGVmaW5lZCBpbiB0aGUgQ29kZU1pcnJvciBlZGl0b3IuXG5cbiAgICB9KTtcblxuICB9XG59XG5cbi8vIGFsbG93IHVzZXIgdG8gYWNjZXNzIHByZXZpb3VzbHkgZW50ZXJlZCBjb21tYW5kc1xudmFyIGNvbW1hbmRTdGFjayA9IFtdO1xudmFyIGNvbW1hbmRJbmRleCA9IC0xO1xuXG5mdW5jdGlvbiByZW5kZXIodGV4dCwgb3B0aW9ucz17fSkge1xuICBpZiAodHlwZW9mIHRleHQgPT09ICdvYmplY3QnKSB7XG4gICAgdGV4dCA9IEpTT04uc3RyaW5naWZ5KHRleHQsIG51bGwsIDQpO1xuICB9IGVsc2Uge1xuICAgIHRleHQgPSBTdHJpbmcodGV4dCk7XG4gIH1cblxuICAvLyBUaGlzIHBhcnRpY3VsYXIgZXJyIG1lc3NhZ2UgaXMgcG9vci4gTWFrZSBpdCBhIGJpdCBtb3JlIGhlbHBmdWxcbiAgdGV4dCA9IHRleHQucmVwbGFjZShcbiAgICAvVW5leHBlY3RlZCBlbmQgb2YgaW5wdXQvLCBcbiAgICAnVW5leHBlY3RlZCBlbmQgb2YgaW5wdXQ6IHByb2JhYmx5IGFuIGV4dHJhIG9wZW5pbmcgYnJhY2tldCBvciBvcGVyYXRvci4nXG4gICk7XG5cbiAgaWYgKG9wdGlvbnMuYXJyb3cpXG4gICAgdGV4dCA9IGA9PiAke3RleHR9YDtcbiAgaWYgKG9wdGlvbnMuZXJyb3IpXG4gICAgdGV4dCA9IGA8c3BhbiBjbGFzcz1cImVycm9yXCI+JHt0ZXh0fTwvc3Bhbj5gO1xuICBpZiAob3B0aW9ucy5saW5lTnVtKVxuICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UoLyEvLCBgbGluZSAke29wdGlvbnMubGluZU51bX0gLSBgKTtcbiAgJCgnI2NvbnNvbGUgI291dHB1dCcpLmFwcGVuZChgPHA+JHt0ZXh0fTwvcD5gKTtcblxuICAvLyBzY3JvbGwgdG8gYm90dG9tIGluIG9yZGVyIHRvIHNob3cgbW9zdCByZWNlbnRcbiAgdmFyIGNvbnNvbGVET00gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29uc29sZScpO1xuICBjb25zb2xlRE9NLnNjcm9sbFRvcCA9IGNvbnNvbGVET00uc2Nyb2xsSGVpZ2h0O1xufVxuXG5mdW5jdGlvbiByZXBsKGUpIHtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICB2YXIgY29kZSA9ICQoZS50YXJnZXQpLmZpbmQoJ2lucHV0JykudmFsKCk7XG4gIGNvbW1hbmRTdGFjay51bnNoaWZ0KGNvZGUpO1xuICBjb21tYW5kU3RhY2sgPSBjb21tYW5kU3RhY2suc2xpY2UoMCwgOSk7XG4gIGNvbW1hbmRJbmRleCA9IC0xO1xuICB3cmFwTG9nT3V0cHV0KCgpID0+IHtcbiAgICAkKGUudGFyZ2V0KS5maW5kKCdpbnB1dCcpLnZhbCgnJyk7XG4gICAgdmFyIGV2YWxFcnI7XG4gICAgdmFyIHdyYXBwZWRDb2RlID0gYHRyeXsgJHtjb2RlfVxcbiB9IGNhdGNoKGVycikgeyBldmFsRXJyID0gZXJyIH1gO1xuICAgIHRyeSB7XG4gICAgICB2YXIgb3V0cHV0ID0gZXZhbCh3cmFwcGVkQ29kZSk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBldmFsRXJyID0gZXJyO1xuICAgIH1cbiAgICBpZiAoZXZhbEVycikge1xuXG4gICAgICByZW5kZXIoZXZhbEVyci5tZXNzYWdlLCB7IGVycm9yOiB0cnVlIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZW5kZXIob3V0cHV0LCB7IGFycm93OiB0cnVlIH0pO1xuICAgIH1cbiAgfSk7XG59XG5cbi8vIGV4ZWN1dGVzIGEgZnVuY3Rpb24gaW4gYSBjb250ZXh0IHdoZXJlIGFsbCBjYWxscyB0byBjb25zb2xlLmxvZyB3aWxsIHJlbmRlciB0byB0aGUgRE9NXG5mdW5jdGlvbiB3cmFwTG9nT3V0cHV0KGZ1bmMpIHtcbiAgY29uc29sZS5uYXRpdmVMb2cgPSBjb25zb2xlLmxvZztcbiAgY29uc29sZS5sb2cgPSBmdW5jdGlvbigpIHtcbiAgICBbXS5mb3JFYWNoLmNhbGwoYXJndW1lbnRzLCBsaW5lID0+IHtcbiAgICAgIHJlbmRlcihsaW5lKTtcbiAgICB9KTtcbiAgICBjb25zb2xlLm5hdGl2ZUxvZyguLi5hcmd1bWVudHMpO1xuICB9XG4gIGZ1bmMoKTtcbiAgY29uc29sZS5sb2cgPSBjb25zb2xlLm5hdGl2ZUxvZztcbn1cblxuXG5cblxuIiwid2luZG93Lm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuXG4gIHdpbmRvdy5lZGl0b3IgPSBDb2RlTWlycm9yLmZyb21UZXh0QXJlYShkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvZGUtZWRpdG9yXCIpLCB7XG4gICAgbGluZU51bWJlcnM6IHRydWUsXG4gICAgbW9kZTogXCJqYXZhc2NyaXB0XCIsXG4gICAgbWF0Y2hCcmFja2V0czogdHJ1ZSxcbiAgICBhdXRvQ2xvc2VCcmFja2V0czogdHJ1ZSxcbiAgICBrZXlNYXA6ICdzdWJsaW1lJyxcbiAgICB0YWJTaXplOiAyLFxuICAgIHRoZW1lOiAndHRjbidcbiAgfSk7XG5cbiAgdmFyIHdhaXRpbmc7XG4gIGVkaXRvci5vbihcImNoYW5nZVwiLCAoKSA9PiB7XG4gICAgY2xlYXJUaW1lb3V0KHdhaXRpbmcpO1xuICAgIHdhaXRpbmcgPSBzZXRUaW1lb3V0KHVwZGF0ZUVycm9ycywgODAwKTtcbiAgfSk7XG5cbiAgdmFyIHNhdmUgPSByZXF1aXJlKCcuL3NhdmUnKTtcbiAgc2F2ZShlZGl0b3IpO1xuXG59O1xuXG52YXIgZXJyV2lkZ2V0cyA9IFtdO1xuXG5mdW5jdGlvbiBjaGVja0ZvckVycm9ycygpIHtcbiAgcmV0dXJuIGVycldpZGdldHM7XG59XG5cbmZ1bmN0aW9uIHJlbmRlckVycihsaW5lTnVtLCBkZXNjLCBjb2xOdW0pIHtcbiAgaWYgKCFsaW5lTnVtKSB0aHJvdyBuZXcgRXJyb3IoJ0xpbmUgbnVtYmVyIGZvciByZW5kZXJFcnIgbXVzdCBiZSBhIHZhbGlkIGludGVnZXIuJyk7XG4gIHZhciBtc2cgPSAkKGBcbiAgICA8ZGl2IGNsYXNzPVwibGludC1lcnJvclwiPlxuICAgICAgPHNwYW4gY2xhc3M9XCJsaW50LWVycm9yLWljb25cIj4hPC9zcGFuPlxuICAgICAgJHtkZXNjfVxuICAgIDwvZGl2PlxuICBgKVswXTtcbiAgZXJyV2lkZ2V0cy5wdXNoKFxuICAgIGVkaXRvci5hZGRMaW5lV2lkZ2V0KGxpbmVOdW0gLSAxLCBtc2csIHsgY292ZXJHdXR0ZXI6IGZhbHNlLCBub0hTY3JvbGw6IHRydWUgfSlcbiAgKTtcbn1cblxuZnVuY3Rpb24gdXBkYXRlRXJyb3JzKCkge1xuICB2YXIgY29kZSA9IGVkaXRvci5nZXRWYWx1ZSgpO1xuXG4gIGVycldpZGdldHMuZm9yRWFjaChlcnIgPT4ge1xuICAgIGVkaXRvci5yZW1vdmVMaW5lV2lkZ2V0KGVycik7XG4gIH0pO1xuICBlcnJXaWRnZXRzID0gW107XG5cbiAgdHJ5IHtcbiAgICB2YXIgc3ludGF4ID0gZXNwcmltYS5wYXJzZShjb2RlLCB7IHRvbGVyYW50OiB0cnVlLCBsb2M6IHRydWUgfSk7XG4gICAgdmFyIGV2YWxFcnI7XG4gICAgdmFyIHdyYXBwZWRDb2RlID0gYHRyeXsgJHtjb2RlfVxcbiB9IGNhdGNoKGVycikgeyBldmFsRXJyID0gZXJyIH1gO1xuXG4gICAgZXZhbCh3cmFwcGVkQ29kZSk7XG4gICAgaWYgKGV2YWxFcnIpIHtcbiAgICAgIHZhciBzdGFjayA9IGV2YWxFcnIuc3RhY2s7XG4gICAgICB2YXIgZXJyTWVzc2FnZSA9IGV2YWxFcnIubWVzc2FnZSB8fCBzdGFjay5tYXRjaCgvLiovKVswXTsgICAgIC8vIGZpcmVmb3ggfHwgY2hyb21lXG4gICAgICB2YXIgbGluZU51bSA9IGV2YWxFcnIubGluZU51bWJlciB8fCBzdGFjay5tYXRjaCgvPGFub255bW91cz46KFxcZCspOlxcZCsvKVsxXTtcbiAgICAgIC8vIHZhciBjb2xOdW0gPSBldmFsRXJyLmNvbHVtbk51bWJlciB8fCBzdGFjay5tYXRjaCgvPGFub255bW91cz46XFxkKzooXFxkKykvKVswXTtcbiAgICAgIHJlbmRlckVycihsaW5lTnVtLCBlcnJNZXNzYWdlKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHJlbmRlckVycihlcnIubGluZU51bWJlciwgZXJyLmRlc2NyaXB0aW9uLCBlcnIuY29sdW1uKTtcbiAgfVxuXG59XG5cbndpbmRvdy5yZXBsYWNlRWRpdG9yVGV4dCA9IGZ1bmN0aW9uKHRleHQpIHtcbiAgZWRpdG9yLnJlcGxhY2VSYW5nZShcbiAgICB0ZXh0LFxuICAgIENvZGVNaXJyb3IuUG9zKGVkaXRvci5maXJzdExpbmUoKS0xKSxcbiAgICBDb2RlTWlycm9yLlBvcyhlZGl0b3IubGFzdExpbmUoKSlcbiAgKTtcbn1cblxudmFyIGV4ZWN1dGUgPSByZXF1aXJlKCcuL2V4ZWMnKTtcbmV4ZWN1dGUoY2hlY2tGb3JFcnJvcnMpOyIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZWRpdG9yKSB7XG5cbiAgdmFyIHBhdGggPSB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWU7XG5cbiAgJCgnI3NhdmUnKS5vbignY2xpY2snLCBlID0+IHtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShwYXRoLCBlZGl0b3IuZ2V0VmFsdWUoKSk7XG4gICAgYWxlcnQoJ1Byb2dyZXNzIHNhdmVkLicpXG4gIH0pO1xuXG4gIHZhciBzYXZlZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKHBhdGgpO1xuICBpZiAoc2F2ZWQpIHtcbiAgICByZXBsYWNlRWRpdG9yVGV4dChzYXZlZCk7XG4gIH1cblxuICAkKCcjY2xlYXInKS5vbignY2xpY2snLCBlID0+IHtcbiAgICBpZiAoY29uZmlybSgnQXJlIHlvdSBzdXJlPyBUaGlzIHdpbGwgcmVtb3ZlIHNhdmVkIHByb2dyZXNzLicpKSB7XG4gICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShwYXRoKTtcbiAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgICB9XG4gIH0pO1xuXG59Il19
